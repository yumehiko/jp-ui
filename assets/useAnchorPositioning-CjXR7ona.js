import{r as O}from"./iframe-DEeGeQmx.js";import{e as q,g as _,a as X,b as qt,c as Ut,d as Gt,f as Kt,h as re,m as ue,i as z,j as bt,r as be,s as Jt,k as At,l as Ot,n as We,o as St,p as j,q as ye,t as Ae}from"./floating-ui.utils-CtlI5I81.js";import{o as Ct}from"./owner-CvMgaIeV.js";import{d as Qt,b as oe}from"./mergeClassName-BNAeu4iQ.js";import{u as ke}from"./useValueAsRef-BrOSccPP.js";import{u as Zt}from"./useStableCallback-DO7h5Pr5.js";import{u as en}from"./DirectionContext-Bpzfmgnk.js";import{j as Be,f as $,m as G,b as K,n as ut,e as U,i as J,k as Et,o as Ve,g as de,a as Oe,p as tn,q as Pt,r as nn,d as Ie,c as ze,s as Ce}from"./floating-ui.utils.dom-CWuwp5es.js";import{r as on}from"./index-Kut21IzS.js";import{i as sn,G as rn,P as cn,f as ln}from"./popupStateMapping-B9bpgTNS.js";import{u as an}from"./useId-H7dhCfMg.js";function dt(e,t,i){let{reference:n,floating:o}=e;const s=X(t),r=At(t),l=Ot(r),a=_(t),f=s==="y",c=n.x+n.width/2-o.width/2,u=n.y+n.height/2-o.height/2,g=n[l]/2-o[l]/2;let d;switch(a){case"top":d={x:c,y:n.y-o.height};break;case"bottom":d={x:c,y:n.y+n.height};break;case"right":d={x:n.x+n.width,y:u};break;case"left":d={x:n.x-o.width,y:u};break;default:d={x:n.x,y:n.y}}switch(re(t)){case"start":d[r]-=g*(i&&f?-1:1);break;case"end":d[r]+=g*(i&&f?-1:1);break}return d}const fn=async(e,t,i)=>{const{placement:n="bottom",strategy:o="absolute",middleware:s=[],platform:r}=i,l=s.filter(Boolean),a=await(r.isRTL==null?void 0:r.isRTL(t));let f=await r.getElementRects({reference:e,floating:t,strategy:o}),{x:c,y:u}=dt(f,n,a),g=n,d={},m=0;for(let h=0;h<l.length;h++){const{name:x,fn:w}=l[h],{x:y,y:R,data:A,reset:b}=await w({x:c,y:u,initialPlacement:n,placement:g,strategy:o,middlewareData:d,rects:f,platform:r,elements:{reference:e,floating:t}});c=y??c,u=R??u,d={...d,[x]:{...d[x],...A}},b&&m<=50&&(m++,typeof b=="object"&&(b.placement&&(g=b.placement),b.rects&&(f=b.rects===!0?await r.getElementRects({reference:e,floating:t,strategy:o}):b.rects),{x:c,y:u}=dt(f,g,a)),h=-1)}return{x:c,y:u,placement:g,strategy:o,middlewareData:d}};async function me(e,t){var i;t===void 0&&(t={});const{x:n,y:o,platform:s,rects:r,elements:l,strategy:a}=e,{boundary:f="clippingAncestors",rootBoundary:c="viewport",elementContext:u="floating",altBoundary:g=!1,padding:d=0}=q(t,e),m=bt(d),x=l[g?u==="floating"?"reference":"floating":u],w=be(await s.getClippingRect({element:(i=await(s.isElement==null?void 0:s.isElement(x)))==null||i?x:x.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(l.floating)),boundary:f,rootBoundary:c,strategy:a})),y=u==="floating"?{x:n,y:o,width:r.floating.width,height:r.floating.height}:r.reference,R=await(s.getOffsetParent==null?void 0:s.getOffsetParent(l.floating)),A=await(s.isElement==null?void 0:s.isElement(R))?await(s.getScale==null?void 0:s.getScale(R))||{x:1,y:1}:{x:1,y:1},b=be(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:y,offsetParent:R,strategy:a}):y);return{top:(w.top-b.top+m.top)/A.y,bottom:(b.bottom-w.bottom+m.bottom)/A.y,left:(w.left-b.left+m.left)/A.x,right:(b.right-w.right+m.right)/A.x}}const un=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var i,n;const{placement:o,middlewareData:s,rects:r,initialPlacement:l,platform:a,elements:f}=t,{mainAxis:c=!0,crossAxis:u=!0,fallbackPlacements:g,fallbackStrategy:d="bestFit",fallbackAxisSideDirection:m="none",flipAlignment:h=!0,...x}=q(e,t);if((i=s.arrow)!=null&&i.alignmentOffset)return{};const w=_(o),y=X(l),R=_(l)===l,A=await(a.isRTL==null?void 0:a.isRTL(f.floating)),b=g||(R||!h?[qt(l)]:Ut(l)),C=m!=="none";!g&&C&&b.push(...Gt(l,h,m,A));const v=[l,...b],S=await me(t,x),V=[];let T=((n=s.flip)==null?void 0:n.overflows)||[];if(c&&V.push(S[w]),u){const k=Kt(o,r,A);V.push(S[k[0]],S[k[1]])}if(T=[...T,{placement:o,overflows:V}],!V.every(k=>k<=0)){var H,W;const k=(((H=s.flip)==null?void 0:H.index)||0)+1,D=v[k];if(D&&(!(u==="alignment"?y!==X(D):!1)||T.every(p=>X(p.placement)===y?p.overflows[0]>0:!0)))return{data:{index:k,overflows:T},reset:{placement:D}};let M=(W=T.filter(F=>F.overflows[0]<=0).sort((F,p)=>F.overflows[1]-p.overflows[1])[0])==null?void 0:W.placement;if(!M)switch(d){case"bestFit":{var P;const F=(P=T.filter(p=>{if(C){const E=X(p.placement);return E===y||E==="y"}return!0}).map(p=>[p.placement,p.overflows.filter(E=>E>0).reduce((E,N)=>E+N,0)]).sort((p,E)=>p[1]-E[1])[0])==null?void 0:P[0];F&&(M=F);break}case"initialPlacement":M=l;break}if(o!==M)return{reset:{placement:M}}}return{}}}};function mt(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function gt(e){return Jt.some(t=>e[t]>=0)}const dn=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:i}=t,{strategy:n="referenceHidden",...o}=q(e,t);switch(n){case"referenceHidden":{const s=await me(t,{...o,elementContext:"reference"}),r=mt(s,i.reference);return{data:{referenceHiddenOffsets:r,referenceHidden:gt(r)}}}case"escaped":{const s=await me(t,{...o,altBoundary:!0}),r=mt(s,i.floating);return{data:{escapedOffsets:r,escaped:gt(r)}}}default:return{}}}}},Dt=new Set(["left","top"]);async function mn(e,t){const{placement:i,platform:n,elements:o}=e,s=await(n.isRTL==null?void 0:n.isRTL(o.floating)),r=_(i),l=re(i),a=X(i)==="y",f=Dt.has(r)?-1:1,c=s&&a?-1:1,u=q(t,e);let{mainAxis:g,crossAxis:d,alignmentAxis:m}=typeof u=="number"?{mainAxis:u,crossAxis:0,alignmentAxis:null}:{mainAxis:u.mainAxis||0,crossAxis:u.crossAxis||0,alignmentAxis:u.alignmentAxis};return l&&typeof m=="number"&&(d=l==="end"?m*-1:m),a?{x:d*c,y:g*f}:{x:g*f,y:d*c}}const gn=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var i,n;const{x:o,y:s,placement:r,middlewareData:l}=t,a=await mn(t,e);return r===((i=l.offset)==null?void 0:i.placement)&&(n=l.arrow)!=null&&n.alignmentOffset?{}:{x:o+a.x,y:s+a.y,data:{...a,placement:r}}}}},hn=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:i,y:n,placement:o}=t,{mainAxis:s=!0,crossAxis:r=!1,limiter:l={fn:x=>{let{x:w,y}=x;return{x:w,y}}},...a}=q(e,t),f={x:i,y:n},c=await me(t,a),u=X(_(o)),g=St(u);let d=f[g],m=f[u];if(s){const x=g==="y"?"top":"left",w=g==="y"?"bottom":"right",y=d+c[x],R=d-c[w];d=We(y,d,R)}if(r){const x=u==="y"?"top":"left",w=u==="y"?"bottom":"right",y=m+c[x],R=m-c[w];m=We(y,m,R)}const h=l.fn({...t,[g]:d,[u]:m});return{...h,data:{x:h.x-i,y:h.y-n,enabled:{[g]:s,[u]:r}}}}}},pn=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:i,y:n,placement:o,rects:s,middlewareData:r}=t,{offset:l=0,mainAxis:a=!0,crossAxis:f=!0}=q(e,t),c={x:i,y:n},u=X(o),g=St(u);let d=c[g],m=c[u];const h=q(l,t),x=typeof h=="number"?{mainAxis:h,crossAxis:0}:{mainAxis:0,crossAxis:0,...h};if(a){const R=g==="y"?"height":"width",A=s.reference[g]-s.floating[R]+x.mainAxis,b=s.reference[g]+s.reference[R]-x.mainAxis;d<A?d=A:d>b&&(d=b)}if(f){var w,y;const R=g==="y"?"width":"height",A=Dt.has(_(o)),b=s.reference[u]-s.floating[R]+(A&&((w=r.offset)==null?void 0:w[u])||0)+(A?0:x.crossAxis),C=s.reference[u]+s.reference[R]+(A?0:((y=r.offset)==null?void 0:y[u])||0)-(A?x.crossAxis:0);m<b?m=b:m>C&&(m=C)}return{[g]:d,[u]:m}}}},xn=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var i,n;const{placement:o,rects:s,platform:r,elements:l}=t,{apply:a=()=>{},...f}=q(e,t),c=await me(t,f),u=_(o),g=re(o),d=X(o)==="y",{width:m,height:h}=s.floating;let x,w;u==="top"||u==="bottom"?(x=u,w=g===(await(r.isRTL==null?void 0:r.isRTL(l.floating))?"start":"end")?"left":"right"):(w=u,x=g==="end"?"top":"bottom");const y=h-c.top-c.bottom,R=m-c.left-c.right,A=ue(h-c[x],y),b=ue(m-c[w],R),C=!t.middlewareData.shift;let v=A,S=b;if((i=t.middlewareData.shift)!=null&&i.enabled.x&&(S=R),(n=t.middlewareData.shift)!=null&&n.enabled.y&&(v=y),C&&!g){const T=z(c.left,0),H=z(c.right,0),W=z(c.top,0),P=z(c.bottom,0);d?S=m-2*(T!==0||H!==0?T+H:z(c.left,c.right)):v=h-2*(W!==0||P!==0?W+P:z(c.top,c.bottom))}await a({...t,availableWidth:S,availableHeight:v});const V=await r.getDimensions(l.floating);return m!==V.width||h!==V.height?{reset:{rects:!0}}:{}}}};function Mt(e){const t=U(e);let i=parseFloat(t.width)||0,n=parseFloat(t.height)||0;const o=J(e),s=o?e.offsetWidth:i,r=o?e.offsetHeight:n,l=Ae(i)!==s||Ae(n)!==r;return l&&(i=s,n=r),{width:i,height:n,$:l}}function _e(e){return $(e)?e:e.contextElement}function se(e){const t=_e(e);if(!J(t))return j(1);const i=t.getBoundingClientRect(),{width:n,height:o,$:s}=Mt(t);let r=(s?Ae(i.width):i.width)/n,l=(s?Ae(i.height):i.height)/o;return(!r||!Number.isFinite(r))&&(r=1),(!l||!Number.isFinite(l))&&(l=1),{x:r,y:l}}const wn=j(0);function Lt(e){const t=K(e);return!Et()||!t.visualViewport?wn:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function yn(e,t,i){return t===void 0&&(t=!1),!i||t&&i!==K(e)?!1:t}function Q(e,t,i,n){t===void 0&&(t=!1),i===void 0&&(i=!1);const o=e.getBoundingClientRect(),s=_e(e);let r=j(1);t&&(n?$(n)&&(r=se(n)):r=se(e));const l=yn(s,i,n)?Lt(s):j(0);let a=(o.left+l.x)/r.x,f=(o.top+l.y)/r.y,c=o.width/r.x,u=o.height/r.y;if(s){const g=K(s),d=n&&$(n)?K(n):n;let m=g,h=ut(m);for(;h&&n&&d!==m;){const x=se(h),w=h.getBoundingClientRect(),y=U(h),R=w.left+(h.clientLeft+parseFloat(y.paddingLeft))*x.x,A=w.top+(h.clientTop+parseFloat(y.paddingTop))*x.y;a*=x.x,f*=x.y,c*=x.x,u*=x.y,a+=R,f+=A,m=K(h),h=ut(m)}}return be({width:c,height:u,x:a,y:f})}function Ee(e,t){const i=Ce(e).scrollLeft;return t?t.left+i:Q(G(e)).left+i}function Tt(e,t){const i=e.getBoundingClientRect(),n=i.left+t.scrollLeft-Ee(e,i),o=i.top+t.scrollTop;return{x:n,y:o}}function vn(e){let{elements:t,rect:i,offsetParent:n,strategy:o}=e;const s=o==="fixed",r=G(n),l=t?Ve(t.floating):!1;if(n===r||l&&s)return i;let a={scrollLeft:0,scrollTop:0},f=j(1);const c=j(0),u=J(n);if((u||!u&&!s)&&((Ie(n)!=="body"||ze(r))&&(a=Ce(n)),J(n))){const d=Q(n);f=se(n),c.x=d.x+n.clientLeft,c.y=d.y+n.clientTop}const g=r&&!u&&!s?Tt(r,a):j(0);return{width:i.width*f.x,height:i.height*f.y,x:i.x*f.x-a.scrollLeft*f.x+c.x+g.x,y:i.y*f.y-a.scrollTop*f.y+c.y+g.y}}function Rn(e){return Array.from(e.getClientRects())}function bn(e){const t=G(e),i=Ce(e),n=e.ownerDocument.body,o=z(t.scrollWidth,t.clientWidth,n.scrollWidth,n.clientWidth),s=z(t.scrollHeight,t.clientHeight,n.scrollHeight,n.clientHeight);let r=-i.scrollLeft+Ee(e);const l=-i.scrollTop;return U(n).direction==="rtl"&&(r+=z(t.clientWidth,n.clientWidth)-o),{width:o,height:s,x:r,y:l}}const ht=25;function An(e,t){const i=K(e),n=G(e),o=i.visualViewport;let s=n.clientWidth,r=n.clientHeight,l=0,a=0;if(o){s=o.width,r=o.height;const c=Et();(!c||c&&t==="fixed")&&(l=o.offsetLeft,a=o.offsetTop)}const f=Ee(n);if(f<=0){const c=n.ownerDocument,u=c.body,g=getComputedStyle(u),d=c.compatMode==="CSS1Compat"&&parseFloat(g.marginLeft)+parseFloat(g.marginRight)||0,m=Math.abs(n.clientWidth-u.clientWidth-d);m<=ht&&(s-=m)}else f<=ht&&(s+=f);return{width:s,height:r,x:l,y:a}}const On=new Set(["absolute","fixed"]);function Sn(e,t){const i=Q(e,!0,t==="fixed"),n=i.top+e.clientTop,o=i.left+e.clientLeft,s=J(e)?se(e):j(1),r=e.clientWidth*s.x,l=e.clientHeight*s.y,a=o*s.x,f=n*s.y;return{width:r,height:l,x:a,y:f}}function pt(e,t,i){let n;if(t==="viewport")n=An(e,i);else if(t==="document")n=bn(G(e));else if($(t))n=Sn(t,i);else{const o=Lt(e);n={x:t.x-o.x,y:t.y-o.y,width:t.width,height:t.height}}return be(n)}function Ft(e,t){const i=de(e);return i===t||!$(i)||Oe(i)?!1:U(i).position==="fixed"||Ft(i,t)}function Cn(e,t){const i=t.get(e);if(i)return i;let n=Be(e,[],!1).filter(l=>$(l)&&Ie(l)!=="body"),o=null;const s=U(e).position==="fixed";let r=s?de(e):e;for(;$(r)&&!Oe(r);){const l=U(r),a=Pt(r);!a&&l.position==="fixed"&&(o=null),(s?!a&&!o:!a&&l.position==="static"&&!!o&&On.has(o.position)||ze(r)&&!a&&Ft(e,r))?n=n.filter(c=>c!==r):o=l,r=de(r)}return t.set(e,n),n}function En(e){let{element:t,boundary:i,rootBoundary:n,strategy:o}=e;const r=[...i==="clippingAncestors"?Ve(t)?[]:Cn(t,this._c):[].concat(i),n],l=r[0],a=r.reduce((f,c)=>{const u=pt(t,c,o);return f.top=z(u.top,f.top),f.right=ue(u.right,f.right),f.bottom=ue(u.bottom,f.bottom),f.left=z(u.left,f.left),f},pt(t,l,o));return{width:a.right-a.left,height:a.bottom-a.top,x:a.left,y:a.top}}function Pn(e){const{width:t,height:i}=Mt(e);return{width:t,height:i}}function Dn(e,t,i){const n=J(t),o=G(t),s=i==="fixed",r=Q(e,!0,s,t);let l={scrollLeft:0,scrollTop:0};const a=j(0);function f(){a.x=Ee(o)}if(n||!n&&!s)if((Ie(t)!=="body"||ze(o))&&(l=Ce(t)),n){const d=Q(t,!0,s,t);a.x=d.x+t.clientLeft,a.y=d.y+t.clientTop}else o&&f();s&&!n&&o&&f();const c=o&&!n&&!s?Tt(o,l):j(0),u=r.left+l.scrollLeft-a.x-c.x,g=r.top+l.scrollTop-a.y-c.y;return{x:u,y:g,width:r.width,height:r.height}}function $e(e){return U(e).position==="static"}function xt(e,t){if(!J(e)||U(e).position==="fixed")return null;if(t)return t(e);let i=e.offsetParent;return G(e)===i&&(i=i.ownerDocument.body),i}function kt(e,t){const i=K(e);if(Ve(e))return i;if(!J(e)){let o=de(e);for(;o&&!Oe(o);){if($(o)&&!$e(o))return o;o=de(o)}return i}let n=xt(e,t);for(;n&&tn(n)&&$e(n);)n=xt(n,t);return n&&Oe(n)&&$e(n)&&!Pt(n)?i:n||nn(e)||i}const Mn=async function(e){const t=this.getOffsetParent||kt,i=this.getDimensions,n=await i(e.floating);return{reference:Dn(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}};function Ln(e){return U(e).direction==="rtl"}const Tn={convertOffsetParentRelativeRectToViewportRelativeRect:vn,getDocumentElement:G,getClippingRect:En,getOffsetParent:kt,getElementRects:Mn,getClientRects:Rn,getDimensions:Pn,getScale:se,isElement:$,isRTL:Ln};function $t(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function Fn(e,t){let i=null,n;const o=G(e);function s(){var l;clearTimeout(n),(l=i)==null||l.disconnect(),i=null}function r(l,a){l===void 0&&(l=!1),a===void 0&&(a=1),s();const f=e.getBoundingClientRect(),{left:c,top:u,width:g,height:d}=f;if(l||t(),!g||!d)return;const m=ye(u),h=ye(o.clientWidth-(c+g)),x=ye(o.clientHeight-(u+d)),w=ye(c),R={rootMargin:-m+"px "+-h+"px "+-x+"px "+-w+"px",threshold:z(0,ue(1,a))||1};let A=!0;function b(C){const v=C[0].intersectionRatio;if(v!==a){if(!A)return r();v?r(!1,v):n=setTimeout(()=>{r(!1,1e-7)},1e3)}v===1&&!$t(f,e.getBoundingClientRect())&&r(),A=!1}try{i=new IntersectionObserver(b,{...R,root:o.ownerDocument})}catch{i=new IntersectionObserver(b,R)}i.observe(e)}return r(!0),s}function wt(e,t,i,n){n===void 0&&(n={});const{ancestorScroll:o=!0,ancestorResize:s=!0,elementResize:r=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:a=!1}=n,f=_e(e),c=o||s?[...f?Be(f):[],...Be(t)]:[];c.forEach(w=>{o&&w.addEventListener("scroll",i,{passive:!0}),s&&w.addEventListener("resize",i)});const u=f&&l?Fn(f,i):null;let g=-1,d=null;r&&(d=new ResizeObserver(w=>{let[y]=w;y&&y.target===f&&d&&(d.unobserve(t),cancelAnimationFrame(g),g=requestAnimationFrame(()=>{var R;(R=d)==null||R.observe(t)})),i()}),f&&!a&&d.observe(f),d.observe(t));let m,h=a?Q(e):null;a&&x();function x(){const w=Q(e);h&&!$t(h,w)&&i(),h=w,m=requestAnimationFrame(x)}return i(),()=>{var w;c.forEach(y=>{o&&y.removeEventListener("scroll",i),s&&y.removeEventListener("resize",i)}),u?.(),(w=d)==null||w.disconnect(),d=null,a&&cancelAnimationFrame(m)}}const kn=gn,$n=hn,Hn=un,Wn=xn,Bn=dn,Vn=pn,In=(e,t,i)=>{const n=new Map,o={platform:Tn,...i},s={...o.platform,_c:n};return fn(e,t,{...o,platform:s})};var zn=typeof document<"u",_n=function(){},ve=zn?O.useLayoutEffect:_n;function Se(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let i,n,o;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(i=e.length,i!==t.length)return!1;for(n=i;n--!==0;)if(!Se(e[n],t[n]))return!1;return!0}if(o=Object.keys(e),i=o.length,i!==Object.keys(t).length)return!1;for(n=i;n--!==0;)if(!{}.hasOwnProperty.call(t,o[n]))return!1;for(n=i;n--!==0;){const s=o[n];if(!(s==="_owner"&&e.$$typeof)&&!Se(e[s],t[s]))return!1}return!0}return e!==e&&t!==t}function Ht(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function yt(e,t){const i=Ht(e);return Math.round(t*i)/i}function He(e){const t=O.useRef(e);return ve(()=>{t.current=e}),t}function Nn(e){e===void 0&&(e={});const{placement:t="bottom",strategy:i="absolute",middleware:n=[],platform:o,elements:{reference:s,floating:r}={},transform:l=!0,whileElementsMounted:a,open:f}=e,[c,u]=O.useState({x:0,y:0,strategy:i,placement:t,middlewareData:{},isPositioned:!1}),[g,d]=O.useState(n);Se(g,n)||d(n);const[m,h]=O.useState(null),[x,w]=O.useState(null),y=O.useCallback(p=>{p!==C.current&&(C.current=p,h(p))},[]),R=O.useCallback(p=>{p!==v.current&&(v.current=p,w(p))},[]),A=s||m,b=r||x,C=O.useRef(null),v=O.useRef(null),S=O.useRef(c),V=a!=null,T=He(a),H=He(o),W=He(f),P=O.useCallback(()=>{if(!C.current||!v.current)return;const p={placement:t,strategy:i,middleware:g};H.current&&(p.platform=H.current),In(C.current,v.current,p).then(E=>{const N={...E,isPositioned:W.current!==!1};k.current&&!Se(S.current,N)&&(S.current=N,on.flushSync(()=>{u(N)}))})},[g,t,i,H,W]);ve(()=>{f===!1&&S.current.isPositioned&&(S.current.isPositioned=!1,u(p=>({...p,isPositioned:!1})))},[f]);const k=O.useRef(!1);ve(()=>(k.current=!0,()=>{k.current=!1}),[]),ve(()=>{if(A&&(C.current=A),b&&(v.current=b),A&&b){if(T.current)return T.current(A,b,P);P()}},[A,b,P,T,V]);const D=O.useMemo(()=>({reference:C,floating:v,setReference:y,setFloating:R}),[y,R]),M=O.useMemo(()=>({reference:A,floating:b}),[A,b]),F=O.useMemo(()=>{const p={position:i,left:0,top:0};if(!M.floating)return p;const E=yt(M.floating,c.x),N=yt(M.floating,c.y);return l?{...p,transform:"translate("+E+"px, "+N+"px)",...Ht(M.floating)>=1.5&&{willChange:"transform"}}:{position:i,left:E,top:N}},[i,l,M.floating,c.x,c.y]);return O.useMemo(()=>({...c,update:P,refs:D,elements:M,floatingStyles:F}),[c,P,D,M,F])}const Xn=(e,t)=>({...kn(e),options:[e,t]}),Yn=(e,t)=>({...$n(e),options:[e,t]}),jn=(e,t)=>({...Vn(e),options:[e,t]}),qn=(e,t)=>({...Hn(e),options:[e,t]}),Un=(e,t)=>({...Wn(e),options:[e,t]}),Gn=(e,t)=>({...Bn(e),options:[e,t]});function Kn(e){const{open:t=!1,onOpenChange:i,elements:n={}}=e,o=an(),s=sn()!=null,r=Qt(()=>new rn({open:t,onOpenChange:i,referenceElement:n.reference??null,floatingElement:n.floating??null,triggerElements:n.triggers??new cn,floatingId:o,nested:s,noEmit:e.noEmit||!1})).current;return oe(()=>{const l={open:t,floatingId:o};n.reference!==void 0&&(l.referenceElement=n.reference,l.domReferenceElement=$(n.reference)?n.reference:null),n.floating!==void 0&&(l.floatingElement=n.floating),r.update(l)},[t,o,n.reference,n.floating,r]),r.context.onOpenChange=i,r.context.nested=s,r.context.noEmit=e.noEmit||!1,r}function Jn(e={}){const{nodeId:t,externalTree:i}=e,n=Kn(e),o=e.rootContext||n,s={reference:o.useState("referenceElement"),floating:o.useState("floatingElement"),domReference:o.useState("domReferenceElement")},[r,l]=O.useState(null),a=O.useRef(null),f=ln(i);oe(()=>{s.domReference&&(a.current=s.domReference)},[s.domReference]);const c=Nn({...e,elements:{...s,...r&&{reference:r}}}),u=O.useCallback(v=>{const S=$(v)?{getBoundingClientRect:()=>v.getBoundingClientRect(),getClientRects:()=>v.getClientRects(),contextElement:v}:v;l(S),c.refs.setReference(S)},[c.refs]),[g,d]=O.useState(null),[m,h]=O.useState(null);o.useSyncedValue("referenceElement",g),o.useSyncedValue("domReferenceElement",$(g)?g:null),o.useSyncedValue("floatingElement",m);const x=O.useCallback(v=>{($(v)||v===null)&&(a.current=v,d(v)),($(c.refs.reference.current)||c.refs.reference.current===null||v!==null&&!$(v))&&c.refs.setReference(v)},[c.refs,d]),w=O.useCallback(v=>{h(v),c.refs.setFloating(v)},[c.refs]),y=O.useMemo(()=>({...c.refs,setReference:x,setFloating:w,setPositionReference:u,domReference:a}),[c.refs,x,w,u]),R=O.useMemo(()=>({...c.elements,domReference:s.domReference}),[c.elements,s.domReference]),A=o.useState("open"),b=o.useState("floatingId"),C=O.useMemo(()=>({...c,dataRef:o.context.dataRef,open:A,onOpenChange:o.setOpen,events:o.context.events,floatingId:b,refs:y,elements:R,nodeId:t,rootStore:o}),[c,y,R,t,o,A,b]);return oe(()=>{o.context.dataRef.current.floatingContext=C;const v=f?.nodesRef.current.find(S=>S.id===t);v&&(v.context=C)}),O.useMemo(()=>({...c,context:C,refs:y,elements:R,rootStore:o}),[c,y,R,C,o])}const Qn=e=>({name:"arrow",options:e,async fn(t){const{x:i,y:n,placement:o,rects:s,platform:r,elements:l,middlewareData:a}=t,{element:f,padding:c=0,offsetParent:u="real"}=q(e,t)||{};if(f==null)return{};const g=bt(c),d={x:i,y:n},m=At(o),h=Ot(m),x=await r.getDimensions(f),w=m==="y",y=w?"top":"left",R=w?"bottom":"right",A=w?"clientHeight":"clientWidth",b=s.reference[h]+s.reference[m]-d[m]-s.floating[h],C=d[m]-s.reference[m],v=u==="real"?await r.getOffsetParent?.(f):l.floating;let S=l.floating[A]||s.floating[h];(!S||!await r.isElement?.(v))&&(S=l.floating[A]||s.floating[h]);const V=b/2-C/2,T=S/2-x[h]/2-1,H=Math.min(g[y],T),W=Math.min(g[R],T),P=H,k=S-x[h]-W,D=S/2-x[h]/2+V,M=We(P,D,k),F=!a.arrow&&re(o)!=null&&D!==M&&s.reference[h]/2-(D<P?H:W)-x[h]/2<0,p=F?D<P?D-P:D-k:0;return{[m]:d[m]+p,data:{[m]:M,centerOffset:D-M-p,...F&&{alignmentOffset:p}},reset:F}}}),Zn=(e,t)=>({...Qn(e),options:[e,t]}),ei={name:"hide",async fn(e){const{width:t,height:i,x:n,y:o}=e.rects.reference,s=t===0&&i===0&&n===0&&o===0;return{data:{referenceHidden:(await Gn().fn(e)).data?.referenceHidden||s}}}},Re={sideX:"left",sideY:"top"},gi={name:"adaptiveOrigin",async fn(e){const{x:t,y:i,rects:{floating:n},elements:{floating:o},platform:s,strategy:r,placement:l}=e,a=K(o),f=a.getComputedStyle(o);if(!(f.transitionDuration!=="0s"&&f.transitionDuration!==""))return{x:t,y:i,data:Re};const u=await s.getOffsetParent?.(o);let g={width:0,height:0};if(r==="fixed"&&a?.visualViewport)g={width:a.visualViewport.width,height:a.visualViewport.height};else if(u===a){const y=Ct(o);g={width:y.documentElement.clientWidth,height:y.documentElement.clientHeight}}else await s.isElement?.(u)&&(g=await s.getDimensions(u));const d=_(l);let m=t,h=i;d==="left"&&(m=g.width-(t+n.width)),d==="top"&&(h=g.height-(i+n.height));const x=d==="left"?"right":Re.sideX,w=d==="top"?"bottom":Re.sideY;return{x:m,y:h,data:{sideX:x,sideY:w}}}};function Wt(e,t,i){const n=e==="inline-start"||e==="inline-end";return{top:"top",right:n?i?"inline-start":"inline-end":"right",bottom:"bottom",left:n?i?"inline-end":"inline-start":"left"}[t]}function vt(e,t,i){const{rects:n,placement:o}=e;return{side:Wt(t,_(o),i),align:re(o)||"center",anchor:{width:n.reference.width,height:n.reference.height},positioner:{width:n.floating.width,height:n.floating.height}}}function hi(e){const{anchor:t,positionMethod:i="absolute",side:n="bottom",sideOffset:o=0,align:s="center",alignOffset:r=0,collisionBoundary:l,collisionPadding:a=5,sticky:f=!1,arrowPadding:c=5,disableAnchorTracking:u=!1,keepMounted:g=!1,floatingRootContext:d,mounted:m,collisionAvoidance:h,shiftCrossAxis:x=!1,nodeId:w,adaptiveOrigin:y,lazyFlip:R=!1,externalTree:A}=e,[b,C]=O.useState(null);!m&&b!==null&&C(null);const v=h.side||"flip",S=h.align||"flip",V=h.fallbackAxisSide||"end",T=typeof t=="function"?t:void 0,H=Zt(T),W=T?H:t,P=ke(t),D=en()==="rtl",M=b||{top:"top",right:"right",bottom:"bottom",left:"left","inline-end":D?"left":"right","inline-start":D?"right":"left"}[n],F=s==="center"?M:`${M}-${s}`;let p=a;const E=1,N=n==="bottom"?E:0,Ne=n==="top"?E:0,Xe=n==="right"?E:0,Ye=n==="left"?E:0;typeof p=="number"?p={top:p+N,right:p+Ye,bottom:p+Ne,left:p+Xe}:p&&(p={top:(p.top||0)+N,right:(p.right||0)+Ye,bottom:(p.bottom||0)+Ne,left:(p.left||0)+Xe});const ge={boundary:l==="clipping-ancestors"?"clippingAncestors":l,padding:p},Z=O.useRef(null),Pe=ke(o),De=ke(r),he=[Xn(L=>{const B=vt(L,n,D),Y=typeof Pe.current=="function"?Pe.current(B):Pe.current,I=typeof De.current=="function"?De.current(B):De.current;return{mainAxis:Y,crossAxis:I,alignmentAxis:I}},[typeof o!="function"?o:0,typeof r!="function"?r:0,D,n])],je=S==="none"&&v!=="shift",qe=!je&&(f||x||v==="shift"),Ue=v==="none"?null:qn({...ge,padding:{top:p.top+E,right:p.right+E,bottom:p.bottom+E,left:p.left+E},mainAxis:!x&&v==="flip",crossAxis:S==="flip"?"alignment":!1,fallbackAxisSideDirection:V}),Ge=je?null:Yn(L=>{const B=Ct(L.elements.floating).documentElement;return{...ge,rootBoundary:x?{x:0,y:0,width:B.clientWidth,height:B.clientHeight}:void 0,mainAxis:S!=="none",crossAxis:qe,limiter:f||x?void 0:jn(Y=>{if(!Z.current)return{};const{width:I,height:ne}=Z.current.getBoundingClientRect(),ie=X(_(Y.placement)),we=ie==="y"?I:ne,Te=ie==="y"?p.left+p.right:p.top+p.bottom;return{offset:we/2+Te/2}})}},[ge,f,x,p,S]);v==="shift"||S==="shift"||s==="center"?he.push(Ge,Ue):he.push(Ue,Ge),he.push(Un({...ge,apply({elements:{floating:L},rects:{reference:B},availableWidth:Y,availableHeight:I}){Object.entries({"--available-width":`${Y}px`,"--available-height":`${I}px`,"--anchor-width":`${B.width}px`,"--anchor-height":`${B.height}px`}).forEach(([ne,ie])=>{L.style.setProperty(ne,ie)})}}),Zn(()=>({element:Z.current||document.createElement("div"),padding:c,offsetParent:"floating"}),[c]),{name:"transformOrigin",fn(L){const{elements:B,middlewareData:Y,placement:I,rects:ne,y:ie}=L,we=_(I),Te=X(we),at=Z.current,Bt=Y.arrow?.x||0,Vt=Y.arrow?.y||0,It=at?.clientWidth||0,zt=at?.clientHeight||0,Fe=Bt+It/2,ft=Vt+zt/2,_t=Math.abs(Y.shift?.y||0),Nt=ne.reference.height/2,fe=typeof o=="function"?o(vt(L,n,D)):o,Xt=_t>fe,Yt={top:`${Fe}px calc(100% + ${fe}px)`,bottom:`${Fe}px ${-fe}px`,left:`calc(100% + ${fe}px) ${ft}px`,right:`${-fe}px ${ft}px`}[we],jt=`${Fe}px ${ne.reference.y+Nt-ie}px`;return B.floating.style.setProperty("--transform-origin",qe&&Te==="y"&&Xt?jt:Yt),{}}},ei,y),oe(()=>{!m&&d&&d.update({referenceElement:null,floatingElement:null,domReferenceElement:null})},[m,d]);const Me=O.useMemo(()=>({elementResize:!u&&typeof ResizeObserver<"u",layoutShift:!u&&typeof IntersectionObserver<"u"}),[u]),{refs:ee,elements:ce,x:Ke,y:Je,middlewareData:te,update:pe,placement:Qe,context:Ze,isPositioned:le,floatingStyles:et}=Jn({rootContext:d,placement:F,middleware:he,strategy:i,whileElementsMounted:g?void 0:(...L)=>wt(...L,Me),nodeId:w,externalTree:A}),{sideX:tt,sideY:nt}=te.adaptiveOrigin||Re,Le=le?i:"fixed",it=O.useMemo(()=>y?{position:Le,[tt]:Ke,[nt]:Je}:{position:Le,...et},[y,Le,tt,Ke,nt,Je,et]),xe=O.useRef(null);oe(()=>{if(!m)return;const L=P.current,B=typeof L=="function"?L():L,I=(Rt(B)?B.current:B)||null||null;I!==xe.current&&(ee.setPositionReference(I),xe.current=I)},[m,ee,W,P]),O.useEffect(()=>{if(!m)return;const L=P.current;typeof L!="function"&&Rt(L)&&L.current!==xe.current&&(ee.setPositionReference(L.current),xe.current=L.current)},[m,ee,W,P]),O.useEffect(()=>{if(g&&m&&ce.domReference&&ce.floating)return wt(ce.domReference,ce.floating,pe,Me)},[g,m,ce,pe,Me]);const ae=_(Qe),ot=Wt(n,ae,D),st=re(Qe)||"center",rt=!!te.hide?.referenceHidden;oe(()=>{R&&m&&le&&C(ae)},[R,m,le,ae]);const ct=O.useMemo(()=>({position:"absolute",top:te.arrow?.y,left:te.arrow?.x}),[te.arrow]),lt=te.arrow?.centerOffset!==0;return O.useMemo(()=>({positionerStyles:it,arrowStyles:ct,arrowRef:Z,arrowUncentered:lt,side:ot,align:st,physicalSide:ae,anchorHidden:rt,refs:ee,context:Ze,isPositioned:le,update:pe}),[it,ct,Z,lt,ot,st,ae,rt,ee,Ze,le,pe])}function Rt(e){return e!=null&&"current"in e}export{hi as a,gi as b,Kn as u};
