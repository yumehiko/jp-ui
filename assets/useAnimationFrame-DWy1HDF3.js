import{d as l}from"./mergeClassName-BNAeu4iQ.js";import{u}from"./useOnMount-C_ExCAsE.js";const e=null;class h{callbacks=[];callbacksCount=0;nextId=1;startId=1;isScheduled=!1;tick=t=>{this.isScheduled=!1;const s=this.callbacks,r=this.callbacksCount;if(this.callbacks=[],this.callbacksCount=0,this.startId=this.nextId,r>0)for(let a=0;a<s.length;a+=1)s[a]?.(t)};request(t){const s=this.nextId;return this.nextId+=1,this.callbacks.push(t),this.callbacksCount+=1,!this.isScheduled&&(requestAnimationFrame(this.tick),this.isScheduled=!0),s}cancel(t){const s=t-this.startId;s<0||s>=this.callbacks.length||(this.callbacks[s]=null,this.callbacksCount-=1)}}const c=new h;class i{static create(){return new i}static request(t){return c.request(t)}static cancel(t){return c.cancel(t)}currentId=e;request(t){this.cancel(),this.currentId=c.request(()=>{this.currentId=e,t()})}cancel=()=>{this.currentId!==e&&(c.cancel(this.currentId),this.currentId=e)};disposeEffect=()=>this.cancel}function f(){const n=l(i.create).current;return u(n.disposeEffect),n}export{i as A,f as u};
