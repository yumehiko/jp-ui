import{j as o}from"./jsx-runtime-u17CrQMm.js";import{r as t}from"./iframe-DEeGeQmx.js";import{P as J,C as Q,s as W,a as $}from"./Checkbox-BG7AZTs1.js";import{u as Z,E as D,m as ee}from"./mergeClassName-BNAeu4iQ.js";import{u as te}from"./useControlled-BCfLpEop.js";import{u as F}from"./useStableCallback-DO7h5Pr5.js";import{u as T}from"./useBaseUiId-f2fTMo5O.js";import{u as ae,a as se,b as oe,c as re,f as le}from"./LabelableContext-CaGmJrJF.js";import{u as ne}from"./useValueChanged-ClCCtWZS.js";import{a as ie}from"./areArraysEqual-DHGtHcjb.js";import"./preload-helper-ClwkVg-s.js";import"./Icon-Du4yfv2t.js";import"./visuallyHidden-CbwUG2x5.js";import"./useButton-BfHs0Tuu.js";import"./floating-ui.utils.dom-CWuwp5es.js";import"./FieldItemContext-BRy7J5jt.js";import"./createBaseUIEventDetails-BeElkf0B.js";import"./useOpenChangeComplete-Ph1DesCe.js";import"./useValueAsRef-BrOSccPP.js";import"./index-Kut21IzS.js";import"./index-DylRyPx3.js";import"./useAnimationFrame-DWy1HDF3.js";import"./useOnMount-C_ExCAsE.js";import"./useTransitionStatus-cB-ptfQy.js";import"./useId-H7dhCfMg.js";const I=[];function ue(r){const{allValues:e=I,value:a=I,onValueChange:x}=r,P=t.useRef(a),c=t.useRef(new Map),[h,C]=t.useState("mixed"),d=T(),S=a.length===e.length,f=a.length!==e.length&&a.length>0,l=F(x),j=t.useCallback(()=>({id:d,indeterminate:f,checked:S,"aria-controls":e.map(i=>`${d}-${i}`).join(" "),onCheckedChange(i,s){const u=P.current,n=e.filter(m=>c.current.get(m)&&u.includes(m)),g=e.filter(m=>!c.current.get(m)||c.current.get(m)&&u.includes(m));if(u.length===g.length||u.length===0){a.length===g.length?l(n,s):l(g,s);return}h==="mixed"?(l(g,s),C("on")):h==="on"?(l(n,s),C("off")):h==="off"&&(l(u,s),C("mixed"))}}),[e,S,d,f,l,h,a.length]),b=t.useCallback(i=>({checked:a.includes(i),onCheckedChange(s,u){const n=a.slice();s?n.push(i):n.splice(n.indexOf(i),1),P.current=n,l(n,u),C("mixed")}}),[l,a]);return t.useMemo(()=>({id:d,indeterminate:f,getParentProps:j,getChildProps:b,disabledStatesRef:c}),[d,f,j,b])}const ce=t.forwardRef(function(e,a){const{allValues:x,className:P,defaultValue:c,disabled:h=!1,id:C,onValueChange:d,render:S,value:f,...l}=e,{disabled:j,name:b,state:i,validation:s,setFilled:u,setDirty:n,shouldValidateOnChange:g,validityData:_}=ae(),{labelId:m,getDescriptionProps:L}=se(),{clearErrors:U}=oe(),R=j||h,[V,q]=te({controlled:f,default:c,name:"CheckboxGroup",state:"value"}),O=F((p,M)=>{d?.(p,M),!M.isCanceled&&q(p)}),w=ue({allValues:x,value:f,onValueChange:d}),H=T(C),N=t.useRef(null),A=t.useCallback(p=>{N.current==null&&p!=null&&!p.hasAttribute(J)&&(N.current=p)},[]);re({enabled:!!b,id:H,commit:s.commit,value:V,controlRef:N,name:b,getValue:()=>V});const y=V??D;ne(y,()=>{b&&U(b);const p=Array.isArray(_.initialValue)?_.initialValue:D;u(y.length>0),n(!ie(y,p)),g()?s.commit(y):s.commit(y,!0)});const K=t.useMemo(()=>({...i,disabled:R}),[i,R]),X=t.useMemo(()=>({allValues:x,value:V,defaultValue:c,setValue:O,parent:w,disabled:R,validation:s,registerControlRef:A}),[x,V,c,O,w,R,s,A]),z=Z("div",e,{state:K,ref:a,props:[{role:"group","aria-labelledby":m},L,l],stateAttributesMapping:le});return o.jsx(Q.Provider,{value:X,children:z})}),de="_Group_2r4ol_1",me="_Caption_2r4ol_9",E={Group:de,Caption:me},k=t.forwardRef(({className:r,...e},a)=>o.jsx(ce,{ref:a,className:ee(r,E.Group),...e}));k.displayName="CheckboxGroup";k.__docgenInfo={description:"",methods:[],displayName:"CheckboxGroup"};const Te={title:"Components/Checkbox/Group",component:k},Y=`typesetting-label typesetting-tsumegumi ${W.Label}`,B=[{label:"お知らせを受け取る",value:"news"},{label:"アップデートを受け取る",value:"updates"},{label:"ヒントを受け取る",value:"tips"}],pe=()=>{const r=t.useId();return o.jsxs(k,{"aria-labelledby":r,defaultValue:["news"],children:[o.jsx("div",{id:r,className:E.Caption,children:"通知設定"}),B.map(e=>o.jsxs("label",{className:Y,children:[o.jsx($,{name:"notifications",value:e.value}),e.label]},e.value))]})},v={render:()=>o.jsx(pe,{})},fe=()=>{const r=t.useId();return o.jsxs(k,{"aria-labelledby":r,defaultValue:["news"],disabled:!0,children:[o.jsx("div",{id:r,className:E.Caption,children:"通知設定（無効）"}),B.map(e=>o.jsxs("label",{className:Y,children:[o.jsx($,{name:"notifications",value:e.value}),e.label]},e.value))]})},G={render:()=>o.jsx(fe,{})};v.parameters={...v.parameters,docs:{...v.parameters?.docs,source:{originalSource:`{
  render: () => <DefaultStory />
}`,...v.parameters?.docs?.source}}};G.parameters={...G.parameters,docs:{...G.parameters?.docs,source:{originalSource:`{
  render: () => <DisabledStory />
}`,...G.parameters?.docs?.source}}};const Ye=["Default","Disabled"];export{v as Default,G as Disabled,Ye as __namedExportsOrder,Te as default};
