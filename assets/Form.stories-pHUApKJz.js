import{j as t}from"./jsx-runtime-u17CrQMm.js";import{r as s}from"./iframe-DXOI1E9u.js";import{u as T,e as j,m as D}from"./mergeClassName-4BJ6eZC9.js";import{u as S}from"./useStableCallback-BG29bmz1.js";import{d as M,n as N}from"./createBaseUIEventDetails-DuvT8Jvz.js";import{F as P}from"./LabelableContext-DWdgtc_u.js";import{u as w}from"./useValueChanged-_q9BmO9Y.js";import{F as B}from"./Field-DmIjPf3p.js";import{I}from"./InputBox-D8ML-b8x.js";import{B as V}from"./Button-D8CYF5Qm.js";import"./preload-helper-ClwkVg-s.js";import"./index-DrrilDOe.js";import"./index-CpQvntHP.js";import"./FieldLabel-BA2Tj9Vu.js";import"./FieldsetRootContext-C4TYWMLZ.js";import"./useTimeout-JrQkYQHa.js";import"./useOnMount-i2UvWo5T.js";import"./useBaseUiId-DPGNyegz.js";import"./useId-vWe4oqRw.js";import"./element-C8qsRkBu.js";import"./floating-ui.utils.dom-CWuwp5es.js";import"./detectBrowser-CYw91I8L.js";import"./constants-CNjsXAL1.js";import"./Icon-UrFbKgmo.js";import"./Input-C3biBGUm.js";import"./useControlled-DEAayXAn.js";import"./useLabelableId-Bqos8ZU6.js";import"./Button.module-DuJVu5HN.js";import"./useButton-gvMzLzXO.js";const q=s.forwardRef(function(a,n){const{render:G,className:H,validationMode:x="onSubmit",errors:u,onSubmit:g,onFormSubmit:b,...O}=a,i=s.useRef({fields:new Map}),c=s.useRef(!1),v=s.useRef(!1),f=S(r=>{r&&(r.focus(),r.tagName==="INPUT"&&r.select())}),[l,h]=s.useState(u);w(u,()=>{h(u)}),s.useEffect(()=>{if(!c.current)return;c.current=!1;const r=Array.from(i.current.fields.values()).filter(o=>o.validityData.state.valid===!1);r.length&&f(r[0].controlRef.current)},[l,f]);const A=T("form",a,{ref:n,props:[{noValidate:!0,onSubmit(r){v.current=!0;let o=Array.from(i.current.fields.values());o.forEach(m=>{m.validate()}),o=Array.from(i.current.fields.values());const F=o.filter(m=>!m.validityData.state.valid);if(F.length)r.preventDefault(),f(F[0].controlRef.current);else if(c.current=!0,g?.(r),b){r.preventDefault();const m=o.reduce((E,p)=>(p.name&&(E[p.name]=p.getValue()),E),{});b(m,M(N,r.nativeEvent))}}},O]}),y=S(r=>{if(r&&l&&j.hasOwnProperty.call(l,r)){const o={...l};delete o[r],h(o)}}),C=s.useMemo(()=>({formRef:i,validationMode:x,errors:l??j,clearErrors:y,submitAttemptedRef:v}),[i,x,l,y]);return t.jsx(P.Provider,{value:C,children:A})}),z="_Form_qazri_1",$="_Actions_qazri_8",R={Form:z,Actions:$};function _({className:e,...a}){return t.jsx(q,{className:D(e,R.Form),...a})}_.__docgenInfo={description:"",methods:[],displayName:"Form"};const Fe={title:"Components/Form",decorators:[e=>t.jsx("div",{style:{width:640},children:t.jsx(e,{})})],argTypes:{invalid:{control:"boolean"},errorMessage:{control:"text"},supportingText:{control:"text"},disabled:{control:"boolean"},readOnly:{control:"boolean"},placeholder:{control:"text"},defaultValue:{control:"text"}},args:{label:"Label",supportingText:"Supporting text.",placeholder:"Place Holder",defaultValue:"",disabled:!1,invalid:!1,readOnly:!1}},k=e=>{const[a,n]=s.useState(e.defaultValue??"");return s.useEffect(()=>{n(e.defaultValue??"")},[e.defaultValue]),t.jsxs(_,{onFormSubmit:()=>{n("")},children:[t.jsx(B,{label:e.label,supportingText:e.supportingText,errorMessage:e.errorMessage,invalid:e.invalid,disabled:e.disabled,readOnly:e.readOnly,children:t.jsx(I,{value:a,onValueChange:n,invalid:e.invalid,disabled:e.disabled,readOnly:e.readOnly,placeholder:e.placeholder})}),t.jsxs("div",{className:R.Actions,children:[t.jsx(V,{type:"button",variant:"ghost",children:"キャンセル"}),t.jsx(V,{type:"submit",disabled:e.disabled,children:"送信"})]})]})},d={render:e=>t.jsx(k,{...e})};d.parameters={...d.parameters,docs:{...d.parameters?.docs,source:{originalSource:`{
  render: args => <FormStory {...args} />
}`,...d.parameters?.docs?.source}}};const Ee=["Default"];export{d as Default,Ee as __namedExportsOrder,Fe as default};
