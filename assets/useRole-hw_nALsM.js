import{r}from"./iframe-DXOI1E9u.js";import{u as P}from"./useId-vWe4oqRw.js";import{i as S}from"./popupStateMapping-CpSo4hCe.js";import{e as F}from"./mergeClassName-4BJ6eZC9.js";import{b as y}from"./element-C8qsRkBu.js";const T=new Map([["select","listbox"],["combobox","listbox"],["label",!1]]);function A(c,x={}){const a="rootStore"in c?c.rootStore:c,l=a.useState("open"),u=a.useState("floatingId"),I=a.useState("domReferenceElement"),d=a.useState("floatingElement"),{enabled:m=!0,role:o="dialog"}=x,M=P(),s=I?.id||M,t=r.useMemo(()=>y(d)?.id||u,[d,u]),e=T.get(o)??o,p=S()!=null,i=r.useMemo(()=>e==="tooltip"||o==="label"?F:{"aria-haspopup":e==="alertdialog"?"dialog":e,"aria-expanded":"false",...e==="listbox"&&{role:"combobox"},...e==="menu"&&p&&{role:"menuitem"},...o==="select"&&{"aria-autocomplete":"none"},...o==="combobox"&&{"aria-autocomplete":"list"}},[e,p,o]),f=r.useMemo(()=>e==="tooltip"||o==="label"?{[`aria-${o==="label"?"labelledby":"describedby"}`]:l?t:void 0}:{...i,"aria-expanded":l?"true":"false","aria-controls":l?t:void 0,...e==="menu"&&{id:s}},[e,t,l,s,o,i]),b=r.useMemo(()=>{const n={id:t,...e&&{role:e}};return e==="tooltip"||o==="label"?n:{...n,...e==="menu"&&{"aria-labelledby":s}}},[e,t,s,o]),g=r.useCallback(({active:n,selected:E})=>{const R={role:"option",...n&&{id:`${t}-fui-option`}};switch(o){case"select":case"combobox":return{...R,"aria-selected":E}}return{}},[t,o]);return r.useMemo(()=>m?{reference:f,floating:b,item:g,trigger:i}:{},[m,f,b,i,g])}export{A as u};
