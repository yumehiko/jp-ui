import{j as u}from"./jsx-runtime-u17CrQMm.js";import{r as n}from"./iframe-DXOI1E9u.js";import{I as Be}from"./Icon-UrFbKgmo.js";import{f as D,b as Y,N as je,a as Le,c as we,e as Fe,u as A,m as Oe}from"./mergeClassName-4BJ6eZC9.js";import{u as Ge}from"./useControlled-DEAayXAn.js";import{u as Te}from"./useStableCallback-BG29bmz1.js";import{v as qe}from"./visuallyHidden-CbwUG2x5.js";import{f as ee,b as $e,u as He,a as ze,c as Je}from"./LabelableContext-DWdgtc_u.js";import{u as Q}from"./useBaseUiId-DPGNyegz.js";import{u as Ke}from"./useButton-gvMzLzXO.js";import{u as Ue}from"./FieldItemContext-B-YiPSBF.js";import{c as We,n as Xe}from"./createBaseUIEventDetails-DuvT8Jvz.js";import{u as Ye}from"./useValueChanged-_q9BmO9Y.js";import{u as Qe,t as Ze}from"./useOpenChangeComplete-EYYQQ2xa.js";import{u as De}from"./useTransitionStatus-BSiOYNFN.js";const Ae=n.createContext(void 0);function et(e=!0){const r=n.useContext(Ae);if(r===void 0&&!e)throw new Error(D(3));return r}let Z=(function(e){return e.checked="data-checked",e.unchecked="data-unchecked",e.disabled="data-disabled",e.readonly="data-readonly",e.required="data-required",e.valid="data-valid",e.invalid="data-invalid",e.touched="data-touched",e.dirty="data-dirty",e.filled="data-filled",e.focused="data-focused",e})({});function te(e){return n.useMemo(()=>({checked(r){return e.indeterminate?{}:r?{[Z.checked]:""}:{[Z.unchecked]:""}},...ee}),[e.indeterminate])}const ne=n.createContext(void 0);function tt(){const e=n.useContext(ne);if(e===void 0)throw new Error(D(14));return e}const nt="data-parent",ot=n.forwardRef(function(r,x){const{checked:I,className:ae,defaultChecked:B=!1,disabled:j=!1,id:i,indeterminate:d=!1,inputRef:P,name:L,onCheckedChange:y,parent:s=!1,readOnly:f=!1,render:T,required:p=!1,uncheckedValue:_,value:R,nativeButton:re=!1,...se}=r,{clearErrors:ie}=$e(),{disabled:de,name:ce,setDirty:le,setFilled:w,setFocused:q,setTouched:ue,state:$,validationMode:fe,validityData:pe,shouldValidateOnChange:me,validation:he}=He(),Ce=Ue(),{labelId:xe,controlId:ke,setControlId:E,getDescriptionProps:H}=ze(),t=et(),k=t?.parent,V=k&&t.allValues,m=de||Ce.disabled||t?.disabled||j,h=ce??L,a=R??h,z=Q(),ve=Q();let v=ke;V?v=s?ve:`${k.id}-${a}`:i&&(v=i);let F={};V&&(s?F=t.parent.getParentProps():a&&(F=t.parent.getChildProps(a)));const ge=Te(y),{checked:J=I,indeterminate:M=d,onCheckedChange:be,...Ie}=F,C=t?.value,K=t?.setValue,U=t?.defaultValue,O=n.useRef(null),{getButtonProps:Pe,buttonRef:ye}=Ke({disabled:m,native:re}),c=t?.validation??he,[o,_e]=Ge({controlled:a&&C&&!s?C.includes(a):J,default:a&&U&&!s?U.includes(a):B,name:"Checkbox",state:"checked"});Y(()=>{if(E!==je)return E(v),()=>{E(void 0)}},[v,t,E,s]),Je({enabled:!t,id:z,commit:c.commit,value:o,controlRef:O,name:h,getValue:()=>o});const g=n.useRef(null),Re=Le(P,g,c.inputRef);Y(()=>{g.current&&(g.current.indeterminate=M,o&&w(!0))},[o,M,w]),Ye(o,()=>{t&&!s||(ie(h),w(o),le(o!==pe.initialValue),me()?c.commit(o):c.commit(o,!0))});const Ee=we({checked:o,disabled:m,name:s?void 0:h,id:v??void 0,required:p,ref:Re,style:qe,tabIndex:-1,type:"checkbox","aria-hidden":!0,onChange(l){if(l.nativeEvent.defaultPrevented)return;const N=l.target.checked,S=We(Xe,l.nativeEvent);if(be?.(N,S),ge(N,S),!S.isCanceled&&(_e(N),a&&C&&K&&!s)){const Ne=N?[...C,a]:C.filter(Se=>Se!==a);K(Ne,S)}},onFocus(){O.current?.focus()}},R!==void 0?{value:(t?o&&R:R)||""}:Fe,H,t?c.getValidationProps:c.getInputValidationProps),W=V?!!J:o,X=V&&M||d;n.useEffect(()=>{k&&a&&k.disabledStatesRef.current.set(a,m)},[k,m,a]);const G=n.useMemo(()=>({...$,checked:W,disabled:m,readOnly:f,required:p,indeterminate:X}),[$,W,m,f,p,X]),Ve=te(G),Me=A("span",r,{state:G,ref:[ye,O,x,t?.registerControlRef],props:[{id:z,role:"checkbox","aria-checked":M?"mixed":o,"aria-readonly":f||void 0,"aria-required":p||void 0,"aria-labelledby":xe,[nt]:s?"":void 0,onFocus(){q(!0)},onBlur(){const l=g.current;l&&(ue(!0),q(!1),fe==="onBlur"&&c.commit(t?C:l.checked))},onClick(l){f||m||(l.preventDefault(),g.current?.click())}},H,c.getValidationProps,se,Ie,Pe],stateAttributesMapping:Ve});return u.jsxs(ne.Provider,{value:G,children:[Me,!o&&!t&&h&&!s&&_!==void 0&&u.jsx("input",{type:"hidden",name:h,value:_}),u.jsx("input",{...Ee})]})}),at=n.forwardRef(function(r,x){const{render:I,className:ae,keepMounted:B=!1,...j}=r,i=tt(),d=i.checked||i.indeterminate,{transitionStatus:P,setMounted:L}=De(d),y=n.useRef(null),s=n.useMemo(()=>({...i,transitionStatus:P}),[i,P]);Qe({open:d,ref:y,onComplete(){d||L(!1)}});const f=te(i),T=n.useMemo(()=>({...f,...Ze,...ee}),[f]),p=B||d,_=A("span",r,{enabled:p,ref:[x,y],state:s,stateAttributesMapping:T,props:j});return p?_:null}),rt="_Label_k81lx_1",st="_Checkbox_k81lx_9",it="_Box_k81lx_45",dt="_StateLayer_k81lx_56",ct="_Indicator_k81lx_69",lt="_Icon_k81lx_81",b={Label:rt,Checkbox:st,Box:it,StateLayer:dt,Indicator:ct,Icon:lt},oe=n.forwardRef(({className:e,icon:r,...x},I)=>u.jsxs(ot,{ref:I,className:Oe(e,b.Checkbox),...x,children:[u.jsx("span",{"aria-hidden":"true",className:b.Box}),u.jsx("span",{"aria-hidden":"true",className:b.StateLayer}),u.jsx(at,{className:b.Indicator,children:r??u.jsx(Be,{name:"check",size:12,className:b.Icon})})]}));oe.displayName="Checkbox";oe.__docgenInfo={description:"",methods:[],displayName:"Checkbox",props:{icon:{required:!1,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""}}};export{Ae as C,nt as P,oe as a,b as s};
