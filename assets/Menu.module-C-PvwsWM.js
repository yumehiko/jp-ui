import{r as t}from"./iframe-CbECxjq5.js";import{f as $,u as B,c as Ce,a as dt,b as Ie,d as pt,e as ft,E as mt}from"./mergeClassName-IXwn37SS.js";import{a as fe,F as gt,D as ht,q as vt,g as bt,R as xt,P as Ct,c as A,h as It,e as Rt,i as Mt,d as St,T as Pt,t as yt}from"./popupStateMapping-Be-QQ-Fi.js";import{t as Re,u as Me}from"./useOpenChangeComplete-DeoJGa5O.js";import{m as ue,f as me,c as Q,q as Et,s as ie,r as Fe,t as Tt,o as kt,l as wt,g as _t,j as Ot}from"./createBaseUIEventDetails-Ca3whcAT.js";import{u as ce}from"./useStableCallback-D6w4asaT.js";import{u as Ge}from"./useControlled-C4PWAOlh.js";import{u as ge,C as At}from"./useCompositeListItem-Bwy1HszK.js";import{u as le}from"./useBaseUiId-DYV6Jlu1.js";import{j as F}from"./jsx-runtime-u17CrQMm.js";import{u as Be}from"./useTransitionStatus-CMcipHeM.js";import{u as Nt}from"./ToolbarRootContext-HFnBPlVP.js";import{C as Lt}from"./composite-CJk-2jGs.js";import{g as Ft}from"./getDisabledMountTransitionStyles-B1-NSK41.js";import{a as qt,u as Ut}from"./useHoverReferenceInteraction-MRO1SJQX.js";import{F as Gt,I as Bt,u as jt,a as Vt}from"./InternalBackdrop-BylOAcjh.js";import{i as Dt}from"./inertValue-DV4sgSgO.js";import{a as Ht}from"./useAnchorPositioning-CYWZQJ39.js";import{r as Kt}from"./index-D8RucqKe.js";import{u as qe}from"./useTimeout-BMAPPt2Y.js";import{u as Yt}from"./useId-kuykVazU.js";import{u as Wt}from"./useAnimationFrame-CwwnCJKI.js";import{u as $t}from"./DirectionContext-DoIPesKM.js";import{p as Jt,c as Xt,u as zt,a as Qt,b as Zt,e as en}from"./useSyncedFloatingRootContext-mahGDNu5.js";import{u as tn,a as je}from"./useInteractions-DTzIbOZK.js";import{u as nn}from"./useRole-CCmkM4dN.js";import{u as on}from"./useListNavigation-DiNy-d4f.js";import{u as rn}from"./useTypeahead-BXvk3-6j.js";import{i as sn,a as an,g as un}from"./floating-ui.utils.dom-CWuwp5es.js";import{u as cn}from"./useButton-CFXQrDeP.js";import{s as ln}from"./safePolygon-GHFvNXVz.js";import{u as dn}from"./useClick-etEH6_CO.js";const pn=t.createContext(void 0);function he(e=!0){const r=t.useContext(pn);if(r===void 0&&!e)throw new Error($(25));return r}const Ve=t.createContext(void 0);function oe(e){const r=t.useContext(Ve);if(r===void 0&&!e)throw new Error($(33));return r}const De=t.createContext(void 0);function K(e){const r=t.useContext(De);if(r===void 0&&!e)throw new Error($(36));return r}const wo=t.forwardRef(function(r,a){const{className:x,render:y,...p}=r,{store:g}=K(),{arrowRef:o,side:i,align:l,arrowUncentered:d,arrowStyles:h}=oe(),v=g.useState("open"),I=t.useMemo(()=>({open:v,side:i,align:l,uncentered:d}),[v,i,l,d]);return B("div",r,{ref:[o,a],stateAttributesMapping:fe,state:I,props:{style:h,"aria-hidden":!0,...p}})}),fn={...fe,...Re},_o=t.forwardRef(function(r,a){const{className:x,render:y,...p}=r,{store:g}=K(),o=g.useState("open"),i=g.useState("mounted"),l=g.useState("transitionStatus"),d=g.useState("lastOpenChangeReason"),h=he(),v=t.useMemo(()=>({open:o,transitionStatus:l}),[o,l]);return B("div",r,{ref:h?.backdropRef?[a,h.backdropRef]:a,state:v,stateAttributesMapping:fn,props:[{role:"presentation",hidden:!i,style:{pointerEvents:d===ue?"none":void 0,userSelect:"none",WebkitUserSelect:"none"}},p]})}),He=t.createContext(void 0);function mn(){const e=t.useContext(He);if(e===void 0)throw new Error($(30));return e}const Se={type:"regular-item"};function ve(e){const{closeOnClick:r,disabled:a=!1,highlighted:x,id:y,store:p,nativeButton:g,itemMetadata:o,nodeId:i}=e,l=t.useRef(null),d=he(!0),h=d!==void 0,{events:v}=p.useState("floatingTreeRoot"),{getButtonProps:I,buttonRef:E}=cn({disabled:a,focusableWhenDisabled:!0,native:g}),u=t.useCallback(c=>Ce({id:y,role:"menuitem",tabIndex:x?0:-1,onMouseMove(s){i&&v.emit("itemhover",{nodeId:i,target:s.currentTarget})},onMouseEnter(){o.type==="submenu-trigger"&&o.setActive()},onKeyUp(s){s.key===" "&&p.context.typingRef.current&&s.preventBaseUIHandler()},onClick(s){r&&v.emit("close",{domEvent:s,reason:me})},onMouseUp(s){if(d){const w=d.initialCursorPointRef.current;if(d.initialCursorPointRef.current=null,h&&w&&Math.abs(s.clientX-w.x)<=1&&Math.abs(s.clientY-w.y)<=1)return}l.current&&p.context.allowMouseUpTriggerRef.current&&(!h||s.button===2)&&o.type==="regular-item"&&l.current.click()}},c,I),[y,x,I,r,v,p,h,d,o,i]),b=dt(l,E);return t.useMemo(()=>({getItemProps:u,itemRef:b}),[u,b])}let Ue=(function(e){return e.checked="data-checked",e.unchecked="data-unchecked",e.disabled="data-disabled",e.highlighted="data-highlighted",e})({});const be={checked(e){return e?{[Ue.checked]:""}:{[Ue.unchecked]:""}},...Re},Oo=t.forwardRef(function(r,a){const{render:x,className:y,id:p,label:g,nativeButton:o=!1,disabled:i=!1,closeOnClick:l=!1,checked:d,defaultChecked:h,onCheckedChange:v,...I}=r,E=ge({label:g}),u=oe(!0),b=le(p),{store:c}=K(),s=c.useState("isActive",E.index),w=c.useState("itemProps"),[_,n]=Ge({controlled:d,default:h??!1,name:"MenuCheckboxItem",state:"checked"}),{getItemProps:N,itemRef:R}=ve({closeOnClick:l,disabled:i,highlighted:s,id:b,store:c,nativeButton:o,nodeId:u?.nodeId,itemMetadata:Se}),O=t.useMemo(()=>({disabled:i,highlighted:s,checked:_}),[i,s,_]),f=ce(T=>{const q={...Q(me,T.nativeEvent),preventUnmountOnClose:()=>{}};v?.(!_,q),!q.isCanceled&&n(S=>!S)}),j=B("div",r,{state:O,stateAttributesMapping:be,props:[w,{role:"menuitemcheckbox","aria-checked":_,onClick:f},I,N],ref:[R,a,E.ref]});return F.jsx(He.Provider,{value:O,children:j})}),Ao=t.forwardRef(function(r,a){const{render:x,className:y,keepMounted:p=!1,...g}=r,o=mn(),i=t.useRef(null),{transitionStatus:l,setMounted:d}=Be(o.checked);Me({open:o.checked,ref:i,onComplete(){o.checked||d(!1)}});const h=t.useMemo(()=>({checked:o.checked,disabled:o.disabled,highlighted:o.highlighted,transitionStatus:l}),[o.checked,o.disabled,o.highlighted,l]);return B("span",r,{state:h,ref:[a,i],stateAttributesMapping:be,props:{"aria-hidden":!0,...g},enabled:p||o.checked})}),Ke=t.createContext(void 0);function gn(){const e=t.useContext(Ke);if(e===void 0)throw new Error($(31));return e}const No=t.forwardRef(function(r,a){const{render:x,className:y,...p}=r,[g,o]=t.useState(void 0),i=t.useMemo(()=>({setLabelId:o}),[o]),l=B("div",r,{ref:a,props:{role:"group","aria-labelledby":g,...p}});return F.jsx(Ke.Provider,{value:i,children:l})}),Lo=t.forwardRef(function(r,a){const{className:x,render:y,id:p,...g}=r,o=le(p),{setLabelId:i}=gn();return Ie(()=>(i(o),()=>{i(void 0)}),[i,o]),B("div",r,{ref:a,props:{id:o,role:"presentation",...g}})}),Fo=t.forwardRef(function(r,a){const{render:x,className:y,id:p,label:g,nativeButton:o=!1,disabled:i=!1,closeOnClick:l=!0,...d}=r,h=ge({label:g}),v=oe(!0),I=le(p),{store:E}=K(),u=E.useState("isActive",h.index),b=E.useState("itemProps"),{getItemProps:c,itemRef:s}=ve({closeOnClick:l,disabled:i,highlighted:u,id:I,store:E,nativeButton:o,nodeId:v?.nodeId,itemMetadata:Se}),w=t.useMemo(()=>({disabled:i,highlighted:u}),[i,u]);return B("div",r,{state:w,props:[b,d,c],ref:[s,a,h.ref]})}),hn={...fe,...Re},qo=t.forwardRef(function(r,a){const{render:x,className:y,finalFocus:p,...g}=r,{store:o}=K(),{side:i,align:l}=oe(),d=Nt(!0)!=null,h=o.useState("open"),v=o.useState("transitionStatus"),I=o.useState("popupProps"),E=o.useState("mounted"),u=o.useState("instantType"),b=o.useState("activeTriggerElement"),c=o.useState("parent"),s=o.useState("lastOpenChangeReason"),w=o.useState("rootId"),_=o.useState("floatingRootContext"),n=o.useState("floatingTreeRoot"),N=o.useState("closeDelay"),R=o.useState("activeTriggerElement");Me({open:h,ref:o.context.popupRef,onComplete(){h&&o.context.onOpenChangeComplete?.(!0)}}),t.useEffect(()=>{function S(U){o.setOpen(!1,Q(U.reason,U.domEvent))}return n.events.on("close",S),()=>{n.events.off("close",S)}},[n.events,o]);const O=o.useState("hoverEnabled"),f=o.useState("disabled");qt(_,{enabled:O&&!f&&c.type!=="context-menu"&&c.type!=="menubar",closeDelay:N});const j=t.useMemo(()=>({transitionStatus:v,side:i,align:l,open:h,nested:c.type==="menu",instant:u}),[v,i,l,h,c.type,u]),T=B("div",r,{state:j,ref:[a,o.context.popupRef],stateAttributesMapping:hn,props:[I,{onKeyDown(S){d&&Lt.has(S.key)&&S.stopPropagation()}},Ft(v),g,{"data-rootownerid":w}]});let q=c.type===void 0||c.type==="context-menu";return(b||c.type==="menubar"&&s!==Et)&&(q=!0),F.jsx(Gt,{context:_,modal:!1,disabled:!E,returnFocus:p===void 0?q:p,initialFocus:c.type!=="menu",restoreFocus:!0,externalTree:c.type!=="menubar"?n:void 0,previousFocusableElement:R,nextFocusableElement:c.type===void 0?o.context.triggerFocusTargetRef:void 0,beforeContentFocusGuardRef:c.type===void 0?o.context.beforeContentFocusGuardRef:void 0,children:T})}),Ye=t.createContext(void 0);function vn(){const e=t.useContext(Ye);if(e===void 0)throw new Error($(32));return e}const Uo=t.forwardRef(function(r,a){const{keepMounted:x=!1,...y}=r,{store:p}=K();return p.useState("mounted")||x?F.jsx(Ye.Provider,{value:x,children:F.jsx(gt,{ref:a,...y})}):null}),Go=t.forwardRef(function(r,a){const{anchor:x,positionMethod:y="absolute",className:p,render:g,side:o,align:i,sideOffset:l=0,alignOffset:d=0,collisionBoundary:h="clipping-ancestors",collisionPadding:v=5,arrowPadding:I=5,sticky:E=!1,disableAnchorTracking:u=!1,collisionAvoidance:b=ht,...c}=r,{store:s}=K(),w=vn(),_=he(!0),n=s.useState("parent"),N=s.useState("floatingRootContext"),R=s.useState("floatingTreeRoot"),O=s.useState("mounted"),f=s.useState("open"),j=s.useState("modal"),T=s.useState("activeTriggerElement"),q=s.useState("lastOpenChangeReason"),S=s.useState("floatingNodeId"),U=s.useState("floatingParentNodeId");let Z=x,P=l,Y=d,J=i,ee=b;n.type==="context-menu"&&(Z=x??n.context?.anchor,J=J??"start",!o&&J!=="center"&&(Y=r.alignOffset??2,P=r.sideOffset??-5));let V=o,D=J;n.type==="menu"?(V=V??"inline-end",D=D??"start",ee=r.collisionAvoidance??vt):n.type==="menubar"&&(V=V??"bottom",D=D??"start");const H=n.type==="context-menu",M=Ht({anchor:Z,floatingRootContext:N,positionMethod:_?"fixed":y,mounted:O,side:V,sideOffset:P,align:D,alignOffset:Y,arrowPadding:H?0:I,collisionBoundary:h,collisionPadding:v,sticky:E,nodeId:S,keepMounted:w,disableAnchorTracking:u,collisionAvoidance:ee,shiftCrossAxis:H,externalTree:R}),z=t.useMemo(()=>{const L={};return f||(L.pointerEvents="none"),{role:"presentation",hidden:!O,style:{...M.positionerStyles,...L}}},[f,O,M.positionerStyles]);t.useEffect(()=>{function L(k){k.open?(k.parentNodeId===S&&s.set("hoverEnabled",!1),k.nodeId!==S&&k.parentNodeId===s.select("floatingParentNodeId")&&s.setOpen(!1,Q(ie))):k.parentNodeId===S&&k.reason!==ie&&s.set("hoverEnabled",!0)}return R.events.on("menuopenchange",L),()=>{R.events.off("menuopenchange",L)}},[s,R.events,S]),t.useEffect(()=>{if(s.select("floatingParentNodeId")==null)return;function L(k){if(k.open||k.nodeId!==s.select("floatingParentNodeId"))return;const de=k.reason??ie;s.setOpen(!1,Q(de))}return R.events.on("menuopenchange",L),()=>{R.events.off("menuopenchange",L)}},[R.events,s]),t.useEffect(()=>{function L(k){!f||k.nodeId!==s.select("floatingParentNodeId")||k.target&&T&&T!==k.target&&s.setOpen(!1,Q(ie))}return R.events.on("itemhover",L),()=>{R.events.off("itemhover",L)}},[R.events,f,T,s]),t.useEffect(()=>{const L={open:f,nodeId:S,parentNodeId:U,reason:s.select("lastOpenChangeReason")};R.events.emit("menuopenchange",L)},[R.events,f,s,S,U]);const W=t.useMemo(()=>({open:f,side:M.side,align:M.align,anchorHidden:M.anchorHidden,nested:n.type==="menu"}),[f,M.side,M.align,M.anchorHidden,n.type]),te=t.useMemo(()=>({side:M.side,align:M.align,arrowRef:M.arrowRef,arrowUncentered:M.arrowUncentered,arrowStyles:M.arrowStyles,nodeId:M.context.nodeId}),[M.side,M.align,M.arrowRef,M.arrowUncentered,M.arrowStyles,M.context.nodeId]),re=B("div",r,{state:W,stateAttributesMapping:fe,ref:[a,s.useStateSetter("positionerElement")],props:[z,c]}),se=O&&n.type!=="menu"&&(n.type!=="menubar"&&j&&q!==ue||n.type==="menubar"&&n.context.modal);let X=null;return n.type==="menubar"?X=n.context.contentElement:n.type===void 0&&(X=T),F.jsxs(Ve.Provider,{value:te,children:[se&&F.jsx(Bt,{ref:n.type==="context-menu"||n.type==="nested-context-menu"?n.context.internalBackdropRef:null,inert:Dt(!f),cutout:X}),F.jsx(bt,{id:S,children:F.jsx(At,{elementsRef:s.context.itemDomElements,labelsRef:s.context.itemLabels,children:re})})]})}),We=t.createContext(void 0);function bn(){const e=t.useContext(We);if(e===void 0)throw new Error($(34));return e}const Bo=t.memo(t.forwardRef(function(r,a){const{render:x,className:y,value:p,defaultValue:g,onValueChange:o,disabled:i=!1,...l}=r,[d,h]=Ge({controlled:p,default:g,name:"MenuRadioGroup"}),v=ce(o),I=ce((c,s)=>{v?.(c,s),!s.isCanceled&&h(c)}),E=t.useMemo(()=>({disabled:i}),[i]),u=B("div",r,{state:E,ref:a,props:{role:"group","aria-disabled":i||void 0,...l}}),b=t.useMemo(()=>({value:d,setValue:I,disabled:i}),[d,I,i]);return F.jsx(We.Provider,{value:b,children:u})})),$e=t.createContext(void 0);function xn(){const e=t.useContext($e);if(e===void 0)throw new Error($(35));return e}const jo=t.forwardRef(function(r,a){const{render:x,className:y,id:p,label:g,nativeButton:o=!1,disabled:i=!1,closeOnClick:l=!1,value:d,...h}=r,v=ge({label:g}),I=oe(!0),E=le(p),{store:u}=K(),b=u.useState("isActive",v.index),c=u.useState("itemProps"),{value:s,setValue:w,disabled:_}=bn(),n=_||i,N=s===d,{getItemProps:R,itemRef:O}=ve({closeOnClick:l,disabled:n,highlighted:b,id:E,store:u,nativeButton:o,nodeId:I?.nodeId,itemMetadata:Se}),f=t.useMemo(()=>({disabled:n,highlighted:b,checked:N}),[n,b,N]),j=ce(q=>{const S={...Q(me,q.nativeEvent),preventUnmountOnClose:()=>{}};w(d,S)}),T=B("div",r,{state:f,stateAttributesMapping:be,props:[c,{role:"menuitemradio","aria-checked":N,onClick:j},h,R],ref:[O,a,v.ref]});return F.jsx($e.Provider,{value:f,children:T})}),Vo=t.forwardRef(function(r,a){const{render:x,className:y,keepMounted:p=!1,...g}=r,o=xn(),i=t.useRef(null),{transitionStatus:l,setMounted:d}=Be(o.checked);Me({open:o.checked,ref:i,onComplete(){o.checked||d(!1)}});const h=t.useMemo(()=>({checked:o.checked,disabled:o.disabled,highlighted:o.highlighted,transitionStatus:l}),[o.checked,o.disabled,o.highlighted,l]);return B("span",r,{state:h,stateAttributesMapping:be,ref:[a,i],props:{"aria-hidden":!0,...g},enabled:p||o.checked})}),Cn=t.createContext(null);function In(e){const r=t.useContext(Cn);if(r===null&&!e)throw new Error($(5));return r}const Rn={...Jt,disabled:A(e=>e.parent.type==="menubar"&&e.parent.context.disabled||e.disabled),modal:A(e=>(e.parent.type===void 0||e.parent.type==="context-menu")&&(e.modal??!0)),allowMouseEnter:A(e=>e.parent.type==="menu"?e.parent.store.select("allowMouseEnter"):e.allowMouseEnter),stickIfOpen:A(e=>e.stickIfOpen),parent:A(e=>e.parent),rootId:A(e=>e.parent.type==="menu"?e.parent.store.select("rootId"):e.parent.type!==void 0?e.parent.context.rootId:e.rootId),activeIndex:A(e=>e.activeIndex),isActive:A((e,r)=>e.activeIndex===r),hoverEnabled:A(e=>e.hoverEnabled),instantType:A(e=>e.instantType),lastOpenChangeReason:A(e=>e.openChangeReason),floatingTreeRoot:A(e=>e.parent.type==="menu"?e.parent.store.select("floatingTreeRoot"):e.floatingTreeRoot),floatingNodeId:A(e=>e.floatingNodeId),floatingParentNodeId:A(e=>e.floatingParentNodeId),itemProps:A(e=>e.itemProps),closeDelay:A(e=>e.closeDelay),keyboardEventRelay:A(e=>{if(e.keyboardEventRelay)return e.keyboardEventRelay;if(e.parent.type==="menu")return e.parent.store.select("keyboardEventRelay")})};class Pe extends xt{constructor(r){super({...Mn(),...r},{positionerRef:t.createRef(),popupRef:t.createRef(),typingRef:{current:!1},itemDomElements:{current:[]},itemLabels:{current:[]},allowMouseUpTriggerRef:{current:!1},triggerFocusTargetRef:t.createRef(),beforeContentFocusGuardRef:t.createRef(),onOpenChangeComplete:void 0,triggerElements:new Ct},Rn),this.observe(A(a=>a.allowMouseEnter),(a,x)=>{this.state.parent.type==="menu"&&a!==x&&this.state.parent.store.set("allowMouseEnter",a)}),this.unsubscribeParentListener=this.observe("parent",a=>{if(this.unsubscribeParentListener?.(),a.type==="menu"){this.unsubscribeParentListener=a.store.subscribe(()=>{this.notifyAll()}),this.context.allowMouseUpTriggerRef=a.store.context.allowMouseUpTriggerRef;return}a.type!==void 0&&(this.context.allowMouseUpTriggerRef=a.context.allowMouseUpTriggerRef),this.unsubscribeParentListener=null})}setOpen(r,a){this.state.floatingRootContext.context.events.emit("setOpen",{open:r,eventDetails:a})}static useStore(r,a){return pt(()=>r??new Pe(a)).current}unsubscribeParentListener=null}function Mn(){return{...Xt(),disabled:!1,modal:!0,allowMouseEnter:!0,stickIfOpen:!0,parent:{type:void 0},rootId:void 0,activeIndex:null,hoverEnabled:!0,instantType:void 0,openChangeReason:null,floatingTreeRoot:new It,floatingNodeId:void 0,floatingParentNodeId:null,itemProps:ft,keyboardEventRelay:void 0,closeDelay:0}}const Je=t.createContext(void 0);function Xe(){return t.useContext(Je)}function Sn(e){const{children:r,open:a,onOpenChange:x,onOpenChangeComplete:y,defaultOpen:p=!1,disabled:g=!1,modal:o,loopFocus:i=!0,orientation:l="vertical",actionsRef:d,closeParentOnEsc:h=!1,handle:v,triggerId:I,defaultTriggerId:E=null,highlightItemOnHover:u=!0}=e,b=he(!0),c=K(!0),s=In(!0),w=Xe(),_=t.useMemo(()=>w&&c?{type:"menu",store:c.store}:s?{type:"menubar",context:s}:b&&!c?{type:"context-menu",context:b}:{type:void 0},[b,c,s,w]),n=Pe.useStore(v?.store,{parent:_}),N=n.useState("floatingTreeRoot"),R=Rt(N),O=Mt();Ie(()=>{b&&!c?n.update({parent:{type:"context-menu",context:b},floatingNodeId:R,floatingParentNodeId:O}):c&&n.update({floatingNodeId:R,floatingParentNodeId:O})},[b,c,R,O,n]),n.useControlledProp("open",a,p),n.useControlledProp("activeTriggerId",I,E),n.useContextCallback("onOpenChangeComplete",y);const f=n.useState("open"),j=n.useState("activeTriggerElement"),T=n.useState("positionerElement"),q=n.useState("hoverEnabled"),S=n.useState("modal"),U=n.useState("disabled"),Z=n.useState("lastOpenChangeReason"),P=n.useState("parent"),Y=n.useState("activeIndex"),J=n.useState("payload"),ee=n.useState("floatingParentNodeId"),V=t.useRef(null),D=ee!=null;let H;n.useSyncedValues({disabled:g,modal:P.type===void 0?o:void 0,rootId:Yt()});const{openMethod:M,triggerProps:z,reset:W}=jt(f);zt(n);const{forceUnmount:te}=Qt(f,n,()=>{n.update({allowMouseEnter:!1,stickIfOpen:!0}),W()}),re=t.useRef(P.type!=="context-menu"),se=qe();t.useEffect(()=>{if(f||(V.current=null),P.type==="context-menu"){if(!f){se.clear(),re.current=!1;return}se.start(500,()=>{re.current=!0})}},[se,f,P.type]),Vt(f&&S&&Z!==ue&&M!=="touch",T),Ie(()=>{!f&&!q&&n.set("hoverEnabled",!0)},[f,q,n]);const X=t.useRef(!0),L=qe(),k=ce((m,C)=>{const G=C.reason;if(f===m&&C.trigger===j||(C.preventUnmountOnClose=()=>{n.set("preventUnmountingOnClose",!0)},!m&&C.trigger==null&&(C.trigger=j??void 0),x?.(m,C),C.isCanceled))return;const ct={open:m,nativeEvent:C.event,reason:C.reason,nested:D};H?.emit("openchange",ct);const pe=C.event;if(m===!1&&pe?.type==="click"&&pe.pointerType==="touch"&&!X.current)return;if(!m&&Y!==null){const ae=n.context.itemDomElements.current[Y];queueMicrotask(()=>{ae?.setAttribute("tabindex","-1")})}m&&G===Fe?(X.current=!1,L.start(300,()=>{X.current=!0})):(X.current=!0,L.clear());const Ae=(G===Tt||G===me)&&pe.detail===0&&pe?.isTrusted,lt=!m&&(G===_t||G==null);function Ne(){const ae={open:m,openChangeReason:G};V.current=C.event??null;const Le=C.trigger?.id??null;(Le||m)&&(ae.activeTriggerId=Le,ae.activeTriggerElement=C.trigger??null),n.update(ae)}G===ue?Kt.flushSync(Ne):Ne(),P.type==="menubar"&&(G===Fe||G===kt||G===ue||G===wt||G===ie)?n.set("instantType","group"):Ae||lt?n.set("instantType",Ae?"click":"dismiss"):n.set("instantType",void 0)}),de=t.useCallback(m=>{const C=Q(m);return C.preventUnmountOnClose=()=>{n.set("preventUnmountingOnClose",!0)},C},[n]),ye=t.useCallback(()=>{n.setOpen(!1,de(Ot))},[n,de]);t.useImperativeHandle(d,()=>({unmount:te,close:ye}),[te,ye]);let xe;P.type==="context-menu"&&(xe=P.context),t.useImperativeHandle(xe?.positionerRef,()=>T,[T]),t.useImperativeHandle(xe?.actionsRef,()=>({setOpen:k}),[k]);const ne=Zt({popupStore:n,onOpenChange:k});H=ne.context.events,t.useEffect(()=>{const m=({open:C,eventDetails:G})=>k(C,G);return H.on("setOpen",m),()=>{H?.off("setOpen",m)}},[H,k]);const ze=tn(ne,{enabled:!U,bubbles:h&&P.type==="menu",outsidePress(){return P.type!=="context-menu"||V.current?.type==="contextmenu"?!0:re.current},externalTree:D?N:void 0}),Qe=nn(ne,{role:"menu"}),Ze=$t(),et=t.useCallback(m=>{n.select("activeIndex")!==m&&n.set("activeIndex",m)},[n]),tt=on(ne,{enabled:!U,listRef:n.context.itemDomElements,activeIndex:Y,nested:P.type!==void 0,loopFocus:i,orientation:l,parentOrientation:P.type==="menubar"?P.context.orientation:void 0,rtl:Ze==="rtl",disabledIndices:mt,onNavigate:et,openOnArrowKeyDown:P.type!=="context-menu",externalTree:D?N:void 0,focusItemOnHover:u}),nt=t.useCallback(m=>{n.context.typingRef.current=m},[n]),ot=rn(ne,{listRef:n.context.itemLabels,activeIndex:Y,resetMs:Pt,onMatch:m=>{f&&m!==Y&&n.set("activeIndex",m)},onTypingChange:nt}),{getReferenceProps:Ee,getFloatingProps:Te,getItemProps:ke,getTriggerProps:we}=je([ze,Qe,tt,ot]),rt=t.useMemo(()=>{const m=Ce(Ee(),{onMouseEnter(){n.set("hoverEnabled",!0)},onMouseMove(){n.set("allowMouseEnter",!0)}},z);return delete m.role,m},[Ee,n,z]),st=t.useMemo(()=>{const m=we();if(!m)return m;const C=Ce(m,z);return delete C.role,delete C["aria-controls"],C},[we,z]),_e=Wt(),at=t.useMemo(()=>Te({onMouseEnter(){P.type==="menu"&&_e.request(()=>n.set("hoverEnabled",!1))},onMouseMove(){n.set("allowMouseEnter",!0)},onClick(){n.select("hoverEnabled")&&n.set("hoverEnabled",!1)},onKeyDown(m){const C=n.select("keyboardEventRelay");C&&!m.isPropagationStopped()&&C(m)}}),[Te,P.type,_e,n]),it=t.useMemo(()=>ke(),[ke]);n.useSyncedValues({floatingRootContext:ne,activeTriggerProps:rt,inactiveTriggerProps:st,popupProps:at,itemProps:it});const ut=t.useMemo(()=>({store:n,parent:_}),[n,_]),Oe=F.jsx(De.Provider,{value:ut,children:typeof r=="function"?r({payload:J}):r});return P.type===void 0||P.type==="context-menu"?F.jsx(St,{externalTree:N,children:Oe}):Oe}function Do(e){const r=K().store,a=t.useMemo(()=>({parentMenu:r}),[r]);return F.jsx(Je.Provider,{value:a,children:F.jsx(Sn,{...e})})}function Pn(e){if(sn(e)&&e.hasAttribute("data-rootownerid"))return e.getAttribute("data-rootownerid")??void 0;if(!an(e))return Pn(un(e))}const Ho=t.forwardRef(function(r,a){const{render:x,className:y,label:p,id:g,nativeButton:o=!1,openOnHover:i=!0,delay:l=100,closeDelay:d=0,disabled:h=!1,...v}=r,I=ge(),E=oe(),{store:u}=K(),b=le(g),c=u.useState("open"),s=u.useState("floatingRootContext"),w=u.useState("floatingTreeRoot"),_=en(b,u),n=t.useCallback(W=>{const te=_(W);return W!==null&&u.select("open")&&u.select("activeTriggerId")==null&&u.update({activeTriggerId:b,activeTriggerElement:W,closeDelay:d}),te},[_,d,u,b]),N=t.useRef(null),R=t.useCallback(W=>{N.current=W,u.set("activeTriggerElement",W)},[u]),O=Xe();if(!O?.parentMenu)throw new Error($(37));u.useSyncedValue("closeDelay",d);const f=O.parentMenu,j=f.useState("itemProps"),T=f.useState("isActive",I.index),q=t.useMemo(()=>({type:"submenu-trigger",setActive:()=>f.set("activeIndex",I.index)}),[f,I.index]),S=u.useState("disabled"),U=h||S,{getItemProps:Z,itemRef:P}=ve({closeOnClick:!1,disabled:U,highlighted:T,id:b,store:u,nativeButton:o,itemMetadata:q,nodeId:E?.nodeId}),Y=u.useState("hoverEnabled"),J=u.useState("allowMouseEnter"),ee=Ut(s,{enabled:Y&&i&&!U&&J,handleClose:ln({blockPointerEvents:!0}),mouseOnly:!0,move:!0,restMs:l,delay:{open:l,close:d},triggerElementRef:N,externalTree:w}),V=dn(s,{enabled:!U,event:"mousedown",toggle:!i,ignoreMouse:i,stickIfOpen:!1}),D=je([V]),H=u.useState("triggerProps",!0);delete H.id;const M=t.useMemo(()=>({disabled:U,highlighted:T,open:c}),[U,T,c]);return B("div",r,{state:M,stateAttributesMapping:yt,props:[D.getReferenceProps(),ee,H,j,{tabIndex:c||T?0:-1,onBlur(){T&&f.set("activeIndex",null)}},v,Z],ref:[a,I.ref,P,n,R]})}),yn="_Backdrop_1832q_1",En="_Positioner_1832q_4",Tn="_Popup_1832q_13",kn="_Arrow_1832q_34",wn="_Content_1832q_38",_n="_ScrollAreaRoot_1832q_44",On="_ScrollAreaViewport_1832q_50",An="_ScrollAreaContent_1832q_55",Nn="_ScrollAreaScrollbar_1832q_59",Ln="_ScrollAreaThumb_1832q_103",Fn="_ScrollAreaCorner_1832q_117",qn="_Item_1832q_122",Un="_ItemLeadingIcon_1832q_168",Gn="_ItemTrailingIcon_1832q_169",Bn="_ItemLabel_1832q_178",jn="_ItemRight_1832q_186",Vn="_ItemShortcut_1832q_194",Dn="_Separator_1832q_224",Hn="_Group_1832q_230",Kn="_GroupLabel_1832q_235",Yn="_RadioGroup_1832q_245",Wn="_OptionItem_1832q_250",$n="_OptionIndicator_1832q_297",Jn="_OptionLabel_1832q_315",Xn="_SubmenuTrigger_1832q_335",Ko={Backdrop:yn,Positioner:En,Popup:Tn,Arrow:kn,Content:wn,ScrollAreaRoot:_n,ScrollAreaViewport:On,ScrollAreaContent:An,ScrollAreaScrollbar:Nn,ScrollAreaThumb:Ln,ScrollAreaCorner:Fn,Item:qn,ItemLeadingIcon:Un,ItemTrailingIcon:Gn,ItemLabel:Bn,ItemRight:jn,ItemShortcut:Vn,Separator:Dn,Group:Hn,GroupLabel:Kn,RadioGroup:Yn,OptionItem:Wn,OptionIndicator:$n,OptionLabel:Jn,SubmenuTrigger:Xn};export{pn as C,De as M,Sn as a,K as b,Uo as c,Do as d,Go as e,Pn as f,qo as g,Fo as h,Ho as i,_o as j,wo as k,No as l,Ko as m,Lo as n,Bo as o,jo as p,Vo as q,Oo as r,Ao as s,Cn as t,he as u,In as v};
