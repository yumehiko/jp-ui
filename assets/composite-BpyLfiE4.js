import{q as N}from"./floating-ui.utils-CtlI5I81.js";import{s as y}from"./event-CNRsvx7q.js";import{c as q,A as z,a as L,b as k}from"./constants-CNjsXAL1.js";function A(r,i,g){return Math.floor(r/i)!==g}function D(r,i){return i<0||i>=r.current.length}function V(r,i){return w(r,{disabledIndices:i})}function J(r,i){return w(r,{decrement:!0,startingIndex:r.current.length,disabledIndices:i})}function w(r,{startingIndex:i=-1,decrement:g=!1,disabledIndices:u,amount:l=1}={}){let t=i;do t+=g?-l:l;while(t>=0&&t<=r.current.length-1&&P(r,t,u));return t}function K(r,{event:i,orientation:g,loopFocus:u,rtl:l,cols:t,disabledIndices:o,minIndex:E,maxIndex:m,prevIndex:n,stopEvent:s=!1}){let f=n;const c=[],R={};let W=!1;{let a=null,h=-1;r.current.forEach((O,e)=>{if(O==null)return;const C=O.closest('[role="row"]');C&&(W=!0),(C!==a||h===-1)&&(a=C,h+=1,c[h]=[]),c[h].push(e),R[e]=h})}const T=W&&c.length>0&&c.some(a=>a.length!==t);function _(a){if(!T||n===-1)return;const h=R[n];if(h==null)return;const O=c[h].indexOf(n);let e=a==="up"?h-1:h+1;u&&(e<0?e=c.length-1:e>=c.length&&(e=0));const C=new Set;for(;e>=0&&e<c.length&&!C.has(e);){C.add(e);const M=c[e];if(M.length===0){e=a==="up"?e-1:e+1;continue}const j=Math.min(O,M.length-1);for(let G=j;G>=0;G-=1){const B=M[G];if(!P(r,B,o))return B}e=a==="up"?e-1:e+1,u&&(e<0?e=c.length-1:e>=c.length&&(e=0))}}if(i.key===q){const a=_("up");if(a!==void 0)s&&y(i),f=a;else{if(s&&y(i),n===-1)f=m;else if(f=w(r,{startingIndex:f,amount:t,decrement:!0,disabledIndices:o}),u&&(n-t<E||f<0)){const h=n%t,O=m%t,e=m-(O-h);O===h?f=m:f=O>h?e:e-t}D(r,f)&&(f=n)}}if(i.key===z){const a=_("down");a!==void 0?(s&&y(i),f=a):(s&&y(i),n===-1?f=E:(f=w(r,{startingIndex:n,amount:t,disabledIndices:o}),u&&n+t>m&&(f=w(r,{startingIndex:n%t-t,amount:t,disabledIndices:o}))),D(r,f)&&(f=n))}if(g==="both"){const a=N(n/t);i.key===(l?L:k)&&(s&&y(i),n%t!==t-1?(f=w(r,{startingIndex:n,disabledIndices:o}),u&&A(f,t,a)&&(f=w(r,{startingIndex:n-n%t-1,disabledIndices:o}))):u&&(f=w(r,{startingIndex:n-n%t-1,disabledIndices:o})),A(f,t,a)&&(f=n)),i.key===(l?k:L)&&(s&&y(i),n%t!==0?(f=w(r,{startingIndex:n,decrement:!0,disabledIndices:o}),u&&A(f,t,a)&&(f=w(r,{startingIndex:n+(t-n%t),decrement:!0,disabledIndices:o}))):u&&(f=w(r,{startingIndex:n+(t-n%t),decrement:!0,disabledIndices:o})),A(f,t,a)&&(f=n));const h=N(m/t)===a;D(r,f)&&(u&&h?f=i.key===(l?k:L)?m:w(r,{startingIndex:n-n%t-1,disabledIndices:o}):f=n)}return f}function Q(r,i,g){const u=[];let l=0;return r.forEach(({width:t,height:o},E)=>{let m=!1;for(g&&(l=0);!m;){const n=[];for(let s=0;s<t;s+=1)for(let f=0;f<o;f+=1)n.push(l+s+f*i);l%i+t<=i&&n.every(s=>u[s]==null)?(n.forEach(s=>{u[s]=E}),m=!0):l+=1}}),[...u]}function X(r,i,g,u,l){if(r===-1)return-1;const t=g.indexOf(r),o=i[r];switch(l){case"tl":return t;case"tr":return o?t+o.width-1:t;case"bl":return o?t+(o.height-1)*u:t;case"br":return g.lastIndexOf(r);default:return-1}}function Y(r,i){return i.flatMap((g,u)=>r.includes(g)?[u]:[])}function P(r,i,g){if(typeof g=="function")return g(i);if(g)return g.includes(i);const u=r.current[i];return u?u.hasAttribute("disabled")||u.getAttribute("aria-disabled")==="true":!1}export{J as a,P as b,Q as c,K as d,X as e,Y as f,V as g,w as h,D as i};
