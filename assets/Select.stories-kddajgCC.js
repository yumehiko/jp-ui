import{j as s}from"./jsx-runtime-u17CrQMm.js";import{r as t}from"./iframe-DCTwtVEg.js";import{c as Qt,I as _e}from"./createReactComponent-BVoNDKa1.js";import{f as ke,E as bt,d as eo,b as ue,c as Pt,a as Vt,u as de,m as be}from"./mergeClassName-CGuaxy8D.js";import{S as to}from"./Separator-BeOlmKtI.js";import{a as je,c as pt,d as oo,f as ft,u as so,e as no,g as ro,b as ct,r as lo,l as ze}from"./Listbox.module-DjVxaMRC.js";import{I as Et}from"./IconCaretDown-F7xRRqTf.js";import{I as io}from"./IconCheck-Dqggjh8y.js";import{v as ao}from"./visuallyHidden-CbwUG2x5.js";import{u as yt}from"./useControlled-C-9u02Ss.js";import{u as Re}from"./useStableCallback-BlvU505D.js";import{u as ht}from"./useValueAsRef-BBKeM-2h.js";import{b as co,u as Nt,a as jt,c as uo,f as po}from"./LabelableContext-Bcab7PGA.js";import{u as fo}from"./useLabelableId-CPEzFwi8.js";import{u as St}from"./useTransitionStatus-BGkF8oIU.js";import{c as N,u as g,S as mo,p as go,t as ho,F as So,D as xo,a as _t}from"./popupStateMapping-D9WKduT9.js";import{c as we,n as Lt,o as vo,h as Io,z as Ro,f as ut}from"./createBaseUIEventDetails-BDhVKG5E.js";import{u as Qe,t as Ht}from"./useOpenChangeComplete-CAiTarFg.js";import{u as wo}from"./useValueChanged-DWOD2Xr9.js";import{u as bo,a as yo,I as To,F as Mo}from"./InternalBackdrop-Dm5KPtnK.js";import{u as Ao,a as Co}from"./useAnchorPositioning-z85Juv3n.js";import{u as Po}from"./useClick-jhZSDhhO.js";import{u as Vo,a as Eo}from"./useInteractions-DGgngZ7b.js";import{u as No}from"./useListNavigation-CQ0tcvfh.js";import{u as jo}from"./useTypeahead-j2PqVkU7.js";import{o as mt}from"./owner-CvMgaIeV.js";import{u as Pe}from"./useTimeout-D67vsree.js";import{g as _o}from"./getPseudoElementBounds-L0mGlMFL.js";import{u as Ot}from"./useButton-BBNhskDs.js";import{b as Lo,c as Tt}from"./element-C8qsRkBu.js";import{i as Ho}from"./inertValue-B7yfhbfC.js";import{C as Oo,u as Do,I as Uo}from"./useCompositeListItem-DQGumxn-.js";import{r as Fo}from"./index-zOVaSaDz.js";import{c as Bo}from"./detectBrowser-CYw91I8L.js";import{u as ko}from"./useAnimationFrame-DjvyS4jC.js";import{s as gt}from"./styles-CrCElcc7.js";import{u as zo}from"./ToolbarRootContext-BBYdvADq.js";import{C as $o}from"./composite-CJk-2jGs.js";import{g as qo}from"./getDisabledMountTransitionStyles-CjB8mk2n.js";import{b as Mt}from"./floating-ui.utils.dom-CWuwp5es.js";import{u as Wo}from"./useBaseUiId-DBEJHERS.js";import{I as Dt}from"./IconCircleFilled-BgMiFUXw.js";import"./preload-helper-ClwkVg-s.js";import"./useRender-BavQ6iTs.js";import"./useId-DhseFPV0.js";import"./event-CNRsvx7q.js";import"./floating-ui.utils-CtlI5I81.js";import"./DirectionContext-gps4P05p.js";import"./constants-CNjsXAL1.js";import"./composite-BpyLfiE4.js";import"./useOnMount-CchHJru6.js";import"./index-DT-vH3A5.js";const Go=[["path",{d:"M18 14l-6 -6l-6 6h12",key:"svg-0"}]],Yo=Qt("outline","caret-up","CaretUp",Go),Ut=t.createContext(null),Ft=t.createContext(null);function ge(){const e=t.useContext(Ut);if(e===null)throw new Error(ke(60));return e}function Bt(){const e=t.useContext(Ft);if(e===null)throw new Error(ke(61));return e}const f={id:N(e=>e.id),modal:N(e=>e.modal),multiple:N(e=>e.multiple),items:N(e=>e.items),itemToStringLabel:N(e=>e.itemToStringLabel),itemToStringValue:N(e=>e.itemToStringValue),isItemEqualToValue:N(e=>e.isItemEqualToValue),value:N(e=>e.value),open:N(e=>e.open),mounted:N(e=>e.mounted),forceMount:N(e=>e.forceMount),transitionStatus:N(e=>e.transitionStatus),openMethod:N(e=>e.openMethod),activeIndex:N(e=>e.activeIndex),selectedIndex:N(e=>e.selectedIndex),isActive:N((e,o)=>e.activeIndex===o),isSelected:N((e,o,n)=>{const r=e.isItemEqualToValue,V=e.value;return e.multiple?Array.isArray(V)&&V.some(i=>pt(i,n,r)):e.selectedIndex===o&&e.selectedIndex!==null?!0:pt(V,n,r)}),isSelectedByFocus:N((e,o)=>e.selectedIndex===o),popupProps:N(e=>e.popupProps),triggerProps:N(e=>e.triggerProps),triggerElement:N(e=>e.triggerElement),positionerElement:N(e=>e.positionerElement),listElement:N(e=>e.listElement),scrollUpArrowVisible:N(e=>e.scrollUpArrowVisible),scrollDownArrowVisible:N(e=>e.scrollDownArrowVisible),hasScrollArrows:N(e=>e.hasScrollArrows),serializedValue:N(e=>{const{multiple:o,value:n,itemToStringValue:r}=e;return o&&Array.isArray(n)&&n.length===0?"":je(n,r)})};function Ko(e){const{id:o,value:n,defaultValue:r=null,onValueChange:V,open:i,defaultOpen:d=!1,onOpenChange:l,name:h,disabled:I=!1,readOnly:R=!1,required:y=!1,modal:v=!0,actionsRef:$,inputRef:E,onOpenChangeComplete:k,items:z,multiple:T=!1,itemToStringLabel:j,itemToStringValue:c,isItemEqualToValue:D=oo,highlightItemOnHover:ee=!0,children:oe}=e,{clearErrors:L}=co(),{setDirty:_,shouldValidateOnChange:ae,validityData:Y,setFilled:M,name:J,disabled:q,validation:u}=Nt(),{controlId:a}=jt(),P=fo({id:o}),U=q||I,w=J??h,[p,H]=yt({controlled:n,default:T?r??bt:r,name:"Select",state:"value"}),[A,K]=yt({controlled:i,default:d,name:"Select",state:"open"}),C=t.useRef([]),W=t.useRef([]),G=t.useRef(null),m=t.useRef(null),S=t.useRef(0),F=t.useRef(null),B=t.useRef([]),ne=t.useRef(!1),ce=t.useRef(!1),re=t.useRef(null),le=t.useRef({allowSelectedMouseUp:!1,allowUnselectedMouseUp:!1}),ye=t.useRef(!1),{mounted:ie,setMounted:O,transitionStatus:pe}=St(A),{openMethod:he,triggerProps:X,reset:Z}=bo(A),x=eo(()=>new mo({id:P,modal:v,multiple:T,itemToStringLabel:j,itemToStringValue:c,isItemEqualToValue:D,value:p,open:A,mounted:ie,transitionStatus:pe,items:z,forceMount:!1,openMethod:null,activeIndex:null,selectedIndex:null,popupProps:{},triggerProps:{},triggerElement:null,positionerElement:null,listElement:null,scrollUpArrowVisible:!1,scrollDownArrowVisible:!1,hasScrollArrows:!1})).current,fe=g(x,f.activeIndex),Se=g(x,f.selectedIndex),xe=g(x,f.triggerElement),se=g(x,f.positionerElement),Le=t.useMemo(()=>T&&Array.isArray(p)&&p.length===0?"":je(p,c),[T,p,c]),nt=t.useMemo(()=>T&&Array.isArray(p)?p.map(b=>je(b,c)):je(p,c),[T,p,c]),$e=ht(x.state.triggerElement);uo({id:P,commit:u.commit,value:p,controlRef:$e,name:w,getValue:()=>nt});const He=t.useRef(p);ue(()=>{p!==He.current&&x.set("forceMount",!0)},[x,p]),ue(()=>{M(p!==null)},[p,M]),ue(function(){if(A)return;const Q=B.current;if(T){const Ae=Array.isArray(p)?p:[];if(Ae.length===0){x.set("selectedIndex",null);return}const Ie=Ae[Ae.length-1],Ge=ft(Q,Ie,D);x.set("selectedIndex",Ge===-1?null:Ge);return}const Me=ft(Q,p,D);x.set("selectedIndex",Me===-1?null:Me)},[T,A,p,B,D,x]),wo(p,()=>{L(w),_(p!==Y.initialValue),ae()?u.commit(p):u.commit(p,!0)});const Ve=Re((b,Q)=>{if(l?.(b,Q),!Q.isCanceled&&(K(b),!b&&x.state.activeIndex!==null)){const Me=C.current[x.state.activeIndex];queueMicrotask(()=>{Me?.setAttribute("tabindex","-1")})}}),Ee=Re(()=>{O(!1),x.set("activeIndex",null),Z(),k?.(!1)});Qe({enabled:!$,open:A,ref:G,onComplete(){A||Ee()}}),t.useImperativeHandle($,()=>({unmount:Ee}),[Ee]);const Te=Re((b,Q)=>{V?.(b,Q),!Q.isCanceled&&H(b)}),me=Re(()=>{const b=x.state.listElement||G.current;if(!b)return;const Q=b.scrollTop,Me=b.scrollTop+b.clientHeight,Ae=Q>1,Ie=Me<b.scrollHeight-1;x.state.scrollUpArrowVisible!==Ae&&x.set("scrollUpArrowVisible",Ae),x.state.scrollDownArrowVisible!==Ie&&x.set("scrollDownArrowVisible",Ie)}),ve=Ao({open:A,onOpenChange:Ve,elements:{reference:xe,floating:se}}),Oe=Po(ve,{enabled:!R&&!U,event:"mousedown"}),qe=Vo(ve,{bubbles:!1}),rt=No(ve,{enabled:!R&&!U,listRef:C,activeIndex:fe,selectedIndex:Se,disabledIndices:bt,onNavigate(b){b===null&&!A||x.set("activeIndex",b)},focusItemOnHover:!1}),lt=jo(ve,{enabled:!R&&!U&&(A||!T),listRef:W,activeIndex:fe,selectedIndex:Se,onMatch(b){A?x.set("activeIndex",b):Te(B.current[b],we("none"))},onTypingChange(b){ne.current=b}}),{getReferenceProps:De,getFloatingProps:Ne,getItemProps:We}=Eo([Oe,qe,rt,lt]),Ue=t.useMemo(()=>Pt(De(),X),[De,X]);so(()=>{x.update({popupProps:Ne(),triggerProps:Ue})}),ue(()=>{x.update({id:P,modal:v,multiple:T,value:p,open:A,mounted:ie,transitionStatus:pe,popupProps:Ne(),triggerProps:Ue,items:z,itemToStringLabel:j,itemToStringValue:c,isItemEqualToValue:D,openMethod:he})},[x,P,v,T,p,A,ie,pe,Ne,Ue,z,j,c,D,he]);const Ce=t.useMemo(()=>({store:x,name:w,required:y,disabled:U,readOnly:R,multiple:T,itemToStringLabel:j,itemToStringValue:c,highlightItemOnHover:ee,setValue:Te,setOpen:Ve,listRef:C,popupRef:G,scrollHandlerRef:m,handleScrollArrowVisibility:me,scrollArrowsMountedCountRef:S,getItemProps:We,events:ve.context.events,valueRef:F,valuesRef:B,labelsRef:W,typingRef:ne,selectionRef:le,selectedItemTextRef:re,validation:u,onOpenChangeComplete:k,keyboardActiveRef:ce,alignItemWithTriggerActiveRef:ye,initialValueRef:He}),[x,w,y,U,R,T,j,c,ee,Te,Ve,We,ve.context.events,u,k,me]),Fe=Vt(E,u.inputRef),it=T&&Array.isArray(p)&&p.length>0,at=t.useMemo(()=>!T||!Array.isArray(p)||!w?null:p.map(b=>{const Q=je(b,c);return s.jsx("input",{type:"hidden",name:w,value:Q},Q)}),[T,p,w,c]);return s.jsx(Ut.Provider,{value:Ce,children:s.jsxs(Ft.Provider,{value:ve,children:[oe,s.jsx("input",{...u.getInputValidationProps({onFocus(){x.state.triggerElement?.focus()},onChange(b){if(b.nativeEvent.defaultPrevented)return;const Q=b.target.value,Me=we(Lt,b.nativeEvent);function Ae(){if(T)return;const Ie=B.current.find(Ge=>je(Ge,c).toLowerCase()===Q.toLowerCase());Ie!=null&&(_(Ie!==Y.initialValue),Te(Ie,Me),ae()&&u.commit(Ie))}x.set("forceMount",!0),queueMicrotask(Ae)}}),id:o||a||void 0,name:T?void 0:w,value:Le,disabled:U,required:y&&!it,readOnly:R,ref:Fe,style:ao,tabIndex:-1,"aria-hidden":!0}),at]})})}const Ye=2,Xo={...go,...po,value:()=>null},Zo=t.forwardRef(function(o,n){const{render:r,className:V,disabled:i=!1,nativeButton:d=!0,...l}=o,{setTouched:h,setFocused:I,validationMode:R,state:y,disabled:v}=Nt(),{labelId:$}=jt(),{store:E,setOpen:k,selectionRef:z,validation:T,readOnly:j,alignItemWithTriggerActiveRef:c,disabled:D,keyboardActiveRef:ee}=ge(),oe=v||D||i,L=g(E,f.open),_=g(E,f.value),ae=g(E,f.triggerProps),Y=g(E,f.positionerElement),M=g(E,f.listElement),J=g(E,f.serializedValue),q=ht(Y),u=t.useRef(null),a=Pe(),P=Pe(),{getButtonProps:U,buttonRef:w}=Ot({disabled:oe,native:d}),p=Re(m=>{E.set("triggerElement",m)}),H=Vt(n,u,w,p),A=Pe(),K=Pe();t.useEffect(()=>{if(L)return K.start(200,()=>{z.current.allowUnselectedMouseUp=!0,A.start(200,()=>{z.current.allowSelectedMouseUp=!0})}),()=>{A.clear(),K.clear()};z.current={allowSelectedMouseUp:!1,allowUnselectedMouseUp:!1},P.clear()},[L,z,P,A,K]);const C=t.useMemo(()=>M?.id??Lo(Y)?.id,[M,Y]),W=Pt(ae,{role:"combobox","aria-expanded":L?"true":"false","aria-haspopup":"listbox","aria-controls":L?C:void 0,"aria-labelledby":$,"aria-readonly":j||void 0,tabIndex:oe?-1:0,ref:H,onFocus(m){I(!0),L&&c.current&&k(!1,we(vo,m.nativeEvent)),a.start(0,()=>{E.set("forceMount",!0)})},onBlur(){h(!0),I(!1),R==="onBlur"&&T.commit(_)},onPointerMove(){ee.current=!1},onKeyDown(){ee.current=!0},onMouseDown(m){if(L)return;const S=mt(m.currentTarget);function F(B){if(!u.current)return;const ne=B.target;if(Tt(u.current,ne)||Tt(q.current,ne)||ne===u.current)return;const ce=_o(u.current);B.clientX>=ce.left-Ye&&B.clientX<=ce.right+Ye&&B.clientY>=ce.top-Ye&&B.clientY<=ce.bottom+Ye||k(!1,we(Io,B))}P.start(0,()=>{S.addEventListener("mouseup",F,{once:!0})})}},T.getValidationProps,l,U);W.role="combobox";const G=t.useMemo(()=>({...y,open:L,disabled:oe,value:_,readOnly:j,placeholder:!J}),[y,L,oe,_,j,J]);return de("button",o,{ref:[n,u],state:G,stateAttributesMapping:Xo,props:W})}),Jo={value:()=>null},kt=t.forwardRef(function(o,n){const{className:r,render:V,children:i,...d}=o,{store:l,valueRef:h}=ge(),I=g(l,f.value),R=g(l,f.items),y=g(l,f.itemToStringLabel),v=g(l,f.serializedValue),$=t.useMemo(()=>({value:I,placeholder:!v}),[I,v]),E=typeof i=="function"?i(I):i??(Array.isArray(I)?no(I,y):ro(I,R,y));return de("span",o,{state:$,ref:[n,h],props:[{children:E},d],stateAttributesMapping:Jo})}),Qo=t.forwardRef(function(o,n){const{className:r,render:V,...i}=o,{store:d}=ge(),l=g(d,f.open),h=t.useMemo(()=>({open:l}),[l]);return de("span",o,{state:h,ref:n,props:[{"aria-hidden":!0,children:"▼"},i],stateAttributesMapping:ho})}),es=t.createContext(void 0),ts=t.forwardRef(function(o,n){const{store:r}=ge(),V=g(r,f.mounted),i=g(r,f.forceMount);return V||i?s.jsx(es.Provider,{value:!0,children:s.jsx(So,{ref:n,...o})}):null}),zt=t.createContext(void 0);function xt(){const e=t.useContext(zt);if(!e)throw new Error(ke(59));return e}function Ze(e,o){e&&Object.assign(e.style,o)}const $t={position:"relative",maxHeight:"100%",overflowX:"hidden",overflowY:"auto"},os={position:"fixed"},ss=t.forwardRef(function(o,n){const{anchor:r,positionMethod:V="absolute",className:i,render:d,side:l="bottom",align:h="center",sideOffset:I=0,alignOffset:R=0,collisionBoundary:y="clipping-ancestors",collisionPadding:v,arrowPadding:$=5,sticky:E=!1,disableAnchorTracking:k,alignItemWithTrigger:z=!0,collisionAvoidance:T=xo,...j}=o,{store:c,listRef:D,labelsRef:ee,alignItemWithTriggerActiveRef:oe,selectedItemTextRef:L,valuesRef:_,initialValueRef:ae,popupRef:Y,setValue:M}=ge(),J=Bt(),q=g(c,f.open),u=g(c,f.mounted),a=g(c,f.modal),P=g(c,f.value),U=g(c,f.openMethod),w=g(c,f.positionerElement),p=g(c,f.triggerElement),H=g(c,f.isItemEqualToValue),A=t.useRef(null),K=t.useRef(null),[C,W]=t.useState(z),G=u&&C&&U!=="touch";!u&&C!==z&&W(z),ue(()=>{u||(f.scrollUpArrowVisible(c.state)&&c.set("scrollUpArrowVisible",!1),f.scrollDownArrowVisible(c.state)&&c.set("scrollDownArrowVisible",!1))},[c,u]),t.useImperativeHandle(oe,()=>G),yo((G||a)&&q&&U!=="touch",p);const m=Co({anchor:r,floatingRootContext:J,positionMethod:V,mounted:u,side:l,sideOffset:I,align:h,alignOffset:R,arrowPadding:$,collisionBoundary:y,collisionPadding:v,sticky:E,disableAnchorTracking:k??G,collisionAvoidance:T,keepMounted:!0}),S=G?"none":m.side,F=G?os:m.positionerStyles,B=t.useMemo(()=>{const O={};return q||(O.pointerEvents="none"),{role:"presentation",hidden:!u,style:{...F,...O}}},[q,u,F]),ne=t.useMemo(()=>({open:q,side:S,align:m.align,anchorHidden:m.anchorHidden}),[q,S,m.align,m.anchorHidden]),ce=Re(O=>{c.set("positionerElement",O)}),re=de("div",o,{ref:[n,ce],state:ne,stateAttributesMapping:_t,props:[B,j]}),le=t.useRef(0),ye=Re(O=>{if(O.size===0&&le.current===0||_.current.length===0)return;const pe=le.current;if(le.current=O.size,O.size===pe)return;const he=we(Lt);if(pe!==0&&!c.state.multiple&&P!==null&&ft(_.current,P,H)===-1){const Z=ae.current,fe=Z!=null&&ct(_.current,Z,H)?Z:null;M(fe,he),fe===null&&(c.set("selectedIndex",null),L.current=null)}if(pe!==0&&c.state.multiple&&Array.isArray(P)){const X=P.filter(Z=>ct(_.current,Z,H));(X.length!==P.length||X.some(Z=>!ct(P,Z,H)))&&(M(X,he),X.length===0&&(c.set("selectedIndex",null),L.current=null))}if(q&&G){c.update({scrollUpArrowVisible:!1,scrollDownArrowVisible:!1});const X={height:""};Ze(w,X),Ze(Y.current,X)}}),ie=t.useMemo(()=>({...m,side:S,alignItemWithTriggerActive:G,setControlledAlignItemWithTrigger:W,scrollUpArrowRef:A,scrollDownArrowRef:K}),[m,S,G,W]);return s.jsx(Oo,{elementsRef:D,labelsRef:ee,onMapChange:ye,children:s.jsxs(zt.Provider,{value:ie,children:[u&&a&&s.jsx(To,{inert:Ho(!q),cutout:p}),re]})})});function qt(e){const o=e.currentTarget.getBoundingClientRect();return o.top+1<=e.clientY&&e.clientY<=o.bottom-1&&o.left+1<=e.clientX&&e.clientX<=o.right-1}const ns={..._t,...Ht},rs=t.forwardRef(function(o,n){const{render:r,className:V,...i}=o,{store:d,popupRef:l,onOpenChangeComplete:h,setOpen:I,valueRef:R,selectedItemTextRef:y,keyboardActiveRef:v,multiple:$,handleScrollArrowVisibility:E,scrollHandlerRef:k}=ge(),{side:z,align:T,alignItemWithTriggerActive:j,setControlledAlignItemWithTrigger:c,scrollDownArrowRef:D,scrollUpArrowRef:ee}=xt(),oe=zo(!0)!=null,L=Bt(),_=Pe(),ae=g(d,f.id),Y=g(d,f.open),M=g(d,f.mounted),J=g(d,f.popupProps),q=g(d,f.transitionStatus),u=g(d,f.triggerElement),a=g(d,f.positionerElement),P=g(d,f.listElement),U=t.useRef(0),w=t.useRef(!1),p=t.useRef(0),H=t.useRef(!1),A=t.useRef({}),K=ko(),C=Re(S=>{if(!a||!l.current||!H.current)return;if(w.current||!j){E();return}const F=a.style.top==="0px",B=a.style.bottom==="0px",ne=a.getBoundingClientRect().height,ce=mt(a),re=getComputedStyle(a),le=parseFloat(re.marginTop),ye=parseFloat(re.marginBottom),ie=ce.documentElement.clientHeight-le-ye,O=S.scrollTop,pe=S.scrollHeight,he=S.clientHeight,X=pe-he;let Z=null,x=null,fe=!1;if(F){const Se=X-O,xe=ne+Se,se=Math.min(xe,ie);Z=se,se!==ie?x=X:fe=!0}else if(B){const Se=O-0,xe=ne+Se,se=Math.min(xe,ie),Le=xe-ie;Z=se,se!==ie?x=0:(fe=!0,O<X&&(x=O-(Se-Le)))}Z!=null&&(a.style.height=`${Z}px`),x!=null&&(S.scrollTop=x),fe&&(w.current=!0),E()});t.useImperativeHandle(k,()=>C,[C]),Qe({open:Y,ref:l,onComplete(){Y&&h?.(!0)}});const W=t.useMemo(()=>({open:Y,transitionStatus:q,side:z,align:T}),[Y,q,z,T]);ue(()=>{!a||!l.current||Object.keys(A.current).length||(A.current={top:a.style.top||"0",left:a.style.left||"0",right:a.style.right,height:a.style.height,bottom:a.style.bottom,minHeight:a.style.minHeight,maxHeight:a.style.maxHeight,marginTop:a.style.marginTop,marginBottom:a.style.marginBottom})},[l,a]),ue(()=>{M||j||(H.current=!1,w.current=!1,U.current=0,p.current=0,Ze(a,A.current))},[M,j,a,l]),ue(()=>{const S=l.current;if(!(!M||!u||!a||!S)){if(!j){H.current=!0,K.request(E);return}queueMicrotask(()=>{const F=getComputedStyle(a),B=getComputedStyle(S),ne=mt(u),ce=Mt(a),re=u.getBoundingClientRect(),le=a.getBoundingClientRect(),ye=re.left,ie=re.height,O=P||S,pe=O.scrollHeight,he=parseFloat(B.borderBottomWidth),X=parseFloat(F.marginTop)||10,Z=parseFloat(F.marginBottom)||10,x=parseFloat(F.minHeight)||100,fe=5,Se=5,xe=20,se=ne.documentElement.clientHeight-X-Z,Le=ne.documentElement.clientWidth,nt=se-re.bottom+ie,$e=y.current,He=R.current;let Ve=0,Ee=0;if($e&&He){const Ce=He.getBoundingClientRect(),Fe=$e.getBoundingClientRect(),it=Ce.left-ye,at=Fe.left-le.left,b=Ce.top-re.top+Ce.height/2,Q=Fe.top-le.top+Fe.height/2;Ve=it-at,Ee=Q-b}const Te=nt+Ee+Z+he;let me=Math.min(se,Te);const ve=se-X-Z,Oe=Te-me,qe=Math.max(fe,ye+Ve),rt=Le-Se,lt=Math.max(0,qe+le.width-rt);a.style.left=`${qe-lt}px`,a.style.height=`${me}px`,a.style.maxHeight="auto",a.style.marginTop=`${X}px`,a.style.marginBottom=`${Z}px`,S.style.height="100%";const De=O.scrollHeight-O.clientHeight,Ne=Oe>=De;Ne&&(me=Math.min(se,le.height)-(Oe-De));const We=re.top<xe||re.bottom>se-xe||me<Math.min(pe,x),Ue=(ce.visualViewport?.scale??1)!==1&&Bo;if(We||Ue){H.current=!0,Ze(a,A.current),Fo.flushSync(()=>c(!1));return}if(Ne){const Ce=Math.max(0,se-Te);a.style.top=le.height>=ve?"0":`${Ce}px`,a.style.height=`${me}px`,O.scrollTop=O.scrollHeight-O.clientHeight,U.current=Math.max(x,me)}else a.style.bottom="0",U.current=Math.max(x,me),O.scrollTop=Oe;U.current===se&&(w.current=!0),E(),setTimeout(()=>{H.current=!0})})}},[d,M,a,u,R,y,l,E,j,c,K,D,ee,P]),t.useEffect(()=>{if(!j||!a||!M)return;const S=Mt(a);function F(B){I(!1,we(Ro,B))}return S.addEventListener("resize",F),()=>{S.removeEventListener("resize",F)}},[I,j,a,M]);const G={...P?{role:"presentation","aria-orientation":void 0}:{role:"listbox","aria-multiselectable":$||void 0,id:`${ae}-list`},onKeyDown(S){v.current=!0,oe&&$o.has(S.key)&&S.stopPropagation()},onMouseMove(){v.current=!1},onPointerLeave(S){if(qt(S)||S.pointerType==="touch")return;const F=S.currentTarget;_.start(0,()=>{d.set("activeIndex",null),F.focus({preventScroll:!0})})},onScroll(S){P||k.current?.(S.currentTarget)},...j&&{style:P?{height:"100%"}:$t}},m=de("div",o,{ref:[n,l],state:W,stateAttributesMapping:ns,props:[J,G,qo(q),{className:!P&&j?gt.className:void 0},i]});return s.jsxs(t.Fragment,{children:[gt.element,s.jsx(Mo,{context:L,modal:!1,disabled:!M,restoreFocus:!0,children:m})]})}),ls=t.forwardRef(function(o,n){const{className:r,render:V,...i}=o,{store:d,scrollHandlerRef:l}=ge(),{alignItemWithTriggerActive:h}=xt(),I=g(d,f.hasScrollArrows),R=g(d,f.openMethod),y=g(d,f.multiple),$={id:`${g(d,f.id)}-list`,role:"listbox","aria-multiselectable":y||void 0,onScroll(k){l.current?.(k.currentTarget)},...h&&{style:$t},className:I&&R!=="touch"?gt.className:void 0},E=Re(k=>{d.set("listElement",k)});return de("div",o,{ref:[n,E],props:[$,i]})}),Wt=t.createContext(void 0);function vt(){const e=t.useContext(Wt);if(!e)throw new Error(ke(57));return e}const is=t.memo(t.forwardRef(function(o,n){const{render:r,className:V,value:i=null,label:d,disabled:l=!1,nativeButton:h=!1,...I}=o,R=t.useRef(null),y=Do({label:d,textRef:R,indexGuessBehavior:Uo.GuessFromOrder}),{store:v,getItemProps:$,setOpen:E,setValue:k,selectionRef:z,typingRef:T,valuesRef:j,keyboardActiveRef:c,multiple:D,highlightItemOnHover:ee}=ge(),oe=Pe(),L=g(v,f.isActive,y.index),_=g(v,f.isSelected,y.index,i),ae=g(v,f.isSelectedByFocus,y.index),Y=g(v,f.isItemEqualToValue),M=y.index,J=M!==-1,q=t.useRef(null),u=ht(M);ue(()=>{if(!J)return;const m=j.current;return m[M]=i,()=>{delete m[M]}},[J,M,i,j]),ue(()=>{if(!J)return;const m=v.state.value;let S=m;D&&Array.isArray(m)&&m.length>0&&(S=m[m.length-1]),S!==void 0&&pt(S,i,Y)&&v.set("selectedIndex",M)},[J,M,D,Y,v,i]);const a=t.useMemo(()=>({disabled:l,selected:_,highlighted:L}),[l,_,L]),P=$({active:L,selected:_});P.onFocus=void 0,P.id=void 0;const U=t.useRef(null),w=t.useRef("mouse"),p=t.useRef(!1),{getButtonProps:H,buttonRef:A}=Ot({disabled:l,focusableWhenDisabled:!0,native:h});function K(m){const S=v.state.value;if(D){const F=Array.isArray(S)?S:[],B=_?lo(F,i,Y):[...F,i];k(B,we(ut,m))}else k(i,we(ut,m)),E(!1,we(ut,m))}const C={role:"option","aria-selected":_,"aria-disabled":l||void 0,tabIndex:L?0:-1,onFocus(){v.set("activeIndex",M)},onMouseEnter(){!c.current&&v.state.selectedIndex===null&&v.set("activeIndex",M)},onMouseMove(){ee&&v.set("activeIndex",M)},onMouseLeave(m){!ee||c.current||qt(m)||oe.start(0,()=>{v.state.activeIndex===M&&v.set("activeIndex",null)})},onTouchStart(){z.current={allowSelectedMouseUp:!1,allowUnselectedMouseUp:!1}},onKeyDown(m){U.current=m.key,v.set("activeIndex",M)},onClick(m){p.current=!1,!(m.type==="keydown"&&U.current===null)&&(l||U.current===" "&&T.current||w.current!=="touch"&&!L||(U.current=null,K(m.nativeEvent)))},onPointerEnter(m){w.current=m.pointerType},onPointerDown(m){w.current=m.pointerType,p.current=!0},onMouseUp(m){if(l)return;if(p.current){p.current=!1;return}const S=!z.current.allowSelectedMouseUp&&_,F=!z.current.allowUnselectedMouseUp&&!_;S||F||w.current!=="touch"&&!L||K(m.nativeEvent)}},W=de("div",o,{ref:[A,n,y.ref,q],state:a,props:[P,C,I,H]}),G=t.useMemo(()=>({selected:_,indexRef:u,textRef:R,selectedByFocus:ae,hasRegistered:J}),[_,u,R,ae,J]);return s.jsx(Wt.Provider,{value:G,children:W})})),as=t.forwardRef(function(o,n){const r=o.keepMounted??!1,{selected:V}=vt();return r||V?s.jsx(cs,{...o,ref:n}):null}),cs=t.memo(t.forwardRef((e,o)=>{const{render:n,className:r,keepMounted:V,...i}=e,{selected:d}=vt(),l=t.useRef(null),{transitionStatus:h,setMounted:I}=St(d),R=t.useMemo(()=>({selected:d,transitionStatus:h}),[d,h]),y=de("span",e,{ref:[o,l],state:R,props:[{"aria-hidden":!0,children:"✔️"},i],stateAttributesMapping:Ht});return Qe({open:d,ref:l,onComplete(){d||I(!1)}}),y})),us=t.memo(t.forwardRef(function(o,n){const{indexRef:r,textRef:V,selectedByFocus:i,hasRegistered:d}=vt(),{selectedItemTextRef:l}=ge(),{className:h,render:I,...R}=o,y=t.useCallback($=>{if(!$||!d)return;const E=l.current===null||!l.current.isConnected;(i||E&&r.current===0)&&(l.current=$)},[l,r,i,d]);return de("div",o,{ref:[y,n,V],props:R})})),Gt=t.forwardRef(function(o,n){const{render:r,className:V,direction:i,keepMounted:d=!1,...l}=o,{store:h,popupRef:I,listRef:R,handleScrollArrowVisibility:y,scrollArrowsMountedCountRef:v}=ge(),{side:$,scrollDownArrowRef:E,scrollUpArrowRef:k}=xt(),z=i==="up"?f.scrollUpArrowVisible:f.scrollDownArrowVisible,T=g(h,z),j=g(h,f.openMethod),c=T&&j!=="touch",D=Pe(),ee=i==="up"?k:E,{transitionStatus:oe,setMounted:L}=St(c);ue(()=>(v.current+=1,h.state.hasScrollArrows||h.set("hasScrollArrows",!0),()=>{v.current=Math.max(0,v.current-1),v.current===0&&h.state.hasScrollArrows&&h.set("hasScrollArrows",!1)}),[h,v]),Qe({open:c,ref:ee,onComplete(){c||L(!1)}});const _=t.useMemo(()=>({direction:i,visible:c,side:$,transitionStatus:oe}),[i,c,$,oe]),Y=de("div",o,{ref:[n,ee],state:_,props:[{"aria-hidden":!0,children:i==="up"?"▲":"▼",style:{position:"absolute"},onMouseMove(J){if(J.movementX===0&&J.movementY===0||D.isStarted())return;h.set("activeIndex",null);function q(){const u=h.state.listElement??I.current;if(!u)return;h.set("activeIndex",null),y();const a=u.scrollTop===0,P=Math.round(u.scrollTop+u.clientHeight)>=u.scrollHeight;if(R.current.length===0&&(i==="up"?h.set("scrollUpArrowVisible",!a):h.set("scrollDownArrowVisible",!P)),i==="up"&&a||i==="down"&&P){D.clear();return}if((h.state.listElement||I.current)&&R.current&&R.current.length>0){const w=R.current,p=ee.current?.offsetHeight||0;if(i==="up"){let H=0;const A=u.scrollTop+p;for(let C=0;C<w.length;C+=1){const W=w[C];if(W&&W.offsetTop>=A){H=C;break}}const K=Math.max(0,H-1);if(K<H){const C=w[K];C&&(u.scrollTop=Math.max(0,C.offsetTop-p))}else u.scrollTop=0}else{let H=w.length-1;const A=u.scrollTop+u.clientHeight-p;for(let C=0;C<w.length;C+=1){const W=w[C];if(W&&W.offsetTop+W.offsetHeight>A){H=Math.max(0,C-1);break}}const K=Math.min(w.length-1,H+1);if(K>H){const C=w[K];C&&(u.scrollTop=C.offsetTop+C.offsetHeight-u.clientHeight+p)}else u.scrollTop=u.scrollHeight-u.clientHeight}}D.start(40,q)}D.start(40,q)},onMouseLeave(){D.clear()}},l]});return c||d?Y:null}),ds=t.forwardRef(function(o,n){return s.jsx(Gt,{...o,ref:n,direction:"down"})}),ps=t.forwardRef(function(o,n){return s.jsx(Gt,{...o,ref:n,direction:"up"})}),Yt=t.createContext(void 0);function fs(){const e=t.useContext(Yt);if(e===void 0)throw new Error(ke(56));return e}const ms=t.forwardRef(function(o,n){const{className:r,render:V,...i}=o,[d,l]=t.useState(),h=t.useMemo(()=>({labelId:d,setLabelId:l}),[d,l]),I=de("div",o,{ref:n,props:[{role:"group","aria-labelledby":d},i]});return s.jsx(Yt.Provider,{value:h,children:I})}),gs=t.forwardRef(function(o,n){const{className:r,render:V,id:i,...d}=o,{setLabelId:l}=fs(),h=Wo(i);return ue(()=>{l(h)},[h,l]),de("div",o,{ref:n,props:[{id:h},d]})}),hs="_Separator_16qob_1",Ss={Separator:hs},It=t.forwardRef(({className:e,style:o="solid",...n},r)=>s.jsx(to,{ref:r,className:be(e,Ss.Separator),"data-style":o,...n}));It.displayName="Separator";It.__docgenInfo={description:"",methods:[],displayName:"Separator",props:{style:{required:!1,tsType:{name:"union",raw:"'solid' | 'dashed'",elements:[{name:"literal",value:"'solid'"},{name:"literal",value:"'dashed'"}]},description:"",defaultValue:{value:"'solid'",computed:!1}}}};const xs="_SelectTrigger_1pwz0_1",vs="_StateLayer_1pwz0_50",Is="_Label_1pwz0_66",Rs="_Value_1pwz0_88",ws="_LeadingIcon_1pwz0_112",bs="_Icon_1pwz0_113",ys="_Popup_1pwz0_161",Ts="_List_1pwz0_165",Ms="_ScrollArrow_1pwz0_169",As="_Item_1pwz0_204",Cs="_ItemIndicator_1pwz0_219",Ps="_ItemText_1pwz0_230",Vs="_ItemStateLayer_1pwz0_245",Es="_SelectSeparator_1pwz0_279",Ns="_SelectSeparatorLine_1pwz0_284",te={SelectTrigger:xs,StateLayer:vs,Label:Is,Value:Rs,LeadingIcon:ws,Icon:bs,Popup:ys,List:Ts,ScrollArrow:Ms,Item:As,ItemIndicator:Cs,ItemText:Ps,ItemStateLayer:Vs,SelectSeparator:Es,SelectSeparatorLine:Ns},js=(e,o)=>be(e,o),Kt=Ko,Xt=kt,Zt=ts,At=ms,Je=t.forwardRef(({className:e,...o},n)=>s.jsx(gs,{ref:n,className:be(e,ze.GroupLabel),...o}));Je.displayName="SelectGroupLabel";const et=t.forwardRef(({className:e,...o},n)=>s.jsx(ss,{ref:n,className:be(e,ze.Positioner),...o}));et.displayName="SelectPositioner";const tt=t.forwardRef(({className:e,...o},n)=>s.jsx(rs,{ref:n,className:be(e,ze.Popup,te.Popup),...o}));tt.displayName="SelectPopup";const ot=t.forwardRef(({className:e,...o},n)=>s.jsx(ls,{ref:n,className:be(e,ze.List,te.List),...o}));ot.displayName="SelectList";const Rt=t.forwardRef(({className:e,children:o,...n},r)=>s.jsx(ps,{ref:r,className:be(e,te.ScrollArrow),...n,children:o??s.jsx(_e,{icon:Yo,size:24})}));Rt.displayName="SelectScrollUpArrow";const wt=t.forwardRef(({className:e,children:o,...n},r)=>s.jsx(ds,{ref:r,className:be(e,te.ScrollArrow),...n,children:o??s.jsx(_e,{icon:Et,size:24})}));wt.displayName="SelectScrollDownArrow";function Jt({className:e,style:o="solid",separatorClassName:n,...r}){return s.jsx("div",{className:[te.SelectSeparator,e].filter(Boolean).join(" "),...r,children:s.jsx(It,{className:[te.SelectSeparatorLine,n].filter(Boolean).join(" "),style:o})})}const st=t.forwardRef(({leadingIcon:e,trailingIcon:o,floatingLabel:n,filled:r=!1,readOnly:V,className:i,children:d,disabled:l,...h},I)=>{const R=t.isValidElement(n)?t.cloneElement(n,{className:[te.Label,n.props.className].filter(Boolean).join(" "),"data-select-label":!0}):n,y=d??s.jsx(kt,{});return s.jsxs(Zo,{ref:I,className:js(i,te.SelectTrigger),"data-filled":r||void 0,"data-readonly":V||void 0,"data-leading-icon":e?!0:void 0,"data-disabled":l||void 0,"aria-readonly":V||void 0,disabled:l,...h,children:[R,e?s.jsx("span",{className:te.LeadingIcon,children:e}):null,s.jsx("span",{className:te.Value,children:y}),s.jsx(Qo,{className:te.Icon,children:o??s.jsx(_e,{icon:Et,size:24})}),s.jsx("span",{"aria-hidden":"true",className:te.StateLayer})]})});st.displayName="SelectTrigger";const _s=(e,o)=>be(e,o),Be=t.forwardRef(({className:e,children:o,indicator:n,...r},V)=>s.jsxs(is,{ref:V,className:_s(e,[ze.Item,te.Item].join(" ")),...r,children:[s.jsx(as,{className:te.ItemIndicator,children:n??s.jsx(_e,{icon:io,size:24})}),s.jsx(us,{className:te.ItemText,children:o}),s.jsx("span",{"aria-hidden":"true",className:te.ItemStateLayer})]}));Be.displayName="SelectItem";Je.__docgenInfo={description:"",methods:[],displayName:"SelectGroupLabel"};et.__docgenInfo={description:"",methods:[],displayName:"SelectPositioner"};tt.__docgenInfo={description:"",methods:[],displayName:"SelectPopup"};ot.__docgenInfo={description:"",methods:[],displayName:"SelectList"};Rt.__docgenInfo={description:"",methods:[],displayName:"SelectScrollUpArrow"};wt.__docgenInfo={description:"",methods:[],displayName:"SelectScrollDownArrow"};Jt.__docgenInfo={description:"",methods:[],displayName:"SelectSeparator",props:{style:{required:!1,tsType:{name:"ReactComponentPropsWithoutRef['style']",raw:"React.ComponentPropsWithoutRef<typeof Separator>['style']"},description:"",defaultValue:{value:"'solid'",computed:!1}},separatorClassName:{required:!1,tsType:{name:"string"},description:""}}};st.__docgenInfo={description:"",methods:[],displayName:"SelectTrigger",props:{leadingIcon:{required:!1,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""},trailingIcon:{required:!1,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""},floatingLabel:{required:!1,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""},filled:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},readOnly:{required:!1,tsType:{name:"boolean"},description:""}}};Be.__docgenInfo={description:"",methods:[],displayName:"SelectItem",props:{indicator:{required:!1,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""}}};const On={title:"Components/Select",decorators:[e=>s.jsx("div",{style:{width:640},children:s.jsx(e,{})})]},Ct=[{label:"Tokyo",value:"tokyo"},{label:"Osaka",value:"osaka"},{label:"Sapporo",value:"sapporo"}],dt=[{label:"Tokyo",value:"tokyo"},{label:"Osaka",value:"osaka"},{label:"Sapporo",value:"sapporo"},{label:"Nagoya",value:"nagoya"},{label:"Fukuoka",value:"fukuoka"},{label:"Kobe",value:"kobe"},{label:"Hiroshima",value:"hiroshima"},{label:"Sendai",value:"sendai"},{label:"Niigata",value:"niigata"},{label:"Kanazawa",value:"kanazawa"},{label:"Naha",value:"naha"}],Ls=()=>{const[e,o]=t.useState(null),n=e!==null;return s.jsxs(Kt,{items:Ct,value:e,onValueChange:o,defaultOpen:!0,highlightItemOnHover:!1,children:[s.jsx(st,{floatingLabel:s.jsx("span",{children:"Label"}),leadingIcon:s.jsx(_e,{icon:Dt,size:24}),filled:n,children:s.jsx(Xt,{})}),s.jsx(Zt,{children:s.jsx(et,{sideOffset:8,children:s.jsx(tt,{children:s.jsx(ot,{children:Ct.map(r=>s.jsx(Be,{value:r.value,children:r.label},r.label))})})})})]})},Hs=()=>{const[e,o]=t.useState(null),n=e!==null;return s.jsxs(Kt,{items:dt,value:e,onValueChange:o,defaultOpen:!0,highlightItemOnHover:!1,children:[s.jsx(st,{floatingLabel:s.jsx("span",{children:"Label"}),leadingIcon:s.jsx(_e,{icon:Dt,size:24}),filled:n,children:s.jsx(Xt,{})}),s.jsx(Zt,{children:s.jsx(et,{sideOffset:8,alignItemWithTrigger:!1,children:s.jsxs(tt,{style:{"--select-popup-extra-width":"16px"},children:[s.jsx(Rt,{}),s.jsxs(ot,{style:{maxHeight:180},children:[s.jsxs(At,{children:[s.jsx(Je,{children:"Kanto"}),dt.slice(0,4).map(r=>s.jsx(Be,{value:r.value,children:r.label},r.label))]}),s.jsx(Jt,{}),s.jsxs(At,{children:[s.jsx(Je,{children:"Other"}),dt.slice(4).map(r=>s.jsx(Be,{value:r.value,disabled:r.value==="sapporo",children:r.label},r.label))]})]}),s.jsx(wt,{})]})})})]})},Ke={render:()=>s.jsx(Ls,{})},Xe={render:()=>s.jsx(Hs,{})};Ke.parameters={...Ke.parameters,docs:{...Ke.parameters?.docs,source:{originalSource:`{
  render: () => <DefaultStory />
}`,...Ke.parameters?.docs?.source}}};Xe.parameters={...Xe.parameters,docs:{...Xe.parameters?.docs,source:{originalSource:`{
  render: () => <ManyItemsStory />
}`,...Xe.parameters?.docs?.source}}};const Dn=["Default","ManyItems"];export{Ke as Default,Xe as ManyItems,Dn as __namedExportsOrder,On as default};
