import{j as a}from"./jsx-runtime-u17CrQMm.js";import{r}from"./iframe-CbECxjq5.js";import{e as U,f as Be,u as De,b as He,m as c,c as Le}from"./mergeClassName-IXwn37SS.js";import{b as V,f as Ue,u as Ve,v as qe,c as Ye,d as Ke,a as Xe,e as Je,m as i,g as Qe,h as We,i as Ze,l as eo,n as oo,r as to,s as ro,o as ao,p as no,q as so,j as uo,k as io}from"./Menu.module-C-PvwsWM.js";import{r as $}from"./index-D8RucqKe.js";import{u as q}from"./useTimeout-BMAPPt2Y.js";import{o as _}from"./owner-CvMgaIeV.js";import{u as w}from"./useStableCallback-D6w4asaT.js";import{f as co,h as lo,e as mo,i as po,j as fo,k as go,l as Mo,m as bo,p as B,n as D,o as Io}from"./popupStateMapping-Be-QQ-Fi.js";import{a as So,u as xo}from"./useButton-CFXQrDeP.js";import{g as yo}from"./getPseudoElementBounds-L0mGlMFL.js";import{C as Ro}from"./CompositeItem--U8Uuajf.js";import{u as No}from"./useBaseUiId-DYV6Jlu1.js";import{h as ho,m as To,c as H,o as L}from"./createBaseUIEventDetails-Ca3whcAT.js";import{u as Co}from"./useHoverReferenceInteraction-MRO1SJQX.js";import{s as wo}from"./safePolygon-GHFvNXVz.js";import{u as Ao}from"./useClick-etEH6_CO.js";import{u as _o}from"./useFocus-BQTDi-7C.js";import{a as vo}from"./useInteractions-DTzIbOZK.js";import{d as ko}from"./useSyncedFloatingRootContext-mahGDNu5.js";import{c as A}from"./element-C8qsRkBu.js";import{u as zo}from"./useRender-C8NetiK3.js";import{S as jo}from"./Separator-DzF0aeEA.js";import{S as Po,a as Oo,b as Eo,c as Fo,d as Go,e as $o}from"./ScrollAreaCorner-DCD-toP3.js";function Bo(t){const{enabled:e=!0,mouseDownAction:o,open:s}=t,n=r.useRef(!1);return r.useMemo(()=>e?{onMouseDown:g=>{(o==="open"&&!s||o==="close"&&s)&&(n.current=!0,_(g.currentTarget).addEventListener("click",()=>{n.current=!1},{once:!0}))},onClick:g=>{n.current&&(n.current=!1,g.preventBaseUIHandler())}}:U,[e,o,s])}const R=2,Do=r.forwardRef(function(e,o){const{render:s,className:n,disabled:g=!1,nativeButton:fe=!0,id:ge,openOnHover:Me,delay:be=100,closeDelay:v=0,handle:Ie,payload:Se,...xe}=e,ye=V(!0),u=Ie?.store??ye?.store;if(!u)throw new Error(Be(85));const M=No(ge),Re=u.useState("isTriggerActive",M),N=u.useState("floatingRootContext"),p=u.useState("isOpenedByTrigger",M),x=r.useRef(null),l=Lo(),Ne=So(!0),k=co(),y=r.useMemo(()=>k??new lo,[k]),he=mo(y),Te=po(),{registerTrigger:Ce,isMountedByThisTrigger:z}=ko(M,x,u,{payload:Se,closeDelay:v,parent:l,floatingTreeRoot:y,floatingNodeId:he,floatingParentNodeId:Te,keyboardEventRelay:Ne?.relayKeyboardEvent}),we=u.useState("disabled"),I=g||we||l.type==="menubar"&&l.context.disabled,{getButtonProps:Ae,buttonRef:_e}=xo({disabled:I,native:fe});r.useEffect(()=>{!p&&l.type===void 0&&(u.context.allowMouseUpTriggerRef.current=!1)},[u,p,l.type]);const S=r.useRef(null),j=q(),h=w(d=>{if(!S.current)return;j.clear(),u.context.allowMouseUpTriggerRef.current=!1;const f=d.target;if(A(S.current,f)||A(u.select("positionerElement"),f)||f===S.current||f!=null&&Ue(f)===u.select("rootId"))return;const m=yo(S.current);d.clientX>=m.left-R&&d.clientX<=m.right+R&&d.clientY>=m.top-R&&d.clientY<=m.bottom+R||y.events.emit("close",{domEvent:d,reason:ho})});r.useEffect(()=>{p&&u.select("lastOpenChangeReason")===To&&_(S.current).addEventListener("mouseup",h,{once:!0})},[p,h,u]);const T=l.type==="menubar"&&l.context.hasSubmenuOpen,ve=Co(N,{enabled:(Me??T??!1)&&!I&&l.type!=="context-menu"&&(l.type!=="menubar"||T&&!z),handleClose:wo({blockPointerEvents:l.type!=="menubar"}),mouseOnly:!0,move:!1,restMs:l.type===void 0?be:void 0,delay:{close:v},triggerElementRef:x,externalTree:y,isActiveTrigger:Re}),ke=Ho(p,u.select("lastOpenChangeReason")),ze=Ao(N,{enabled:!I&&l.type!=="context-menu",event:p&&l.type==="menubar"?"click":"mousedown",toggle:!0,ignoreMouse:!1,stickIfOpen:l.type===void 0?ke:!1}),je=_o(N,{enabled:!I&&(l.type!=="menubar"&&p||T)}),Pe=Bo({open:p,enabled:l.type==="menubar",mouseDownAction:"open"}),Oe=vo([ze,je]),C=l.type==="menubar",P=r.useMemo(()=>({disabled:I,open:p}),[I,p]),Ee=u.useState("triggerProps",z),O=[S,o,_e,Ce,x],E=[Oe.getReferenceProps(),ve??U,Ee,{"aria-haspopup":"menu",id:M,onMouseDown:d=>{if(u.select("open"))return;j.start(200,()=>{u.context.allowMouseUpTriggerRef.current=!0}),_(d.currentTarget).addEventListener("mouseup",h,{once:!0})}},C?{role:"menuitem"}:{},Pe,xe,Ae],F=r.useRef(null),Fe=w(d=>{$.flushSync(()=>{u.setOpen(!1,H(L,d.nativeEvent,d.currentTarget))}),fo(F.current)?.focus()}),Ge=w(d=>{const f=u.select("positionerElement");if(f&&go(d,f))u.context.beforeContentFocusGuardRef.current?.focus();else{$.flushSync(()=>{u.setOpen(!1,H(L,d.nativeEvent,d.currentTarget))});let m=Mo(x.current);for(;m!==null&&A(f,m)||m?.hasAttribute("aria-hidden");){const $e=m;if(m=bo(m),m===$e)break}m?.focus()}}),G=De("button",e,{enabled:!C,stateAttributesMapping:B,state:P,ref:O,props:E});return C?a.jsx(Ro,{tag:"button",render:s,className:n,state:P,refs:O,props:E,stateAttributesMapping:B}):p?a.jsxs(r.Fragment,{children:[a.jsx(D,{ref:F,onFocus:Fe},`${M}-pre-focus-guard`),a.jsx(r.Fragment,{children:G},M),a.jsx(D,{ref:u.context.triggerFocusTargetRef,onFocus:Ge},`${M}-post-focus-guard`)]}):a.jsx(r.Fragment,{children:G},M)});function Ho(t,e){const o=q(),[s,n]=r.useState(!1);return He(()=>{t&&e==="trigger-hover"?(n(!0),o.start(Io,()=>{n(!1)})):t||(o.clear(),n(!1))},[t,e,o]),s}function Lo(){const t=Ve(!0),e=V(!0),o=qe(!0);return r.useMemo(()=>o?{type:"menubar",context:o}:t&&!e?{type:"context-menu",context:t}:{type:void 0},[t,e,o])}const Y=r.createContext("large"),b=()=>r.useContext(Y);function Uo({size:t="large",...e}){return a.jsx(Y.Provider,{value:t,children:a.jsx(Xe,{...e})})}const Mt=Do,bt=Ye,K=r.forwardRef(({className:t,...e},o)=>a.jsx(uo,{ref:o,className:c(t,i.Backdrop),...e}));K.displayName="MenuBackdrop";const X=r.forwardRef(({className:t,...e},o)=>a.jsx(Je,{ref:o,className:c(t,i.Positioner),...e}));X.displayName="MenuPositioner";const J=r.forwardRef(({className:t,...e},o)=>{const s=b(),n=e["data-size"]??s;return a.jsx(Qe,{ref:o,"data-size":n,className:c(t,i.Popup),...e})});J.displayName="MenuPopup";function It({render:t,...e}){return zo({defaultTagName:"div",render:t,props:Le({className:i.Content},e)})}const Q=r.forwardRef(({className:t,...e},o)=>a.jsx(io,{ref:o,className:c(t,i.Arrow),...e}));Q.displayName="MenuArrow";const W=r.forwardRef(({className:t,...e},o)=>{const s=b(),n=e["data-size"]??s;return a.jsx(We,{ref:o,"data-size":n,className:c(t,i.Item),...e})});W.displayName="MenuItem";const Z=r.forwardRef(({className:t,...e},o)=>a.jsx(jo,{ref:o,className:c(t,i.Separator),...e}));Z.displayName="MenuSeparator";const ee=r.forwardRef(({className:t,...e},o)=>a.jsx(eo,{ref:o,className:c(t,i.Group),...e}));ee.displayName="MenuGroup";const oe=r.forwardRef(({className:t,...e},o)=>{const s=b(),n=e["data-size"]??s;return a.jsx(oo,{ref:o,"data-size":n,className:c(t,i.GroupLabel),...e})});oe.displayName="MenuGroupLabel";const te=r.forwardRef(({className:t,...e},o)=>a.jsx(ao,{ref:o,className:c(t,i.RadioGroup),...e}));te.displayName="MenuRadioGroup";const re=r.forwardRef(({className:t,...e},o)=>{const s=b(),n=e["data-size"]??s;return a.jsx(no,{ref:o,"data-size":n,className:c(t,i.OptionItem),...e})});re.displayName="MenuRadioItem";const ae=r.forwardRef(({className:t,keepMounted:e=!0,...o},s)=>{const n=b(),g=o["data-size"]??n;return a.jsx(so,{ref:s,keepMounted:e,"data-size":g,className:c(t,i.OptionIndicator),...o})});ae.displayName="MenuRadioItemIndicator";const ne=r.forwardRef(({className:t,...e},o)=>{const s=b(),n=e["data-size"]??s;return a.jsx(to,{ref:o,"data-size":n,className:c(t,i.OptionItem),...e})});ne.displayName="MenuCheckboxItem";const se=r.forwardRef(({className:t,keepMounted:e=!0,...o},s)=>{const n=b(),g=o["data-size"]??n;return a.jsx(ro,{ref:s,keepMounted:e,"data-size":g,className:c(t,i.OptionIndicator),...o})});se.displayName="MenuCheckboxItemIndicator";const St=Ke,ue=r.forwardRef(({className:t,...e},o)=>{const s=b(),n=e["data-size"]??s;return a.jsx(Ze,{ref:o,"data-size":n,className:c(t,i.SubmenuTrigger),...e})});ue.displayName="MenuSubmenuTrigger";const ie=r.forwardRef(({className:t,...e},o)=>a.jsx(Po,{ref:o,className:c(t,i.ScrollAreaRoot),...e}));ie.displayName="MenuScrollAreaRoot";const ce=r.forwardRef(({className:t,...e},o)=>a.jsx(Oo,{ref:o,className:c(t,i.ScrollAreaViewport),...e}));ce.displayName="MenuScrollAreaViewport";const le=r.forwardRef(({className:t,...e},o)=>a.jsx(Eo,{ref:o,className:c(t,i.ScrollAreaContent),...e}));le.displayName="MenuScrollAreaContent";const de=r.forwardRef(({className:t,...e},o)=>a.jsx(Fo,{ref:o,className:c(t,i.ScrollAreaScrollbar),...e}));de.displayName="MenuScrollAreaScrollbar";const me=r.forwardRef(({className:t,...e},o)=>a.jsx(Go,{ref:o,className:c(t,i.ScrollAreaThumb),...e}));me.displayName="MenuScrollAreaThumb";const pe=r.forwardRef(({className:t,...e},o)=>a.jsx($o,{ref:o,className:c(t,i.ScrollAreaCorner),...e}));pe.displayName="MenuScrollAreaCorner";Uo.__docgenInfo={description:"",methods:[],displayName:"MenuRoot",props:{size:{required:!1,tsType:{name:"union",raw:"'large' | 'small'",elements:[{name:"literal",value:"'large'"},{name:"literal",value:"'small'"}]},description:"",defaultValue:{value:"'large'",computed:!1}}}};K.__docgenInfo={description:"",methods:[],displayName:"MenuBackdrop"};X.__docgenInfo={description:"",methods:[],displayName:"MenuPositioner"};J.__docgenInfo={description:"",methods:[],displayName:"MenuPopup"};Q.__docgenInfo={description:"",methods:[],displayName:"MenuArrow"};W.__docgenInfo={description:"",methods:[],displayName:"MenuItem"};Z.__docgenInfo={description:"",methods:[],displayName:"MenuSeparator"};ee.__docgenInfo={description:"",methods:[],displayName:"MenuGroup"};oe.__docgenInfo={description:"",methods:[],displayName:"MenuGroupLabel"};te.__docgenInfo={description:"",methods:[],displayName:"MenuRadioGroup"};re.__docgenInfo={description:"",methods:[],displayName:"MenuRadioItem"};ae.__docgenInfo={description:"",methods:[],displayName:"MenuRadioItemIndicator",props:{keepMounted:{defaultValue:{value:"true",computed:!1},required:!1}}};ne.__docgenInfo={description:"",methods:[],displayName:"MenuCheckboxItem"};se.__docgenInfo={description:"",methods:[],displayName:"MenuCheckboxItemIndicator",props:{keepMounted:{defaultValue:{value:"true",computed:!1},required:!1}}};ue.__docgenInfo={description:"",methods:[],displayName:"MenuSubmenuTrigger"};ie.__docgenInfo={description:"",methods:[],displayName:"MenuScrollAreaRoot"};ce.__docgenInfo={description:"",methods:[],displayName:"MenuScrollAreaViewport"};le.__docgenInfo={description:"",methods:[],displayName:"MenuScrollAreaContent"};de.__docgenInfo={description:"",methods:[],displayName:"MenuScrollAreaScrollbar"};me.__docgenInfo={description:"",methods:[],displayName:"MenuScrollAreaThumb"};pe.__docgenInfo={description:"",methods:[],displayName:"MenuScrollAreaCorner"};export{Uo as M,Mt as a,bt as b,X as c,J as d,ie as e,ce as f,le as g,It as h,W as i,Z as j,ee as k,oe as l,ne as m,se as n,te as o,re as p,ae as q,St as r,ue as s,de as t,b as u,me as v,pe as w,Do as x};
