import{r as c}from"./iframe-CbECxjq5.js";import{i as K}from"./floating-ui.utils.dom-CWuwp5es.js";import{u as D}from"./useStableCallback-D6w4asaT.js";import{f as h,b as B,c as M,g as x}from"./mergeClassName-IXwn37SS.js";const N=c.createContext(void 0);function O(a=!1){const o=c.useContext(N);if(o===void 0&&!a)throw new Error(h(16));return o}function T(a){const{focusableWhenDisabled:o,disabled:i,composite:l=!1,tabIndex:t=0,isNativeButton:s}=a,u=l&&o!==!1,f=l&&o===!1;return{props:c.useMemo(()=>{const r={onKeyDown(b){i&&o&&b.key!=="Tab"&&b.preventDefault()}};return l||(r.tabIndex=t,!s&&i&&(r.tabIndex=o?t:-1)),(s&&(o||u)||!s&&i)&&(r["aria-disabled"]=i),s&&(!o||f)&&(r.disabled=i),r},[l,i,o,u,f,s,t])}}function S(a={}){const{disabled:o=!1,focusableWhenDisabled:i,tabIndex:l=0,native:t=!0}=a,s=c.useRef(null),u=O(!0)!==void 0,f=D(()=>{const n=s.current;return!!(n?.tagName==="A"&&n?.href)}),{props:d}=T({focusableWhenDisabled:i,disabled:o,composite:u,tabIndex:l,isNativeButton:t}),r=c.useCallback(()=>{const n=s.current;U(n)&&u&&o&&d.disabled===void 0&&n.disabled&&(n.disabled=!1)},[o,d.disabled,u]);B(r,[r]);const b=c.useCallback((n={})=>{const{onClick:p,onMouseDown:y,onKeyUp:k,onKeyDown:w,onPointerDown:P,...g}=n;return M({type:t?"button":void 0,onClick(e){if(o){e.preventDefault();return}p?.(e)},onMouseDown(e){o||y?.(e)},onKeyDown(e){if(o||(x(e),w?.(e)),e.baseUIHandlerPrevented)return;const E=e.target===e.currentTarget&&!t&&!f()&&!o,m=e.key==="Enter",I=e.key===" ";E&&((I||m)&&e.preventDefault(),m&&p?.(e))},onKeyUp(e){o||(x(e),k?.(e)),!e.baseUIHandlerPrevented&&e.target===e.currentTarget&&!t&&!o&&e.key===" "&&p?.(e)},onPointerDown(e){if(o){e.preventDefault();return}P?.(e)}},t?void 0:{role:"button"},d,g)},[o,d,t,f]),C=D(n=>{s.current=n,r()});return{getButtonProps:b,buttonRef:C}}function U(a){return K(a)&&a.tagName==="BUTTON"}export{N as C,O as a,T as b,S as u};
