import{j as c}from"./jsx-runtime-u17CrQMm.js";import{c as he,I as W}from"./createReactComponent-BVoNDKa1.js";import{r as s}from"./iframe-DCTwtVEg.js";import{b as A,f as B,d as ye,u as $,m as Q}from"./mergeClassName-CGuaxy8D.js";import{u as xe,T as ve}from"./useTimeout-D67vsree.js";import{g as Ce,s as Pe}from"./safePolygon-C3u_W5Q0.js";import{c as Z,n as ae,m as se,r as Te,t as Se,g as Re,j as be,C as Ie}from"./createBaseUIEventDetails-BDhVKG5E.js";import{r as we}from"./index-zOVaSaDz.js";import{p as Me,b as Ee,c as Oe,u as je,a as Ae,d as De}from"./useSyncedFloatingRootContext-BgTE0OEs.js";import{R as ke,P as _e,c as j,t as Ne,q as He,a as ee}from"./popupStateMapping-D9WKduT9.js";import{u as Le}from"./useFocus-BkJdf6f3.js";import{u as Ue,a as Fe}from"./useInteractions-DGgngZ7b.js";import{b as Ve}from"./floating-ui.utils.dom-CWuwp5es.js";import{u as re}from"./useStableCallback-BlvU505D.js";import{b as Be}from"./event-CNRsvx7q.js";import{g as $e,c as ze}from"./element-C8qsRkBu.js";import{u as Xe}from"./useBaseUiId-DBEJHERS.js";import{u as Ye,a as We}from"./useHoverReferenceInteraction-BT5XQgOm.js";import{F as Ge}from"./FloatingPortalLite-DbNbHtoY.js";import{a as qe,b as Ke}from"./useAnchorPositioning-z85Juv3n.js";import{g as le}from"./getDisabledMountTransitionStyles-CjB8mk2n.js";import{u as Je,t as Qe}from"./useOpenChangeComplete-CAiTarFg.js";import{u as Ze}from"./usePopupAutoResize-CCPfhA5E.js";import{u as et}from"./DirectionContext-gps4P05p.js";import{I as tt}from"./IconEdit-fVfiAcsu.js";import{I as ot}from"./IconTrash-DsiHdtv0.js";import{I as G}from"./IconButton-CVs8MoSW.js";import"./useRender-BavQ6iTs.js";import"./preload-helper-ClwkVg-s.js";import"./useOnMount-CchHJru6.js";import"./useValueAsRef-BBKeM-2h.js";import"./constants-CNjsXAL1.js";import"./index-DT-vH3A5.js";import"./useTransitionStatus-BGkF8oIU.js";import"./useAnimationFrame-DjvyS4jC.js";import"./getEmptyRootContext-BcmOMSAW.js";import"./useId-DhseFPV0.js";import"./detectBrowser-CYw91I8L.js";import"./visuallyHidden-CbwUG2x5.js";import"./floating-ui.utils-CtlI5I81.js";import"./owner-CvMgaIeV.js";import"./getCssDimensions-Bjp7kr5Y.js";import"./Button.module-DxN8w5bC.js";import"./useButton-BBNhskDs.js";const nt=[["path",{d:"M10.325 4.317c.426 -1.756 2.924 -1.756 3.35 0a1.724 1.724 0 0 0 2.573 1.066c1.543 -.94 3.31 .826 2.37 2.37a1.724 1.724 0 0 0 1.065 2.572c1.756 .426 1.756 2.924 0 3.35a1.724 1.724 0 0 0 -1.066 2.573c.94 1.543 -.826 3.31 -2.37 2.37a1.724 1.724 0 0 0 -2.572 1.065c-.426 1.756 -2.924 1.756 -3.35 0a1.724 1.724 0 0 0 -2.573 -1.066c-1.543 .94 -3.31 -.826 -2.37 -2.37a1.724 1.724 0 0 0 -1.065 -2.572c-1.756 -.426 -1.756 -2.924 0 -3.35a1.724 1.724 0 0 0 1.066 -2.573c-.94 -1.543 .826 -3.31 2.37 -2.37c1 .608 2.296 .07 2.572 -1.065",key:"svg-0"}],["path",{d:"M9 12a3 3 0 1 0 6 0a3 3 0 0 0 -6 0",key:"svg-1"}]],st=he("outline","settings","Settings",nt),ue=s.createContext({hasProvider:!1,timeoutMs:0,delayRef:{current:0},initialDelayRef:{current:0},timeout:new ve,currentIdRef:{current:null},currentContextRef:{current:null}});function rt(t){const{children:e,delay:o,timeoutMs:r=0}=t,f=s.useRef(o),l=s.useRef(o),i=s.useRef(null),a=s.useRef(null),p=xe();return c.jsx(ue.Provider,{value:s.useMemo(()=>({hasProvider:!0,delayRef:f,initialDelayRef:l,currentIdRef:i,timeoutMs:r,currentContextRef:a,timeout:p}),[r,p]),children:e})}function it(t,e={open:!1}){const o="rootStore"in t?t.rootStore:t,r=o.useState("floatingId"),{enabled:f=!0,open:l}=e,i=s.useContext(ue),{currentIdRef:a,delayRef:p,timeoutMs:u,initialDelayRef:m,currentContextRef:d,hasProvider:g,timeout:n}=i,[C,S]=s.useState(!1);return A(()=>{function R(){S(!1),d.current?.setIsInstantPhase(!1),a.current=null,d.current=null,p.current=m.current}if(f&&a.current&&!l&&a.current===r){if(S(!1),u){const h=r;return n.start(u,()=>{o.select("open")||a.current&&a.current!==h||R()}),()=>{n.clear()}}R()}},[f,l,r,a,p,u,m,d,n,o]),A(()=>{if(!f||!l)return;const R=d.current,h=a.current;n.clear(),d.current={onOpenChange:o.setOpen,setIsInstantPhase:S},a.current=r,p.current={open:0,close:Ce(m.current,"close")},h!==null&&h!==r?(S(!0),R?.setIsInstantPhase(!0),R?.onOpenChange(!1,Z(ae))):(S(!1),R?.setIsInstantPhase(!1))},[f,l,r,o,a,p,u,m,d,n]),A(()=>()=>{d.current=null},[d]),s.useMemo(()=>({hasProvider:g,delayRef:p,isInstantPhase:C}),[g,p,C])}function at(t,e){let o=null,r=null,f=!1;return{contextElement:t||void 0,getBoundingClientRect(){const l=t?.getBoundingClientRect()||{width:0,height:0,x:0,y:0},i=e.axis==="x"||e.axis==="both",a=e.axis==="y"||e.axis==="both",p=["mouseenter","mousemove"].includes(e.dataRef.current.openEvent?.type||"")&&e.pointerType!=="touch";let u=l.width,m=l.height,d=l.x,g=l.y;return o==null&&e.x&&i&&(o=l.x-e.x),r==null&&e.y&&a&&(r=l.y-e.y),d-=o||0,g-=r||0,u=0,m=0,!f||p?(u=e.axis==="y"?l.width:0,m=e.axis==="x"?l.height:0,d=i&&e.x!=null?e.x:d,g=a&&e.y!=null?e.y:g):f&&!p&&(m=e.axis==="x"?l.height:m,u=e.axis==="y"?l.width:u),f=!0,{width:u,height:m,x:d,y:g,top:g,right:d+u,bottom:g+m,left:d}}}}function ie(t){return t!=null&&t.clientX!=null}function lt(t,e={}){const o="rootStore"in t?t.rootStore:t,r=o.useState("open"),f=o.useState("floatingElement"),l=o.useState("domReferenceElement"),i=o.context.dataRef,{enabled:a=!0,axis:p="both",x:u=null,y:m=null}=e,d=s.useRef(!1),g=s.useRef(null),[n,C]=s.useState(),[S,R]=s.useState([]),h=re((y,P)=>{d.current||i.current.openEvent&&!ie(i.current.openEvent)||o.set("positionReference",at(l,{x:y,y:P,axis:p,dataRef:i,pointerType:n}))}),x=re(y=>{u!=null||m!=null||(r?g.current||R([]):h(y.clientX,y.clientY))}),w=Be(n)?f:r,b=s.useCallback(()=>{if(!w||!a||u!=null||m!=null)return;const y=Ve(f);function P(T){const M=$e(T);ze(f,M)?(y.removeEventListener("mousemove",P),g.current=null):h(T.clientX,T.clientY)}if(!i.current.openEvent||ie(i.current.openEvent)){y.addEventListener("mousemove",P);const T=()=>{y.removeEventListener("mousemove",P),g.current=null};return g.current=T,T}o.set("positionReference",l)},[w,a,u,m,f,i,l,o,h]);s.useEffect(()=>b(),[b,S]),s.useEffect(()=>{a&&!f&&(d.current=!1)},[a,f]),s.useEffect(()=>{!a&&r&&(d.current=!0)},[a,r]),A(()=>{a&&(u!=null||m!=null)&&(d.current=!1,h(u,m))},[a,u,m,h]);const I=s.useMemo(()=>{function y(P){C(P.pointerType)}return{onPointerDown:y,onPointerEnter:y,onMouseMove:x,onMouseEnter:x}},[x]);return s.useMemo(()=>a?{reference:I}:{},[a,I])}const ce=s.createContext(void 0);function U(t){const e=s.useContext(ce);if(e===void 0&&!t)throw new Error(B(72));return e}const ut={...Me,disabled:j(t=>t.disabled),instantType:j(t=>t.instantType),isInstantPhase:j(t=>t.isInstantPhase),trackCursorAxis:j(t=>t.trackCursorAxis),disableHoverablePopup:j(t=>t.disableHoverablePopup),lastOpenChangeReason:j(t=>t.openChangeReason),closeDelay:j(t=>t.closeDelay)};class te extends ke{constructor(e){super({...ct(),...e},{popupRef:s.createRef(),onOpenChange:void 0,onOpenChangeComplete:void 0,triggerElements:new _e},ut)}setOpen=(e,o)=>{const r=o.reason,f=r===se,l=e&&r===Te,i=!e&&(r===Se||r===Re);if(o.preventUnmountOnClose=()=>{this.set("preventUnmountingOnClose",!0)},this.context.onOpenChange?.(e,o),o.isCanceled)return;const a=()=>{const p={open:e,openChangeReason:r};l?p.instantType="focus":i?p.instantType="dismiss":r===se&&(p.instantType=void 0);const u=o.trigger?.id??null;(u||e)&&(p.activeTriggerId=u,p.activeTriggerElement=o.trigger??null),this.update(p)};f?we.flushSync(a):a()};static useStore(e,o){const r=ye(()=>e??new te(o)).current,f=Ee({popupStore:r,onOpenChange:r.setOpen});return r.state.floatingRootContext=f,r}}function ct(){return{...Oe(),disabled:!1,instantType:void 0,isInstantPhase:!1,trackCursorAxis:"none",disableHoverablePopup:!1,openChangeReason:null,closeDelay:0}}function pt(t){const{disabled:e=!1,defaultOpen:o=!1,open:r,disableHoverablePopup:f=!1,trackCursorAxis:l="none",actionsRef:i,onOpenChange:a,onOpenChangeComplete:p,handle:u,triggerId:m,defaultTriggerId:d=null,children:g}=t,n=te.useStore(u?.store,{open:r??o,activeTriggerId:m!==void 0?m:d});n.useControlledProp("open",r,o),n.useControlledProp("activeTriggerId",m,d),n.useContextCallback("onOpenChange",a),n.useContextCallback("onOpenChangeComplete",p);const C=n.useState("open"),S=n.useState("activeTriggerId"),R=n.useState("payload");n.useSyncedValues({trackCursorAxis:l,disableHoverablePopup:f});const h=!e&&C;A(()=>{C&&e&&n.setOpen(!1,Z(Ie))},[C,e,n]),n.useSyncedValue("disabled",e),je(n);const{forceUnmount:x,transitionStatus:w}=Ae(h,n),b=n.useState("isInstantPhase"),I=n.useState("instantType"),y=n.useState("lastOpenChangeReason"),P=s.useRef(null);A(()=>{w==="ending"&&y===ae||w!=="ending"&&b?(I!=="delay"&&(P.current=I),n.set("instantType","delay")):P.current!==null&&(n.set("instantType",P.current),P.current=null)},[w,b,y,I,n]),A(()=>{h&&S==null&&n.set("payload",void 0)},[n,S,h]);const T=s.useCallback(()=>{n.setOpen(!1,dt(n,be))},[n]);s.useImperativeHandle(i,()=>({unmount:x,close:T}),[x,T]);const M=n.useState("floatingRootContext"),E=Le(M,{enabled:!e}),v=Ue(M,{enabled:!e,referencePress:!0}),N=lt(M,{enabled:!e&&l!=="none",axis:l==="none"?void 0:l}),{getReferenceProps:O,getFloatingProps:D,getTriggerProps:k}=Fe([E,v,N]),_=s.useMemo(()=>O(),[O]),z=s.useMemo(()=>k(),[k]),ne=s.useMemo(()=>D(),[D]);return n.useSyncedValues({floatingRootContext:M,activeTriggerProps:_,inactiveTriggerProps:z,popupProps:ne}),c.jsx(ce.Provider,{value:n,children:typeof g=="function"?g({payload:R}):g})}function dt(t,e){const o=Z(e);return o.preventUnmountOnClose=()=>{t.set("preventUnmountingOnClose",!0)},o}const pe=s.createContext(void 0);function ft(){return s.useContext(pe)}const mt=600,gt=s.forwardRef(function(e,o){const{className:r,render:f,handle:l,payload:i,disabled:a,delay:p,closeDelay:u,id:m,...d}=e,g=U(!0),n=l?.store??g;if(!n)throw new Error(B(82));const C=Xe(m),S=n.useState("isTriggerActive",C),R=n.useState("floatingRootContext"),h=n.useState("isOpenedByTrigger",C),x=s.useRef(null),w=p??mt,b=u??0,{registerTrigger:I,isMountedByThisTrigger:y}=De(C,x,n,{payload:i,closeDelay:b}),P=ft(),{delayRef:T,isInstantPhase:M,hasProvider:E}=it(R,{open:h});n.useSyncedValue("isInstantPhase",M);const v=n.useState("disabled"),N=a??v,O=n.useState("trackCursorAxis"),D=n.useState("disableHoverablePopup"),k=Ye(R,{enabled:!N,mouseOnly:!0,move:!1,handleClose:!D&&O!=="both"?Pe():null,restMs(){const X=P?.delay,F=typeof T.current=="object"?T.current.open:void 0;let Y=w;return E&&(F!==0?Y=p??X??w:Y=0),Y},delay(){const X=typeof T.current=="object"?T.current.close:void 0;let F=b;return u==null&&E&&(F=X),{close:F}},triggerElementRef:x,isActiveTrigger:S}),_=s.useMemo(()=>({open:h}),[h]),z=n.useState("triggerProps",y);return $("button",e,{state:_,ref:[o,I,x],props:[k,z,{id:C},d],stateAttributesMapping:Ne})}),de=s.createContext(void 0);function ht(){const t=s.useContext(de);if(t===void 0)throw new Error(B(70));return t}const yt=s.forwardRef(function(e,o){const{keepMounted:r=!1,...f}=e;return U().useState("mounted")||r?c.jsx(de.Provider,{value:r,children:c.jsx(Ge,{ref:o,...f})}):null}),fe=s.createContext(void 0);function me(){const t=s.useContext(fe);if(t===void 0)throw new Error(B(71));return t}const xt=s.forwardRef(function(e,o){const{render:r,className:f,anchor:l,positionMethod:i="absolute",side:a="top",align:p="center",sideOffset:u=0,alignOffset:m=0,collisionBoundary:d="clipping-ancestors",collisionPadding:g=5,arrowPadding:n=5,sticky:C=!1,disableAnchorTracking:S=!1,collisionAvoidance:R=He,...h}=e,x=U(),w=ht(),b=x.useState("open"),I=x.useState("mounted"),y=x.useState("trackCursorAxis"),P=x.useState("disableHoverablePopup"),T=x.useState("floatingRootContext"),M=x.useState("instantType"),E=x.useState("transitionStatus"),v=qe({anchor:l,positionMethod:i,floatingRootContext:T,mounted:I,side:a,sideOffset:u,align:p,alignOffset:m,collisionBoundary:d,collisionPadding:g,sticky:C,arrowPadding:n,disableAnchorTracking:S,keepMounted:w,collisionAvoidance:R,adaptiveOrigin:Ke}),N=s.useMemo(()=>{const _={};return(!b||y==="both"||P)&&(_.pointerEvents="none"),{role:"presentation",hidden:!I,style:{...v.positionerStyles,..._}}},[b,y,P,I,v.positionerStyles]),O=s.useMemo(()=>({open:b,side:v.side,align:v.align,anchorHidden:v.anchorHidden,instant:y!=="none"?"tracking-cursor":M}),[b,v.side,v.align,v.anchorHidden,y,M]),D=s.useMemo(()=>({...O,arrowRef:v.arrowRef,arrowStyles:v.arrowStyles,arrowUncentered:v.arrowUncentered}),[O,v.arrowRef,v.arrowStyles,v.arrowUncentered]),k=$("div",e,{state:O,props:[N,le(E),h],ref:[o,x.useStateSetter("positionerElement")],stateAttributesMapping:ee});return c.jsx(fe.Provider,{value:D,children:k})}),vt={...ee,...Qe},Ct=s.forwardRef(function(e,o){const{className:r,render:f,...l}=e,i=U(),{side:a,align:p}=me(),u=i.useState("open"),m=i.useState("mounted"),d=i.useState("instantType"),g=i.useState("transitionStatus"),n=i.useState("popupProps"),C=i.useState("payload"),S=i.useState("popupElement"),R=i.useState("positionerElement"),h=i.useState("floatingRootContext"),x=et();Je({open:u,ref:i.context.popupRef,onComplete(){u&&i.context.onOpenChangeComplete?.(!0)}});function w(){h.context.events.emit("measure-layout")}function b(E,v){h.context.events.emit("measure-layout-complete",{previousDimensions:E,nextDimensions:v})}const I=s.useCallback(()=>i.context.triggerElements.size>1,[i]);Ze({popupElement:S,positionerElement:R,mounted:m,content:C,enabled:I,onMeasureLayout:w,onMeasureLayoutComplete:b,side:a,direction:x});const y=i.useState("disabled"),P=i.useState("closeDelay");We(h,{enabled:!y,closeDelay:P});const T=s.useMemo(()=>({open:u,side:a,align:p,instant:d,transitionStatus:g}),[u,a,p,d,g]);return $("div",e,{state:T,ref:[o,i.context.popupRef,i.useStateSetter("popupElement")],props:[n,le(g),l],stateAttributesMapping:vt})}),Pt=s.forwardRef(function(e,o){const{className:r,render:f,...l}=e,a=U().useState("instantType"),{open:p,arrowRef:u,side:m,align:d,arrowUncentered:g,arrowStyles:n}=me(),C=s.useMemo(()=>({open:p,side:m,align:d,uncentered:g,instant:a}),[p,m,d,g,a]);return $("div",e,{state:C,ref:[o,u],props:[{style:n,"aria-hidden":!0},l],stateAttributesMapping:ee})}),Tt=function(e){const{delay:o,closeDelay:r,timeout:f=400}=e,l=s.useMemo(()=>({delay:o,closeDelay:r}),[o,r]),i=s.useMemo(()=>({open:o,close:r}),[o,r]);return c.jsx(pe.Provider,{value:l,children:c.jsx(rt,{delay:i,timeoutMs:f,children:e.children})})},St="_Positioner_hlmab_1",Rt="_Popup_hlmab_9",bt="_Arrow_hlmab_39",oe={Positioner:St,Popup:Rt,Arrow:bt},It=Tt,q=pt,K=gt,J=yt,H=s.forwardRef(({className:t,...e},o)=>c.jsx(xt,{ref:o,className:Q(t,oe.Positioner),...e}));H.displayName="TooltipPositioner";const L=s.forwardRef(({className:t,...e},o)=>c.jsx(Ct,{ref:o,className:Q(t,oe.Popup),...e}));L.displayName="TooltipPopup";const ge=s.forwardRef(({className:t,...e},o)=>c.jsx(Pt,{ref:o,className:Q(t,oe.Arrow),...e}));ge.displayName="TooltipArrow";H.__docgenInfo={description:"",methods:[],displayName:"TooltipPositioner"};L.__docgenInfo={description:"",methods:[],displayName:"TooltipPopup"};ge.__docgenInfo={description:"",methods:[],displayName:"TooltipArrow"};const vo={title:"Components/Tooltip",parameters:{layout:"fullscreen"}},wt=()=>c.jsx("div",{style:{padding:32},children:c.jsx(It,{children:c.jsxs("div",{style:{display:"flex",gap:8,padding:8,borderRadius:8,border:"1px solid var(--outline-variant)",background:"var(--surface-container-low)",width:"fit-content"},children:[c.jsxs(q,{children:[c.jsx(K,{render:t=>c.jsx(G,{...t,"aria-label":"編集",variant:"ghost",children:c.jsx(W,{icon:tt,size:20})})}),c.jsx(J,{children:c.jsx(H,{sideOffset:10,children:c.jsx(L,{children:"編集"})})})]}),c.jsxs(q,{children:[c.jsx(K,{render:t=>c.jsx(G,{...t,"aria-label":"削除",variant:"ghost",children:c.jsx(W,{icon:ot,size:20})})}),c.jsx(J,{children:c.jsx(H,{sideOffset:10,children:c.jsx(L,{children:"削除"})})})]}),c.jsxs(q,{children:[c.jsx(K,{render:t=>c.jsx(G,{...t,"aria-label":"設定",variant:"ghost",children:c.jsx(W,{icon:st,size:20})})}),c.jsx(J,{children:c.jsx(H,{sideOffset:10,children:c.jsx(L,{children:"設定"})})})]})]})})}),V={render:()=>c.jsx(wt,{})};V.parameters={...V.parameters,docs:{...V.parameters?.docs,source:{originalSource:`{
  render: () => <DefaultStory />
}`,...V.parameters?.docs?.source}}};const Co=["Default"];export{V as Default,Co as __namedExportsOrder,vo as default};
