import{j as c}from"./jsx-runtime-u17CrQMm.js";import{r as s}from"./iframe-CbECxjq5.js";import{I as Ge}from"./Icon-D1kJnNbP.js";import{d as $t,f as Et,a as Ht,b as Je,u as ge,m as be}from"./mergeClassName-IXwn37SS.js";import{u as Bt}from"./useControlled-C4PWAOlh.js";import{u as me}from"./useStableCallback-D6w4asaT.js";import{T as Kt,u as tt}from"./useTimeout-BMAPPt2Y.js";import{u as Yt}from"./useOnMount-B177qC_F.js";import{u as dt}from"./useValueAsRef-TJHsNw6D.js";import{u as zt}from"./useForcedRerendering-D4po_h_2.js";import{v as Xt}from"./visuallyHidden-CbwUG2x5.js";import{o as We}from"./owner-CvMgaIeV.js";import{b as Zt,i as qt,c as xt}from"./detectBrowser-CYw91I8L.js";import{u as Nt,b as Jt,a as Qt,c as en,f as tn}from"./LabelableContext-P5lwU5Pp.js";import{u as nn}from"./useLabelableId-GKuttH5A.js";import{g as $e,f as we,a as St}from"./formatNumber-E4R0_Sjy.js";import{c as rn}from"./clamp-DyuOe9kr.js";import{c as ce,d as Ie,n as sn,v as on,w as De,i as Qe,e as mt,x as ft,y as pt}from"./createBaseUIEventDetails-Ca3whcAT.js";import{b as He}from"./floating-ui.utils.dom-CWuwp5es.js";import{r as nt}from"./index-D8RucqKe.js";import{u as yt}from"./useButton-CFXQrDeP.js";import{u as an}from"./useValueChanged-9XaIK5SP.js";import{s as un}from"./event-CNRsvx7q.js";import"./preload-helper-ClwkVg-s.js";import"./useBaseUiId-DYV6Jlu1.js";import"./useId-kuykVazU.js";import"./index-D2G6Vmfx.js";const ht=0;class ot extends Kt{static create(){return new ot}start(r,t){this.clear(),this.currentId=setInterval(()=>{t()},r)}clear=()=>{this.currentId!==ht&&(clearInterval(this.currentId),this.currentId=ht)}}function cn(){const e=$t(ot.create).current;return Yt(e.disposeEffect),e}const Ct=s.createContext(void 0);function Ae(){const e=s.useContext(Ct);if(e===void 0)throw new Error(Et(43));return e}const Re={inputValue:()=>null,value:()=>null},ln=["零","〇","一","二","三","四","五","六","七","八","九"],dn={零:"0","〇":"0",一:"1",二:"2",三:"3",四:"4",五:"5",六:"6",七:"7",八:"8",九:"9"},It=["٠","١","٢","٣","٤","٥","٦","٧","٨","٩"],At=["۰","۱","۲","۳","۴","۵","۶","۷","۸","۹"],it=["０","１","２","３","４","５","６","７","８","９"],_t=["%","٪","％","﹪"],vt=["‰","؉"],Dt=["−","－","‒","–","—","﹣"],Tt=["＋","﹢"],mn="．",fn="，",pn=new RegExp(`[${It.join("")}]`,"g"),hn=new RegExp(`[${At.join("")}]`,"g"),gn=new RegExp(`[${it.join("")}]`,"g"),bn=new RegExp(`[${ln.join("")}]`,"g"),Rn=new RegExp(`[${_t.join("")}]`),En=new RegExp(`[${vt.join("")}]`),rt=/[٠١٢٣٤٥٦٧٨٩]/,wt=/[۰۱۲۳۴۵۶۷۸۹]/,st=/[零〇一二三四五六七八九]/,gt=new RegExp(`[${it.join("")}]`),xn=[".",",",mn,fn,"٫","٬"],bt=new RegExp("\\p{Zs}","u"),Nn=["+",...Tt],Sn=["-",...Dt],je=e=>e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),yn=e=>e.replace(/[-\\\]^]/g,r=>`\\${r}`),Ft=e=>`[${e.map(yn).join("")}]`,Pt=Ft(["-"].concat(Dt)),Vt=Ft(["+"].concat(Tt)),Lt=new RegExp(Pt,"gu"),Mt=new RegExp(Vt,"gu"),Te=new RegExp(Pt),ke=new RegExp(Vt);function at(e,r){const t=$e(e,r).formatToParts(11111.1),o={};return t.forEach(u=>{o[u.type]=u.value}),$e(e).formatToParts(.1).forEach(u=>{u.type==="decimal"&&(o[u.type]=u.value)}),o}function Ce(e,r,t){if(e==null)return null;let o=String(e).replace(new RegExp("\\p{Cf}","gu"),"").trim();o=o.replace(Lt,"-").replace(Mt,"+");let u=!1;const h=o.match(/([+-])\s*$/);h&&(h[1]==="-"&&(u=!0),o=o.replace(/([+-])\s*$/,""));const x=o.match(/^\s*([+-])/);x&&(x[1]==="-"&&(u=!0),o=o.replace(/^\s*[+-]/,""));let f=r;f===void 0&&(rt.test(o)||wt.test(o)?f="ar":st.test(o)&&(f="zh"));const{group:m,decimal:N,currency:R}=at(f,t),E=$e(f,t).formatToParts(1).filter(l=>l.type==="unit").map(l=>je(l.value)),U=E.length?new RegExp(E.join("|"),"g"):null;let G=null;m&&(new RegExp("\\p{Zs}","u").test(m)?G=new RegExp("\\p{Zs}","gu"):m==="'"||m==="’"?G=/['’]/g:G=new RegExp(je(m),"g"));let L=[{regex:m?G:null,replacement:""},{regex:N?new RegExp(je(N),"g"):null,replacement:"."},{regex:/．/g,replacement:"."},{regex:/，/g,replacement:""},{regex:/٫/g,replacement:"."},{regex:/٬/g,replacement:""},{regex:R?new RegExp(je(R),"g"):null,replacement:""},{regex:U,replacement:""},{regex:pn,replacement:l=>String(It.indexOf(l))},{regex:hn,replacement:l=>String(At.indexOf(l))},{regex:gn,replacement:l=>String(it.indexOf(l))},{regex:bn,replacement:l=>dn[l]}].reduce((l,{regex:$,replacement:C})=>$?l.replace($,C):l,o);const k=L.lastIndexOf(".");if(k!==-1&&(L=`${L.slice(0,k).replace(/\./g,"")}.${L.slice(k+1).replace(/\./g,"")}`),/^[-+]?Infinity$/i.test(o)||/[∞]/.test(o))return null;const q=(u?"-":"")+L;let P=parseFloat(q);const b=t?.style,p=b==="unit"&&t?.unit==="percent",W=Rn.test(e)||b==="percent";return En.test(e)?P/=1e3:!p&&W&&(P/=100),Number.isNaN(P)?null:P}const Cn=60,In=400,An=50,_n=3,vn=8,Fe=1,Dn=1e-10;function Tn(e){const r=$e("en-US").resolvedOptions(),t=e?.minimumFractionDigits??r.minimumFractionDigits??0;return{maximumFractionDigits:Math.max(e?.maximumFractionDigits??r.maximumFractionDigits??20,t),minimumFractionDigits:t}}function wn(e,r){if(!Number.isFinite(e))return e;const t=Math.min(Math.max(r,0),20);return Number(e.toFixed(t))}function et(e,r){const{maximumFractionDigits:t}=Tn(r);return wn(e,t)}function Fn(e,r,t,o="directional"){if(t===0)return e;const u=Math.abs(t),h=Math.sign(t),x=u*Dn*h,f=o==="nearest"?t:u,m=(e-r+x)/f;let N;return o==="nearest"?N=Math.round(m):h>0?N=Math.floor(m):N=Math.ceil(m),r+N*(o==="nearest"?t:u)}function Pn(e,{step:r,minWithDefault:t,maxWithDefault:o,minWithZeroDefault:u,format:h,snapOnStep:x,small:f}){if(e===null)return e;const m=rn(e,t,o);if(r!=null&&x){if(r===0)return et(m,h);let N=u;!f&&t!==Number.MIN_SAFE_INTEGER&&(N=t);const R=Fn(m,N,r,f?"nearest":"directional");return et(R,h)}return et(m,h)}const Vn=s.forwardRef(function(r,t){const{id:o,min:u,max:h,smallStep:x=.1,step:f=1,largeStep:m=10,required:N=!1,disabled:R=!1,readOnly:E=!1,name:U,defaultValue:G,value:g,onValueChange:L,onValueCommitted:k,allowWheelScrub:q=!1,snapOnStep:P=!1,format:b,locale:p,render:W,className:Y,inputRef:l,...$}=r,{setDirty:C,validityData:H,disabled:z,setFilled:X,invalid:D,name:ee,state:O,validation:te,shouldValidateOnChange:i}=Nt(),_=z||R,Z=ee??U,[M,y]=s.useState(!1),I=u??Number.MIN_SAFE_INTEGER,j=h??Number.MAX_SAFE_INTEGER,J=u??0,v=b?.style,n=s.useRef(null),a=Ht(l,te.inputRef),T=nn({id:o}),[w,Q]=Bt({controlled:g,default:G,name:"NumberField",state:"value"}),d=w??null,oe=dt(d);Je(()=>{X(d!==null)},[X,d]);const ne=zt(),ie=dt(b),se=s.useRef(!1),ae=me((V,S)=>{se.current=!1,k?.(V,S)}),de=tt(),Ee=cn(),xe=tt(),Pe=s.useRef(!1),Ve=s.useRef(0),pe=s.useRef(!0),Ne=s.useRef(null),he=s.useRef(()=>{}),[F,le]=s.useState(()=>g!==void 0?Rt(d,p,b):we(d,p,b)),[Le,Ut]=s.useState("numeric"),ct=me(()=>{const{decimal:V,group:S,currency:B,literal:K}=at(p,b),A=new Set;xn.forEach(re=>A.add(re)),V&&A.add(V),S&&(A.add(S),bt.test(S)&&A.add(" "));const ue=v==="percent"||v==="unit"&&b?.unit==="percent",ve=v==="percent"||v==="unit"&&b?.unit==="permille";return ue&&_t.forEach(re=>A.add(re)),ve&&vt.forEach(re=>A.add(re)),v==="currency"&&B&&A.add(B),K&&(Array.from(K).forEach(re=>A.add(re)),bt.test(K)&&A.add(" ")),Nn.forEach(re=>A.add(re)),I<0&&Sn.forEach(re=>A.add(re)),A}),Se=me(V=>V?.altKey?x:V?.shiftKey?m:f),Me=me((V,S)=>{const B=S.event,K=S.direction,A=Pn(V,{step:K?Se(B)*K:void 0,format:ie.current,minWithDefault:I,maxWithDefault:j,minWithZeroDefault:J,snapOnStep:P,small:B?.altKey??!1});if(A!==d||V!==d||pe.current===!1){if(Ne.current=A,L?.(A,S),S.isCanceled)return;Q(A),C(A!==H.initialValue),se.current=!0}pe.current&&le(we(A,p,b)),ne()}),_e=me((V,{direction:S,currentValue:B,event:K,reason:A})=>{const ue=B??oe.current,ve=typeof ue=="number"?ue+V*S:Math.max(0,u??0);Me(ve,ce(A,K,void 0,{direction:S}))}),ye=me(()=>{xe.clear(),de.clear(),Ee.clear(),he.current(),Ve.current=0}),lt=me((V,S)=>{if(ye(),!n.current)return;const B=He(n.current);function K(ue){ue.preventDefault()}B.addEventListener("contextmenu",K),he.current=()=>{B.removeEventListener("contextmenu",K)},B.addEventListener("pointerup",ue=>{Pe.current=!1,ye();const ve=Ne.current??oe.current;ae(ve,Ie(V?"increment":"decrement",ue))},{once:!0});function A(){const ue=Se(S)??Fe;_e(ue,{direction:V?1:-1,event:S,reason:V?"increment-press":"decrement-press"})}A(),de.start(In,()=>{Ee.start(Cn,A)})});Je(function(){if(!pe.current)return;const S=g!==void 0?Rt(d,p,b):we(d,p,b);S!==F&&le(S)}),Je(function(){if(!Zt)return;let S="text";I>=0&&(S="decimal"),Ut(S)},[I,v]),s.useEffect(()=>()=>ye(),[ye]),s.useEffect(function(){const S=n.current;if(_||E||!q||!S)return;function B(K){if(K.ctrlKey||We(n.current).activeElement!==n.current)return;K.preventDefault();const A=Se(K)??Fe;_e(A,{direction:K.deltaY>0?-1:1,event:K,reason:"wheel"})}return S.addEventListener("wheel",B),()=>{S.removeEventListener("wheel",B)}},[q,_e,_,E,m,f,Se]);const qe=s.useMemo(()=>({...O,disabled:_,readOnly:E,required:N,value:d,inputValue:F,scrubbing:M}),[O,_,E,N,d,F,M]),Gt=s.useMemo(()=>({inputRef:n,inputValue:F,value:d,startAutoChange:lt,stopAutoChange:ye,minWithDefault:I,maxWithDefault:j,disabled:_,readOnly:E,id:T,setValue:Me,incrementValue:_e,getStepAmount:Se,allowInputSyncRef:pe,formatOptionsRef:ie,valueRef:oe,lastChangedValueRef:Ne,hasPendingCommitRef:se,isPressedRef:Pe,intentionalTouchCheckTimeout:xe,movesAfterTouchRef:Ve,name:Z,required:N,invalid:D,inputMode:Le,getAllowedNonNumericKeys:ct,min:u,max:h,setInputValue:le,locale:p,isScrubbing:M,setIsScrubbing:y,state:qe,onValueCommitted:ae}),[n,F,d,lt,ye,I,j,_,E,T,Me,_e,Se,ie,oe,xe,Z,N,D,Le,ct,u,h,le,p,M,qe,ae]),Wt=ge("div",r,{ref:t,state:qe,props:$,stateAttributesMapping:Re});return c.jsxs(Ct.Provider,{value:Gt,children:[Wt,c.jsx("input",{...te.getInputValidationProps({onChange(V){if(V.nativeEvent.defaultPrevented)return;const S=V.currentTarget.valueAsNumber,B=Number.isNaN(S)?null:S,K=ce(sn,V.nativeEvent);C(B!==H.initialValue),Me(B,K),i()&&te.commit(B)}}),ref:a,type:"number",name:Z,value:d??"",min:u,max:h,step:f,disabled:_,required:N,"aria-hidden":!0,tabIndex:-1,style:Xt})]})});function Rt(e,r,t){return t?.maximumFractionDigits!=null||t?.minimumFractionDigits!=null?we(e,r,t):St(e,r,t)}const Ln=s.forwardRef(function(r,t){const{render:o,className:u,...h}=r,{state:x}=Ae();return ge("div",r,{ref:t,state:x,props:[{role:"group"},h],stateAttributesMapping:Re})});function jt(e){const{allowInputSyncRef:r,disabled:t,formatOptionsRef:o,getStepAmount:u,id:h,incrementValue:x,inputRef:f,inputValue:m,intentionalTouchCheckTimeout:N,isIncrement:R,isPressedRef:E,locale:U,maxWithDefault:G,minWithDefault:g,movesAfterTouchRef:L,readOnly:k,setValue:q,startAutoChange:P,stopAutoChange:b,value:p,valueRef:W,lastChangedValueRef:Y,onValueCommitted:l}=e,$=s.useRef({x:0,y:0}),C=s.useRef(!1),H=s.useRef(!1),z=s.useRef(""),X=p!=null&&p<=g,D=p!=null&&p>=G,ee=R?"increment-press":"decrement-press";function O(i){r.current=!0;const _=Ce(m,U,o.current);_!==null&&(W.current=_,q(_,ce(ee,i,void 0,{direction:R?1:-1})))}return{disabled:t||(R?D:X),"aria-readonly":k||void 0,"aria-label":R?"Increase":"Decrease","aria-controls":h,tabIndex:-1,style:{WebkitUserSelect:"none",userSelect:"none"},onTouchStart(){C.current=!0},onTouchEnd(){C.current=!1},onClick(i){const _=t||k||(R?D:X);if(i.defaultPrevented||_||(z.current==="touch"?H.current:i.detail!==0))return;O(i.nativeEvent);const Z=u(i)??Fe,M=W.current;x(Z,{direction:R?1:-1,event:i.nativeEvent,reason:ee});const y=Y.current??W.current;y!==M&&l(y,Ie(ee,i.nativeEvent))},onPointerDown(i){const _=!i.button||i.button===0,Z=t||(R?D:X);i.defaultPrevented||k||!_||Z||(z.current=i.pointerType,H.current=!1,E.current=!0,$.current={x:i.clientX,y:i.clientY},O(i.nativeEvent),i.pointerType!=="touch"?(i.preventDefault(),f.current?.focus(),P(R,i)):N.start(An,()=>{const M=L.current;L.current=0,E.current&&M!=null&&M<_n?(P(R,i),H.current=!0):(H.current=!1,b())}))},onPointerUp(i){i.pointerType==="touch"&&(E.current=!1)},onPointerMove(i){if(t||k||(R?D:X)||i.pointerType!=="touch"||!E.current)return;L.current!=null&&(L.current+=1);const{x:Z,y:M}=$.current,y=Z-i.clientX,I=M-i.clientY;y**2+I**2>vn**2&&b()},onMouseEnter(i){const _=t||k||(R?D:X);i.defaultPrevented||_||!E.current||C.current||z.current==="touch"||P(R,i)},onMouseLeave(){C.current||b()},onMouseUp(){C.current||b()}}}const Mn=s.forwardRef(function(r,t){const{render:o,className:u,disabled:h=!1,nativeButton:x=!0,...f}=r,{allowInputSyncRef:m,disabled:N,formatOptionsRef:R,getStepAmount:E,id:U,incrementValue:G,inputRef:g,inputValue:L,intentionalTouchCheckTimeout:k,isPressedRef:q,locale:P,maxWithDefault:b,minWithDefault:p,movesAfterTouchRef:W,readOnly:Y,setValue:l,startAutoChange:$,state:C,stopAutoChange:H,value:z,valueRef:X,lastChangedValueRef:D,onValueCommitted:ee}=Ae(),O=h||N,te=jt({isIncrement:!0,inputRef:g,startAutoChange:$,stopAutoChange:H,minWithDefault:p,maxWithDefault:b,value:z,inputValue:L,disabled:O,readOnly:Y,id:U,setValue:l,getStepAmount:E,incrementValue:G,allowInputSyncRef:m,formatOptionsRef:R,valueRef:X,isPressedRef:q,intentionalTouchCheckTimeout:k,movesAfterTouchRef:W,locale:P,lastChangedValueRef:D,onValueCommitted:ee}),{getButtonProps:i,buttonRef:_}=yt({disabled:O,native:x}),Z=s.useMemo(()=>({...C,disabled:O}),[C,O]);return ge("button",r,{ref:[t,_],state:Z,props:[te,f,i],stateAttributesMapping:Re})}),jn=s.forwardRef(function(r,t){const{render:o,className:u,disabled:h=!1,nativeButton:x=!0,...f}=r,{allowInputSyncRef:m,disabled:N,formatOptionsRef:R,getStepAmount:E,id:U,incrementValue:G,inputRef:g,inputValue:L,intentionalTouchCheckTimeout:k,isPressedRef:q,maxWithDefault:P,minWithDefault:b,movesAfterTouchRef:p,readOnly:W,setValue:Y,startAutoChange:l,state:$,stopAutoChange:C,value:H,valueRef:z,locale:X,lastChangedValueRef:D,onValueCommitted:ee}=Ae(),O=h||N,te=jt({isIncrement:!1,inputRef:g,startAutoChange:l,stopAutoChange:C,minWithDefault:b,maxWithDefault:P,value:H,inputValue:L,disabled:O,readOnly:W,id:U,setValue:Y,getStepAmount:E,incrementValue:G,allowInputSyncRef:m,formatOptionsRef:R,valueRef:z,isPressedRef:q,intentionalTouchCheckTimeout:k,movesAfterTouchRef:p,locale:X,lastChangedValueRef:D,onValueCommitted:ee}),{getButtonProps:i,buttonRef:_}=yt({disabled:O,native:x}),Z=s.useMemo(()=>({...$,disabled:O}),[$,O]);return ge("button",r,{ref:[t,_],state:Z,props:[te,f,i],stateAttributesMapping:Re})}),kn={...tn,...Re},On=new Set(["Backspace","Delete","ArrowLeft","ArrowRight","Tab","Enter","Escape"]),Un=s.forwardRef(function(r,t){const{render:o,className:u,...h}=r,{allowInputSyncRef:x,disabled:f,formatOptionsRef:m,getAllowedNonNumericKeys:N,getStepAmount:R,id:E,incrementValue:U,inputMode:G,inputValue:g,max:L,min:k,name:q,readOnly:P,required:b,setValue:p,state:W,setInputValue:Y,locale:l,inputRef:$,value:C,onValueCommitted:H,lastChangedValueRef:z,hasPendingCommitRef:X,valueRef:D}=Ae(),{clearErrors:ee}=Jt(),{validationMode:O,setTouched:te,setFocused:i,invalid:_,shouldValidateOnChange:Z,validation:M}=Nt(),{labelId:y}=Qt(),I=s.useRef(!1),j=s.useRef(!1);return en({id:E,commit:M.commit,value:C,controlRef:$,name:q,getValue:()=>C??null}),an(C,n=>{const a=Z();if(ee(q),a&&M.commit(C),!(n===C||a)){if(j.current){j.current=!1;return}M.commit(C,!0)}}),ge("input",r,{ref:[t,$],state:W,props:[{id:E,required:b,disabled:f,readOnly:P,inputMode:G,value:g,type:"text",autoComplete:"off",autoCorrect:"off",spellCheck:"false","aria-roledescription":"Number field","aria-invalid":_||void 0,"aria-labelledby":y,suppressHydrationWarning:!0,onFocus(n){if(n.defaultPrevented||P||f||I.current)return;I.current=!0,i(!0);const a=n.currentTarget,T=a.value.length;a.setSelectionRange(T,T)},onBlur(n){if(n.defaultPrevented||P||f)return;te(!0),i(!1);const a=!x.current,T=X.current;if(x.current=!0,g.trim()===""){p(null,ce(Qe,n.nativeEvent)),O==="onBlur"&&M.commit(null),H(null,Ie(Qe,n.nativeEvent));return}const w=m.current,Q=Ce(g,l,w);if(Q===null)return;const d=w?.maximumFractionDigits!=null||w?.minimumFractionDigits!=null,oe=w?.maximumFractionDigits,ne=d&&typeof oe=="number"?Number(Q.toFixed(oe)):Q,ie=Ie(ft,n.nativeEvent),se=C!==ne,ae=a||se||T;O==="onBlur"&&M.commit(ne),se&&(j.current=!0,p(ne,ce(ft,n.nativeEvent))),ae&&H(ne,ie);const de=we(ne,l,w),Ee=St(Q,l,w);!(!d&&Q===C&&g===Ee)&&g!==de&&Y(de)},onChange(n){if(n.nativeEvent.defaultPrevented)return;x.current=!1;const a=n.target.value;if(a.trim()===""){Y(a),p(null,ce(Qe,n.nativeEvent));return}const T=N();if(!Array.from(a).every(d=>{const oe=d>="0"&&d<="9",ne=rt.test(d),ie=st.test(d),se=wt.test(d),ae=gt.test(d),de=Te.test(d);return oe||ne||ie||se||ae||de||T.has(d)}))return;if(n.isTrusted){Y(a);const d=Ce(a,l,m.current);d!==null&&p(d,ce(mt,n.nativeEvent));return}const Q=Ce(a,l,m.current);Q!==null&&(Y(a),p(Q,ce(mt,n.nativeEvent)))},onKeyDown(n){if(n.defaultPrevented||P||f)return;const a=n.nativeEvent;x.current=!0;const T=N();let w=T.has(n.key);const{decimal:Q,currency:d,percentSign:oe}=at(l,m.current),ne=n.currentTarget.selectionStart,ie=n.currentTarget.selectionEnd,se=ne===0&&ie===g.length,ae=F=>ne!=null&&ie!=null&&F>=ne&&F<ie;if(Te.test(n.key)&&Array.from(T).some(F=>Te.test(F||""))){const F=g.search(Lt),le=F!=null&&F!==-1&&ae(F);w=!(Te.test(g)||ke.test(g))||se||le}if(ke.test(n.key)&&Array.from(T).some(F=>ke.test(F||""))){const F=g.search(Mt),le=F!=null&&F!==-1&&ae(F);w=!(Te.test(g)||ke.test(g))||se||le}[Q,d,oe].forEach(F=>{if(n.key===F){const le=g.indexOf(F),Le=ae(le);w=!g.includes(F)||se||Le}});const de=n.key>="0"&&n.key<="9",Ee=rt.test(n.key),xe=st.test(n.key),Pe=gt.test(n.key),Ve=On.has(n.key);if(n.which===229||n.altKey||n.ctrlKey||n.metaKey||w||de||Ee||Pe||xe||Ve)return;const pe=Ce(g,l,m.current),Ne=R(n)??Fe;un(n);const he=Ie(De,a);n.key==="ArrowUp"?(U(Ne,{direction:1,currentValue:pe,event:a,reason:De}),H(z.current??D.current,he)):n.key==="ArrowDown"?(U(Ne,{direction:-1,currentValue:pe,event:a,reason:De}),H(z.current??D.current,he)):n.key==="Home"&&k!=null?(p(k,ce(De,a)),H(z.current??D.current,he)):n.key==="End"&&L!=null&&(p(L,ce(De,a)),H(z.current??D.current,he))},onPaste(n){if(n.defaultPrevented||P||f)return;n.preventDefault();const T=(n.clipboardData||window.Clipboard).getData("text/plain"),w=Ce(T,l,m.current);w!==null&&(x.current=!1,p(w,ce(on,n.nativeEvent)),Y(T))}},M.getValidationProps(),h],stateAttributesMapping:kn})}),kt=s.createContext(void 0);function Gn(){const e=s.useContext(kt);if(e===void 0)throw new Error(Et(44));return e}function Wn(e,r){const t=He(r),o=r.getBoundingClientRect();if(o&&e!=null)return{x:o.left-e/2,y:o.top-e/2,width:o.right+e/2,height:o.bottom+e/2};const u=t.visualViewport;return u?{x:u.offsetLeft,y:u.offsetTop,width:u.offsetLeft+u.width,height:u.offsetTop+u.height}:{x:0,y:0,width:t.document.documentElement.clientWidth,height:t.document.documentElement.clientHeight}}function $n(e,r){const t=He(e).visualViewport;if(!t)return()=>{};function o(){t&&(r.current=t.scale)}return o(),t.addEventListener("resize",o),()=>{t.removeEventListener("resize",o)}}const Hn=s.forwardRef(function(r,t){const{render:o,className:u,direction:h="horizontal",pixelSensitivity:x=2,teleportDistance:f,...m}=r,{state:N,setIsScrubbing:R,disabled:E,readOnly:U,inputRef:G,incrementValue:g,getStepAmount:L,onValueCommitted:k,lastChangedValueRef:q,valueRef:P}=Ae(),b=s.useRef(null),p=s.useRef(!1),W=s.useRef(null),Y=s.useRef({x:0,y:0}),l=s.useRef(1),$=tt(),[C,H]=s.useState(!1),[z,X]=s.useState(!1),[D,ee]=s.useState(!1);s.useEffect(()=>{if(!(!D||!W.current))return $n(W.current,l)},[D]);function O(y,I){W.current&&(W.current.style.transform=`translate3d(${y}px,${I}px,0) scale(${1/l.current})`)}const te=me(({movementX:y,movementY:I})=>{const j=W.current,J=b.current;if(!j||!J)return;const v=Wn(f,J),n=Y.current,a={x:Math.round(n.x+y),y:Math.round(n.y+I)},T=j.offsetWidth,w=j.offsetHeight;a.x+T/2<v.x?a.x=v.width-T/2:a.x+T/2>v.width&&(a.x=v.x-T/2),a.y+w/2<v.y?a.y=v.height-w/2:a.y+w/2>v.height&&(a.y=v.y-w/2),Y.current=a,O(a.x,a.y)}),i=me((y,{clientX:I,clientY:j})=>{nt.flushSync(()=>{ee(y),R(y)});const J=W.current;if(!J||!y)return;const v={x:I-J.offsetWidth/2,y:j-J.offsetHeight/2};Y.current=v,O(v.x,v.y)});s.useEffect(function(){if(!G.current||E||U||!D)return;let I=0;function j(n){function a(){try{We(b.current).exitPointerLock()}catch{}finally{p.current=!1,i(!1,n),k(q.current??P.current,Ie(pt,n))}}qt?$.start(20,a):a()}function J(n){if(!p.current)return;n.preventDefault(),te(n);const{movementX:a,movementY:T}=n;if(I+=h==="vertical"?T:a,Math.abs(I)>=x){I=0;const w=h==="vertical"?-T:a,Q=L(n)??Fe,d=w*Q;d!==0&&g(Math.abs(d),{direction:d>=0?1:-1,event:n,reason:pt})}}const v=He(G.current);return v.addEventListener("pointerup",j,!0),v.addEventListener("pointermove",J,!0),()=>{$.clear(),v.removeEventListener("pointerup",j,!0),v.removeEventListener("pointermove",J,!0)}},[E,U,g,D,L,G,i,te,h,x,q,k,P,$]),s.useEffect(function(){const I=b.current;if(!I||E||U)return;function j(J){J.touches.length===1&&J.preventDefault()}return I.addEventListener("touchstart",j),()=>{I.removeEventListener("touchstart",j)}},[E,U]);const Z=ge("span",r,{ref:[t,b],state:N,props:[{role:"presentation",style:{touchAction:"none",WebkitUserSelect:"none",userSelect:"none"},async onPointerDown(y){const I=!y.button||y.button===0;if(y.defaultPrevented||U||!I||E)return;const j=y.pointerType==="touch";if(H(j),y.pointerType==="mouse"&&(y.preventDefault(),G.current?.focus()),p.current=!0,i(!0,y.nativeEvent),!j&&!xt)try{await We(b.current).body.requestPointerLock(),X(!1)}catch{X(!0)}finally{p.current&&nt.flushSync(()=>{i(!0,y.nativeEvent)})}}},m],stateAttributesMapping:Re}),M=s.useMemo(()=>({isScrubbing:D,isTouchInput:C,isPointerLockDenied:z,scrubAreaCursorRef:W,scrubAreaRef:b,direction:h,pixelSensitivity:x,teleportDistance:f}),[D,C,z,h,x,f]);return c.jsx(kt.Provider,{value:M,children:Z})}),Bn=s.forwardRef(function(r,t){const{render:o,className:u,...h}=r,{state:x}=Ae(),{isScrubbing:f,isTouchInput:m,isPointerLockDenied:N,scrubAreaCursorRef:R}=Gn(),[E,U]=s.useState(null),g=ge("span",r,{enabled:f&&!xt&&!m&&!N,ref:[t,R,U],state:x,props:[{role:"presentation",style:{position:"fixed",top:0,left:0,pointerEvents:"none"}},h],stateAttributesMapping:Re});return g&&nt.createPortal(g,We(E).body)}),Kn="_Root_1shgk_1",Yn="_ScrubArea_1shgk_9",zn="_ScrubAreaCursor_1shgk_22",Xn="_Label_1shgk_30",Zn="_Group_1shgk_39",qn="_Input_1shgk_44",Jn="_Decrement_1shgk_72",Qn="_Increment_1shgk_73",fe={Root:Kn,ScrubArea:Yn,ScrubAreaCursor:zn,Label:Xn,Group:Zn,Input:qn,Decrement:Jn,Increment:Qn},Be=s.forwardRef(({className:e,...r},t)=>c.jsx(Vn,{ref:t,className:be(e,fe.Root),...r}));Be.displayName="NumberFieldRoot";const Ke=s.forwardRef(({className:e,...r},t)=>c.jsx(Hn,{ref:t,className:be(e,fe.ScrubArea),...r}));Ke.displayName="NumberFieldScrubArea";const ut=s.forwardRef(({className:e,...r},t)=>c.jsx(Bn,{ref:t,className:be(e,fe.ScrubAreaCursor),...r}));ut.displayName="NumberFieldScrubAreaCursor";const Ye=s.forwardRef(({className:e,...r},t)=>c.jsx(Ln,{ref:t,className:be(e,fe.Group),...r}));Ye.displayName="NumberFieldGroup";const ze=s.forwardRef(({className:e,...r},t)=>c.jsx(Un,{ref:t,className:be(e,fe.Input),...r}));ze.displayName="NumberFieldInput";const Xe=s.forwardRef(({className:e,...r},t)=>c.jsx(jn,{ref:t,className:be(e,fe.Decrement),...r}));Xe.displayName="NumberFieldDecrement";const Ze=s.forwardRef(({className:e,...r},t)=>c.jsx(Mn,{ref:t,className:be(e,fe.Increment),...r}));Ze.displayName="NumberFieldIncrement";Be.__docgenInfo={description:"",methods:[],displayName:"NumberFieldRoot"};Ke.__docgenInfo={description:"",methods:[],displayName:"NumberFieldScrubArea"};ut.__docgenInfo={description:"",methods:[],displayName:"NumberFieldScrubAreaCursor"};Ye.__docgenInfo={description:"",methods:[],displayName:"NumberFieldGroup"};ze.__docgenInfo={description:"",methods:[],displayName:"NumberFieldInput"};Xe.__docgenInfo={description:"",methods:[],displayName:"NumberFieldDecrement"};Ze.__docgenInfo={description:"",methods:[],displayName:"NumberFieldIncrement"};const Tr={title:"Components/Number Field",decorators:[e=>c.jsx("div",{style:{width:"100%",maxWidth:320,margin:"0 auto"},children:c.jsx(e,{})})]},Ot=`typesetting-label typesetting-tsumegumi ${fe.Label}`,er=()=>{const e=s.useId();return c.jsxs(Be,{id:e,defaultValue:12,min:0,max:120,children:[c.jsxs(Ke,{children:[c.jsx("label",{htmlFor:e,className:Ot,children:"数量"}),c.jsx(ut,{children:c.jsx(nr,{})})]}),c.jsxs(Ye,{children:[c.jsx(Xe,{"aria-label":"減らす",children:c.jsx(Ge,{name:"minus",size:16})}),c.jsx(ze,{}),c.jsx(Ze,{"aria-label":"増やす",children:c.jsx(Ge,{name:"plus",size:16})})]})]})},Oe={render:()=>c.jsx(er,{})},tr=()=>{const e=s.useId();return c.jsxs(Be,{id:e,defaultValue:4,disabled:!0,children:[c.jsx(Ke,{children:c.jsx("label",{htmlFor:e,className:Ot,children:"個数"})}),c.jsxs(Ye,{children:[c.jsx(Xe,{"aria-label":"減らす",children:c.jsx(Ge,{name:"minus",size:16})}),c.jsx(ze,{}),c.jsx(Ze,{"aria-label":"増やす",children:c.jsx(Ge,{name:"plus",size:16})})]})]})},Ue={render:()=>c.jsx(tr,{})};function nr(e){return c.jsx("svg",{width:"26",height:"14",viewBox:"0 0 24 14",fill:"black",stroke:"white",xmlns:"http://www.w3.org/2000/svg",...e,children:c.jsx("path",{d:"M19.5 5.5L6.49737 5.51844V2L1 6.9999L6.5 12L6.49737 8.5L19.5 8.5V12L25 6.9999L19.5 2V5.5Z"})})}Oe.parameters={...Oe.parameters,docs:{...Oe.parameters?.docs,source:{originalSource:`{
  render: () => <DefaultStory />
}`,...Oe.parameters?.docs?.source}}};Ue.parameters={...Ue.parameters,docs:{...Ue.parameters?.docs,source:{originalSource:`{
  render: () => <DisabledStory />
}`,...Ue.parameters?.docs?.source}}};const wr=["Default","Disabled"];export{Oe as Default,Ue as Disabled,wr as __namedExportsOrder,Tr as default};
