import{j as u}from"./jsx-runtime-u17CrQMm.js";import{r as n}from"./iframe-DCTwtVEg.js";import{I as Be}from"./createReactComponent-BVoNDKa1.js";import{f as D,b as Y,N as je,a as Le,c as we,e as Fe,u as A,m as Oe}from"./mergeClassName-CGuaxy8D.js";import{I as Ge}from"./IconCheck-Dqggjh8y.js";import{u as Te}from"./useControlled-C-9u02Ss.js";import{u as qe}from"./useStableCallback-BlvU505D.js";import{v as $e}from"./visuallyHidden-CbwUG2x5.js";import{f as ee,b as He,u as ze,a as Je,c as Ke}from"./LabelableContext-Bcab7PGA.js";import{u as Q}from"./useBaseUiId-DBEJHERS.js";import{u as Ue}from"./useButton-BBNhskDs.js";import{u as We}from"./FieldItemContext-guU9c44Z.js";import{c as Xe,n as Ye}from"./createBaseUIEventDetails-BDhVKG5E.js";import{u as Qe}from"./useValueChanged-DWOD2Xr9.js";import{u as Ze,t as De}from"./useOpenChangeComplete-CAiTarFg.js";import{u as Ae}from"./useTransitionStatus-BGkF8oIU.js";const et=n.createContext(void 0);function tt(e=!0){const r=n.useContext(et);if(r===void 0&&!e)throw new Error(D(3));return r}let Z=(function(e){return e.checked="data-checked",e.unchecked="data-unchecked",e.disabled="data-disabled",e.readonly="data-readonly",e.required="data-required",e.valid="data-valid",e.invalid="data-invalid",e.touched="data-touched",e.dirty="data-dirty",e.filled="data-filled",e.focused="data-focused",e})({});function te(e){return n.useMemo(()=>({checked(r){return e.indeterminate?{}:r?{[Z.checked]:""}:{[Z.unchecked]:""}},...ee}),[e.indeterminate])}const ne=n.createContext(void 0);function nt(){const e=n.useContext(ne);if(e===void 0)throw new Error(D(14));return e}const ot="data-parent",at=n.forwardRef(function(r,x){const{checked:I,className:ae,defaultChecked:B=!1,disabled:j=!1,id:i,indeterminate:d=!1,inputRef:P,name:L,onCheckedChange:y,parent:s=!1,readOnly:f=!1,render:T,required:p=!1,uncheckedValue:_,value:R,nativeButton:re=!1,...se}=r,{clearErrors:ie}=He(),{disabled:de,name:ce,setDirty:le,setFilled:w,setFocused:q,setTouched:ue,state:$,validationMode:fe,validityData:pe,shouldValidateOnChange:me,validation:he}=ze(),Ce=We(),{labelId:xe,controlId:ke,setControlId:E,getDescriptionProps:H}=Je(),t=tt(),k=t?.parent,V=k&&t.allValues,m=de||Ce.disabled||t?.disabled||j,h=ce??L,a=R??h,z=Q(),ve=Q();let v=ke;V?v=s?ve:`${k.id}-${a}`:i&&(v=i);let F={};V&&(s?F=t.parent.getParentProps():a&&(F=t.parent.getChildProps(a)));const ge=qe(y),{checked:J=I,indeterminate:M=d,onCheckedChange:be,...Ie}=F,C=t?.value,K=t?.setValue,U=t?.defaultValue,O=n.useRef(null),{getButtonProps:Pe,buttonRef:ye}=Ue({disabled:m,native:re}),c=t?.validation??he,[o,_e]=Te({controlled:a&&C&&!s?C.includes(a):J,default:a&&U&&!s?U.includes(a):B,name:"Checkbox",state:"checked"});Y(()=>{if(E!==je)return E(v),()=>{E(void 0)}},[v,t,E,s]),Ke({enabled:!t,id:z,commit:c.commit,value:o,controlRef:O,name:h,getValue:()=>o});const g=n.useRef(null),Re=Le(P,g,c.inputRef);Y(()=>{g.current&&(g.current.indeterminate=M,o&&w(!0))},[o,M,w]),Qe(o,()=>{t&&!s||(ie(h),w(o),le(o!==pe.initialValue),me()?c.commit(o):c.commit(o,!0))});const Ee=we({checked:o,disabled:m,name:s?void 0:h,id:v??void 0,required:p,ref:Re,style:$e,tabIndex:-1,type:"checkbox","aria-hidden":!0,onChange(l){if(l.nativeEvent.defaultPrevented)return;const N=l.target.checked,S=Xe(Ye,l.nativeEvent);if(be?.(N,S),ge(N,S),!S.isCanceled&&(_e(N),a&&C&&K&&!s)){const Ne=N?[...C,a]:C.filter(Se=>Se!==a);K(Ne,S)}},onFocus(){O.current?.focus()}},R!==void 0?{value:(t?o&&R:R)||""}:Fe,H,t?c.getValidationProps:c.getInputValidationProps),W=V?!!J:o,X=V&&M||d;n.useEffect(()=>{k&&a&&k.disabledStatesRef.current.set(a,m)},[k,m,a]);const G=n.useMemo(()=>({...$,checked:W,disabled:m,readOnly:f,required:p,indeterminate:X}),[$,W,m,f,p,X]),Ve=te(G),Me=A("span",r,{state:G,ref:[ye,O,x,t?.registerControlRef],props:[{id:z,role:"checkbox","aria-checked":M?"mixed":o,"aria-readonly":f||void 0,"aria-required":p||void 0,"aria-labelledby":xe,[ot]:s?"":void 0,onFocus(){q(!0)},onBlur(){const l=g.current;l&&(ue(!0),q(!1),fe==="onBlur"&&c.commit(t?C:l.checked))},onClick(l){f||m||(l.preventDefault(),g.current?.click())}},H,c.getValidationProps,se,Ie,Pe],stateAttributesMapping:Ve});return u.jsxs(ne.Provider,{value:G,children:[Me,!o&&!t&&h&&!s&&_!==void 0&&u.jsx("input",{type:"hidden",name:h,value:_}),u.jsx("input",{...Ee})]})}),rt=n.forwardRef(function(r,x){const{render:I,className:ae,keepMounted:B=!1,...j}=r,i=nt(),d=i.checked||i.indeterminate,{transitionStatus:P,setMounted:L}=Ae(d),y=n.useRef(null),s=n.useMemo(()=>({...i,transitionStatus:P}),[i,P]);Ze({open:d,ref:y,onComplete(){d||L(!1)}});const f=te(i),T=n.useMemo(()=>({...f,...De,...ee}),[f]),p=B||d,_=A("span",r,{enabled:p,ref:[x,y],state:s,stateAttributesMapping:T,props:j});return p?_:null}),st="_Label_k81lx_1",it="_Checkbox_k81lx_9",dt="_Box_k81lx_45",ct="_StateLayer_k81lx_56",lt="_Indicator_k81lx_69",ut="_Icon_k81lx_81",b={Label:st,Checkbox:it,Box:dt,StateLayer:ct,Indicator:lt,Icon:ut},oe=n.forwardRef(({className:e,icon:r,...x},I)=>u.jsxs(at,{ref:I,className:Oe(e,b.Checkbox),...x,children:[u.jsx("span",{"aria-hidden":"true",className:b.Box}),u.jsx("span",{"aria-hidden":"true",className:b.StateLayer}),u.jsx(rt,{className:b.Indicator,children:r??u.jsx(Be,{icon:Ge,size:12,className:b.Icon})})]}));oe.displayName="Checkbox";oe.__docgenInfo={description:"",methods:[],displayName:"Checkbox",props:{icon:{required:!1,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""}}};export{et as C,ot as P,oe as a,b as s};
