import{j as s}from"./jsx-runtime-u17CrQMm.js";import{r as t}from"./iframe-DXOI1E9u.js";import{I as _e}from"./Icon-UrFbKgmo.js";import{f as ke,E as bt,d as Zt,b as ue,c as Vt,a as Ct,u as de,m as be}from"./mergeClassName-4BJ6eZC9.js";import{S as Jt}from"./Separator-DGhCyRkV.js";import{a as je,c as pt,d as Qt,f as ft,u as eo,e as to,g as oo,b as ct,r as so,l as ze}from"./Listbox.module-B-sQ_LHY.js";import{v as no}from"./visuallyHidden-CbwUG2x5.js";import{u as yt}from"./useControlled-DEAayXAn.js";import{u as we}from"./useStableCallback-BG29bmz1.js";import{u as ht}from"./useValueAsRef-BQ2eVG2U.js";import{b as ro,u as Et,a as Nt,c as lo,f as io}from"./LabelableContext-DWdgtc_u.js";import{u as ao}from"./useLabelableId-Bqos8ZU6.js";import{u as St}from"./useTransitionStatus-BSiOYNFN.js";import{c as N,u as g,S as co,p as uo,t as po,F as fo,D as mo,a as jt}from"./popupStateMapping-CpSo4hCe.js";import{c as Ie,n as _t,o as go,h as ho,z as So,f as ut}from"./createBaseUIEventDetails-DuvT8Jvz.js";import{u as Qe,t as Lt}from"./useOpenChangeComplete-EYYQQ2xa.js";import{u as xo}from"./useValueChanged-_q9BmO9Y.js";import{u as vo,a as Ro,I as wo,F as Io}from"./InternalBackdrop-BfTmp1FM.js";import{u as bo,a as yo}from"./useAnchorPositioning-CTl2tFHh.js";import{u as To}from"./useClick-mxHimsfE.js";import{u as Mo,a as Ao}from"./useInteractions-BirjbM4K.js";import{u as Po}from"./useListNavigation-WU8XylIB.js";import{u as Vo}from"./useTypeahead-DU3vvgUm.js";import{o as mt}from"./owner-CvMgaIeV.js";import{u as Ve}from"./useTimeout-JrQkYQHa.js";import{g as Co}from"./getPseudoElementBounds-L0mGlMFL.js";import{u as Ht}from"./useButton-gvMzLzXO.js";import{b as Eo,c as Tt}from"./element-C8qsRkBu.js";import{i as No}from"./inertValue-210nwfDp.js";import{C as jo,u as _o,I as Lo}from"./useCompositeListItem-DO9Q9utO.js";import{r as Ho}from"./index-DrrilDOe.js";import{c as Oo}from"./detectBrowser-CYw91I8L.js";import{u as Do}from"./useAnimationFrame-CLJ86gM1.js";import{s as gt}from"./styles-CrCElcc7.js";import{u as Bo}from"./ToolbarRootContext-Bxe9jB8k.js";import{C as Fo}from"./composite-CJk-2jGs.js";import{g as Uo}from"./getDisabledMountTransitionStyles-B37M8LbV.js";import{b as Mt}from"./floating-ui.utils.dom-CWuwp5es.js";import{u as ko}from"./useBaseUiId-DPGNyegz.js";import"./preload-helper-ClwkVg-s.js";import"./useId-vWe4oqRw.js";import"./event-CNRsvx7q.js";import"./floating-ui.utils-CtlI5I81.js";import"./DirectionContext-B2G4FrAD.js";import"./constants-CNjsXAL1.js";import"./composite-BpyLfiE4.js";import"./useOnMount-i2UvWo5T.js";import"./index-CpQvntHP.js";const Ot=t.createContext(null),Dt=t.createContext(null);function ge(){const e=t.useContext(Ot);if(e===null)throw new Error(ke(60));return e}function Bt(){const e=t.useContext(Dt);if(e===null)throw new Error(ke(61));return e}const f={id:N(e=>e.id),modal:N(e=>e.modal),multiple:N(e=>e.multiple),items:N(e=>e.items),itemToStringLabel:N(e=>e.itemToStringLabel),itemToStringValue:N(e=>e.itemToStringValue),isItemEqualToValue:N(e=>e.isItemEqualToValue),value:N(e=>e.value),open:N(e=>e.open),mounted:N(e=>e.mounted),forceMount:N(e=>e.forceMount),transitionStatus:N(e=>e.transitionStatus),openMethod:N(e=>e.openMethod),activeIndex:N(e=>e.activeIndex),selectedIndex:N(e=>e.selectedIndex),isActive:N((e,o)=>e.activeIndex===o),isSelected:N((e,o,n)=>{const r=e.isItemEqualToValue,C=e.value;return e.multiple?Array.isArray(C)&&C.some(i=>pt(i,n,r)):e.selectedIndex===o&&e.selectedIndex!==null?!0:pt(C,n,r)}),isSelectedByFocus:N((e,o)=>e.selectedIndex===o),popupProps:N(e=>e.popupProps),triggerProps:N(e=>e.triggerProps),triggerElement:N(e=>e.triggerElement),positionerElement:N(e=>e.positionerElement),listElement:N(e=>e.listElement),scrollUpArrowVisible:N(e=>e.scrollUpArrowVisible),scrollDownArrowVisible:N(e=>e.scrollDownArrowVisible),hasScrollArrows:N(e=>e.hasScrollArrows),serializedValue:N(e=>{const{multiple:o,value:n,itemToStringValue:r}=e;return o&&Array.isArray(n)&&n.length===0?"":je(n,r)})};function zo(e){const{id:o,value:n,defaultValue:r=null,onValueChange:C,open:i,defaultOpen:d=!1,onOpenChange:l,name:h,disabled:R=!1,readOnly:w=!1,required:y=!1,modal:v=!0,actionsRef:$,inputRef:E,onOpenChangeComplete:k,items:z,multiple:T=!1,itemToStringLabel:j,itemToStringValue:c,isItemEqualToValue:D=Qt,highlightItemOnHover:ee=!0,children:oe}=e,{clearErrors:L}=ro(),{setDirty:_,shouldValidateOnChange:ae,validityData:Y,setFilled:M,name:J,disabled:q,validation:u}=Et(),{controlId:a}=Nt(),V=ao({id:o}),B=q||R,I=J??h,[p,H]=yt({controlled:n,default:T?r??bt:r,name:"Select",state:"value"}),[A,K]=yt({controlled:i,default:d,name:"Select",state:"open"}),P=t.useRef([]),W=t.useRef([]),G=t.useRef(null),m=t.useRef(null),S=t.useRef(0),F=t.useRef(null),U=t.useRef([]),ne=t.useRef(!1),ce=t.useRef(!1),re=t.useRef(null),le=t.useRef({allowSelectedMouseUp:!1,allowUnselectedMouseUp:!1}),ye=t.useRef(!1),{mounted:ie,setMounted:O,transitionStatus:pe}=St(A),{openMethod:he,triggerProps:X,reset:Z}=vo(A),x=Zt(()=>new co({id:V,modal:v,multiple:T,itemToStringLabel:j,itemToStringValue:c,isItemEqualToValue:D,value:p,open:A,mounted:ie,transitionStatus:pe,items:z,forceMount:!1,openMethod:null,activeIndex:null,selectedIndex:null,popupProps:{},triggerProps:{},triggerElement:null,positionerElement:null,listElement:null,scrollUpArrowVisible:!1,scrollDownArrowVisible:!1,hasScrollArrows:!1})).current,fe=g(x,f.activeIndex),Se=g(x,f.selectedIndex),xe=g(x,f.triggerElement),se=g(x,f.positionerElement),Le=t.useMemo(()=>T&&Array.isArray(p)&&p.length===0?"":je(p,c),[T,p,c]),nt=t.useMemo(()=>T&&Array.isArray(p)?p.map(b=>je(b,c)):je(p,c),[T,p,c]),$e=ht(x.state.triggerElement);lo({id:V,commit:u.commit,value:p,controlRef:$e,name:I,getValue:()=>nt});const He=t.useRef(p);ue(()=>{p!==He.current&&x.set("forceMount",!0)},[x,p]),ue(()=>{M(p!==null)},[p,M]),ue(function(){if(A)return;const Q=U.current;if(T){const Ae=Array.isArray(p)?p:[];if(Ae.length===0){x.set("selectedIndex",null);return}const Re=Ae[Ae.length-1],Ge=ft(Q,Re,D);x.set("selectedIndex",Ge===-1?null:Ge);return}const Me=ft(Q,p,D);x.set("selectedIndex",Me===-1?null:Me)},[T,A,p,U,D,x]),xo(p,()=>{L(I),_(p!==Y.initialValue),ae()?u.commit(p):u.commit(p,!0)});const Ce=we((b,Q)=>{if(l?.(b,Q),!Q.isCanceled&&(K(b),!b&&x.state.activeIndex!==null)){const Me=P.current[x.state.activeIndex];queueMicrotask(()=>{Me?.setAttribute("tabindex","-1")})}}),Ee=we(()=>{O(!1),x.set("activeIndex",null),Z(),k?.(!1)});Qe({enabled:!$,open:A,ref:G,onComplete(){A||Ee()}}),t.useImperativeHandle($,()=>({unmount:Ee}),[Ee]);const Te=we((b,Q)=>{C?.(b,Q),!Q.isCanceled&&H(b)}),me=we(()=>{const b=x.state.listElement||G.current;if(!b)return;const Q=b.scrollTop,Me=b.scrollTop+b.clientHeight,Ae=Q>1,Re=Me<b.scrollHeight-1;x.state.scrollUpArrowVisible!==Ae&&x.set("scrollUpArrowVisible",Ae),x.state.scrollDownArrowVisible!==Re&&x.set("scrollDownArrowVisible",Re)}),ve=bo({open:A,onOpenChange:Ce,elements:{reference:xe,floating:se}}),Oe=To(ve,{enabled:!w&&!B,event:"mousedown"}),qe=Mo(ve,{bubbles:!1}),rt=Po(ve,{enabled:!w&&!B,listRef:P,activeIndex:fe,selectedIndex:Se,disabledIndices:bt,onNavigate(b){b===null&&!A||x.set("activeIndex",b)},focusItemOnHover:!1}),lt=Vo(ve,{enabled:!w&&!B&&(A||!T),listRef:W,activeIndex:fe,selectedIndex:Se,onMatch(b){A?x.set("activeIndex",b):Te(U.current[b],Ie("none"))},onTypingChange(b){ne.current=b}}),{getReferenceProps:De,getFloatingProps:Ne,getItemProps:We}=Ao([Oe,qe,rt,lt]),Be=t.useMemo(()=>Vt(De(),X),[De,X]);eo(()=>{x.update({popupProps:Ne(),triggerProps:Be})}),ue(()=>{x.update({id:V,modal:v,multiple:T,value:p,open:A,mounted:ie,transitionStatus:pe,popupProps:Ne(),triggerProps:Be,items:z,itemToStringLabel:j,itemToStringValue:c,isItemEqualToValue:D,openMethod:he})},[x,V,v,T,p,A,ie,pe,Ne,Be,z,j,c,D,he]);const Pe=t.useMemo(()=>({store:x,name:I,required:y,disabled:B,readOnly:w,multiple:T,itemToStringLabel:j,itemToStringValue:c,highlightItemOnHover:ee,setValue:Te,setOpen:Ce,listRef:P,popupRef:G,scrollHandlerRef:m,handleScrollArrowVisibility:me,scrollArrowsMountedCountRef:S,getItemProps:We,events:ve.context.events,valueRef:F,valuesRef:U,labelsRef:W,typingRef:ne,selectionRef:le,selectedItemTextRef:re,validation:u,onOpenChangeComplete:k,keyboardActiveRef:ce,alignItemWithTriggerActiveRef:ye,initialValueRef:He}),[x,I,y,B,w,T,j,c,ee,Te,Ce,We,ve.context.events,u,k,me]),Fe=Ct(E,u.inputRef),it=T&&Array.isArray(p)&&p.length>0,at=t.useMemo(()=>!T||!Array.isArray(p)||!I?null:p.map(b=>{const Q=je(b,c);return s.jsx("input",{type:"hidden",name:I,value:Q},Q)}),[T,p,I,c]);return s.jsx(Ot.Provider,{value:Pe,children:s.jsxs(Dt.Provider,{value:ve,children:[oe,s.jsx("input",{...u.getInputValidationProps({onFocus(){x.state.triggerElement?.focus()},onChange(b){if(b.nativeEvent.defaultPrevented)return;const Q=b.target.value,Me=Ie(_t,b.nativeEvent);function Ae(){if(T)return;const Re=U.current.find(Ge=>je(Ge,c).toLowerCase()===Q.toLowerCase());Re!=null&&(_(Re!==Y.initialValue),Te(Re,Me),ae()&&u.commit(Re))}x.set("forceMount",!0),queueMicrotask(Ae)}}),id:o||a||void 0,name:T?void 0:I,value:Le,disabled:B,required:y&&!it,readOnly:w,ref:Fe,style:no,tabIndex:-1,"aria-hidden":!0}),at]})})}const Ye=2,$o={...uo,...io,value:()=>null},qo=t.forwardRef(function(o,n){const{render:r,className:C,disabled:i=!1,nativeButton:d=!0,...l}=o,{setTouched:h,setFocused:R,validationMode:w,state:y,disabled:v}=Et(),{labelId:$}=Nt(),{store:E,setOpen:k,selectionRef:z,validation:T,readOnly:j,alignItemWithTriggerActiveRef:c,disabled:D,keyboardActiveRef:ee}=ge(),oe=v||D||i,L=g(E,f.open),_=g(E,f.value),ae=g(E,f.triggerProps),Y=g(E,f.positionerElement),M=g(E,f.listElement),J=g(E,f.serializedValue),q=ht(Y),u=t.useRef(null),a=Ve(),V=Ve(),{getButtonProps:B,buttonRef:I}=Ht({disabled:oe,native:d}),p=we(m=>{E.set("triggerElement",m)}),H=Ct(n,u,I,p),A=Ve(),K=Ve();t.useEffect(()=>{if(L)return K.start(200,()=>{z.current.allowUnselectedMouseUp=!0,A.start(200,()=>{z.current.allowSelectedMouseUp=!0})}),()=>{A.clear(),K.clear()};z.current={allowSelectedMouseUp:!1,allowUnselectedMouseUp:!1},V.clear()},[L,z,V,A,K]);const P=t.useMemo(()=>M?.id??Eo(Y)?.id,[M,Y]),W=Vt(ae,{role:"combobox","aria-expanded":L?"true":"false","aria-haspopup":"listbox","aria-controls":L?P:void 0,"aria-labelledby":$,"aria-readonly":j||void 0,tabIndex:oe?-1:0,ref:H,onFocus(m){R(!0),L&&c.current&&k(!1,Ie(go,m.nativeEvent)),a.start(0,()=>{E.set("forceMount",!0)})},onBlur(){h(!0),R(!1),w==="onBlur"&&T.commit(_)},onPointerMove(){ee.current=!1},onKeyDown(){ee.current=!0},onMouseDown(m){if(L)return;const S=mt(m.currentTarget);function F(U){if(!u.current)return;const ne=U.target;if(Tt(u.current,ne)||Tt(q.current,ne)||ne===u.current)return;const ce=Co(u.current);U.clientX>=ce.left-Ye&&U.clientX<=ce.right+Ye&&U.clientY>=ce.top-Ye&&U.clientY<=ce.bottom+Ye||k(!1,Ie(ho,U))}V.start(0,()=>{S.addEventListener("mouseup",F,{once:!0})})}},T.getValidationProps,l,B);W.role="combobox";const G=t.useMemo(()=>({...y,open:L,disabled:oe,value:_,readOnly:j,placeholder:!J}),[y,L,oe,_,j,J]);return de("button",o,{ref:[n,u],state:G,stateAttributesMapping:$o,props:W})}),Wo={value:()=>null},Ft=t.forwardRef(function(o,n){const{className:r,render:C,children:i,...d}=o,{store:l,valueRef:h}=ge(),R=g(l,f.value),w=g(l,f.items),y=g(l,f.itemToStringLabel),v=g(l,f.serializedValue),$=t.useMemo(()=>({value:R,placeholder:!v}),[R,v]),E=typeof i=="function"?i(R):i??(Array.isArray(R)?to(R,y):oo(R,w,y));return de("span",o,{state:$,ref:[n,h],props:[{children:E},d],stateAttributesMapping:Wo})}),Go=t.forwardRef(function(o,n){const{className:r,render:C,...i}=o,{store:d}=ge(),l=g(d,f.open),h=t.useMemo(()=>({open:l}),[l]);return de("span",o,{state:h,ref:n,props:[{"aria-hidden":!0,children:"▼"},i],stateAttributesMapping:po})}),Yo=t.createContext(void 0),Ko=t.forwardRef(function(o,n){const{store:r}=ge(),C=g(r,f.mounted),i=g(r,f.forceMount);return C||i?s.jsx(Yo.Provider,{value:!0,children:s.jsx(fo,{ref:n,...o})}):null}),Ut=t.createContext(void 0);function xt(){const e=t.useContext(Ut);if(!e)throw new Error(ke(59));return e}function Ze(e,o){e&&Object.assign(e.style,o)}const kt={position:"relative",maxHeight:"100%",overflowX:"hidden",overflowY:"auto"},Xo={position:"fixed"},Zo=t.forwardRef(function(o,n){const{anchor:r,positionMethod:C="absolute",className:i,render:d,side:l="bottom",align:h="center",sideOffset:R=0,alignOffset:w=0,collisionBoundary:y="clipping-ancestors",collisionPadding:v,arrowPadding:$=5,sticky:E=!1,disableAnchorTracking:k,alignItemWithTrigger:z=!0,collisionAvoidance:T=mo,...j}=o,{store:c,listRef:D,labelsRef:ee,alignItemWithTriggerActiveRef:oe,selectedItemTextRef:L,valuesRef:_,initialValueRef:ae,popupRef:Y,setValue:M}=ge(),J=Bt(),q=g(c,f.open),u=g(c,f.mounted),a=g(c,f.modal),V=g(c,f.value),B=g(c,f.openMethod),I=g(c,f.positionerElement),p=g(c,f.triggerElement),H=g(c,f.isItemEqualToValue),A=t.useRef(null),K=t.useRef(null),[P,W]=t.useState(z),G=u&&P&&B!=="touch";!u&&P!==z&&W(z),ue(()=>{u||(f.scrollUpArrowVisible(c.state)&&c.set("scrollUpArrowVisible",!1),f.scrollDownArrowVisible(c.state)&&c.set("scrollDownArrowVisible",!1))},[c,u]),t.useImperativeHandle(oe,()=>G),Ro((G||a)&&q&&B!=="touch",p);const m=yo({anchor:r,floatingRootContext:J,positionMethod:C,mounted:u,side:l,sideOffset:R,align:h,alignOffset:w,arrowPadding:$,collisionBoundary:y,collisionPadding:v,sticky:E,disableAnchorTracking:k??G,collisionAvoidance:T,keepMounted:!0}),S=G?"none":m.side,F=G?Xo:m.positionerStyles,U=t.useMemo(()=>{const O={};return q||(O.pointerEvents="none"),{role:"presentation",hidden:!u,style:{...F,...O}}},[q,u,F]),ne=t.useMemo(()=>({open:q,side:S,align:m.align,anchorHidden:m.anchorHidden}),[q,S,m.align,m.anchorHidden]),ce=we(O=>{c.set("positionerElement",O)}),re=de("div",o,{ref:[n,ce],state:ne,stateAttributesMapping:jt,props:[U,j]}),le=t.useRef(0),ye=we(O=>{if(O.size===0&&le.current===0||_.current.length===0)return;const pe=le.current;if(le.current=O.size,O.size===pe)return;const he=Ie(_t);if(pe!==0&&!c.state.multiple&&V!==null&&ft(_.current,V,H)===-1){const Z=ae.current,fe=Z!=null&&ct(_.current,Z,H)?Z:null;M(fe,he),fe===null&&(c.set("selectedIndex",null),L.current=null)}if(pe!==0&&c.state.multiple&&Array.isArray(V)){const X=V.filter(Z=>ct(_.current,Z,H));(X.length!==V.length||X.some(Z=>!ct(V,Z,H)))&&(M(X,he),X.length===0&&(c.set("selectedIndex",null),L.current=null))}if(q&&G){c.update({scrollUpArrowVisible:!1,scrollDownArrowVisible:!1});const X={height:""};Ze(I,X),Ze(Y.current,X)}}),ie=t.useMemo(()=>({...m,side:S,alignItemWithTriggerActive:G,setControlledAlignItemWithTrigger:W,scrollUpArrowRef:A,scrollDownArrowRef:K}),[m,S,G,W]);return s.jsx(jo,{elementsRef:D,labelsRef:ee,onMapChange:ye,children:s.jsxs(Ut.Provider,{value:ie,children:[u&&a&&s.jsx(wo,{inert:No(!q),cutout:p}),re]})})});function zt(e){const o=e.currentTarget.getBoundingClientRect();return o.top+1<=e.clientY&&e.clientY<=o.bottom-1&&o.left+1<=e.clientX&&e.clientX<=o.right-1}const Jo={...jt,...Lt},Qo=t.forwardRef(function(o,n){const{render:r,className:C,...i}=o,{store:d,popupRef:l,onOpenChangeComplete:h,setOpen:R,valueRef:w,selectedItemTextRef:y,keyboardActiveRef:v,multiple:$,handleScrollArrowVisibility:E,scrollHandlerRef:k}=ge(),{side:z,align:T,alignItemWithTriggerActive:j,setControlledAlignItemWithTrigger:c,scrollDownArrowRef:D,scrollUpArrowRef:ee}=xt(),oe=Bo(!0)!=null,L=Bt(),_=Ve(),ae=g(d,f.id),Y=g(d,f.open),M=g(d,f.mounted),J=g(d,f.popupProps),q=g(d,f.transitionStatus),u=g(d,f.triggerElement),a=g(d,f.positionerElement),V=g(d,f.listElement),B=t.useRef(0),I=t.useRef(!1),p=t.useRef(0),H=t.useRef(!1),A=t.useRef({}),K=Do(),P=we(S=>{if(!a||!l.current||!H.current)return;if(I.current||!j){E();return}const F=a.style.top==="0px",U=a.style.bottom==="0px",ne=a.getBoundingClientRect().height,ce=mt(a),re=getComputedStyle(a),le=parseFloat(re.marginTop),ye=parseFloat(re.marginBottom),ie=ce.documentElement.clientHeight-le-ye,O=S.scrollTop,pe=S.scrollHeight,he=S.clientHeight,X=pe-he;let Z=null,x=null,fe=!1;if(F){const Se=X-O,xe=ne+Se,se=Math.min(xe,ie);Z=se,se!==ie?x=X:fe=!0}else if(U){const Se=O-0,xe=ne+Se,se=Math.min(xe,ie),Le=xe-ie;Z=se,se!==ie?x=0:(fe=!0,O<X&&(x=O-(Se-Le)))}Z!=null&&(a.style.height=`${Z}px`),x!=null&&(S.scrollTop=x),fe&&(I.current=!0),E()});t.useImperativeHandle(k,()=>P,[P]),Qe({open:Y,ref:l,onComplete(){Y&&h?.(!0)}});const W=t.useMemo(()=>({open:Y,transitionStatus:q,side:z,align:T}),[Y,q,z,T]);ue(()=>{!a||!l.current||Object.keys(A.current).length||(A.current={top:a.style.top||"0",left:a.style.left||"0",right:a.style.right,height:a.style.height,bottom:a.style.bottom,minHeight:a.style.minHeight,maxHeight:a.style.maxHeight,marginTop:a.style.marginTop,marginBottom:a.style.marginBottom})},[l,a]),ue(()=>{M||j||(H.current=!1,I.current=!1,B.current=0,p.current=0,Ze(a,A.current))},[M,j,a,l]),ue(()=>{const S=l.current;if(!(!M||!u||!a||!S)){if(!j){H.current=!0,K.request(E);return}queueMicrotask(()=>{const F=getComputedStyle(a),U=getComputedStyle(S),ne=mt(u),ce=Mt(a),re=u.getBoundingClientRect(),le=a.getBoundingClientRect(),ye=re.left,ie=re.height,O=V||S,pe=O.scrollHeight,he=parseFloat(U.borderBottomWidth),X=parseFloat(F.marginTop)||10,Z=parseFloat(F.marginBottom)||10,x=parseFloat(F.minHeight)||100,fe=5,Se=5,xe=20,se=ne.documentElement.clientHeight-X-Z,Le=ne.documentElement.clientWidth,nt=se-re.bottom+ie,$e=y.current,He=w.current;let Ce=0,Ee=0;if($e&&He){const Pe=He.getBoundingClientRect(),Fe=$e.getBoundingClientRect(),it=Pe.left-ye,at=Fe.left-le.left,b=Pe.top-re.top+Pe.height/2,Q=Fe.top-le.top+Fe.height/2;Ce=it-at,Ee=Q-b}const Te=nt+Ee+Z+he;let me=Math.min(se,Te);const ve=se-X-Z,Oe=Te-me,qe=Math.max(fe,ye+Ce),rt=Le-Se,lt=Math.max(0,qe+le.width-rt);a.style.left=`${qe-lt}px`,a.style.height=`${me}px`,a.style.maxHeight="auto",a.style.marginTop=`${X}px`,a.style.marginBottom=`${Z}px`,S.style.height="100%";const De=O.scrollHeight-O.clientHeight,Ne=Oe>=De;Ne&&(me=Math.min(se,le.height)-(Oe-De));const We=re.top<xe||re.bottom>se-xe||me<Math.min(pe,x),Be=(ce.visualViewport?.scale??1)!==1&&Oo;if(We||Be){H.current=!0,Ze(a,A.current),Ho.flushSync(()=>c(!1));return}if(Ne){const Pe=Math.max(0,se-Te);a.style.top=le.height>=ve?"0":`${Pe}px`,a.style.height=`${me}px`,O.scrollTop=O.scrollHeight-O.clientHeight,B.current=Math.max(x,me)}else a.style.bottom="0",B.current=Math.max(x,me),O.scrollTop=Oe;B.current===se&&(I.current=!0),E(),setTimeout(()=>{H.current=!0})})}},[d,M,a,u,w,y,l,E,j,c,K,D,ee,V]),t.useEffect(()=>{if(!j||!a||!M)return;const S=Mt(a);function F(U){R(!1,Ie(So,U))}return S.addEventListener("resize",F),()=>{S.removeEventListener("resize",F)}},[R,j,a,M]);const G={...V?{role:"presentation","aria-orientation":void 0}:{role:"listbox","aria-multiselectable":$||void 0,id:`${ae}-list`},onKeyDown(S){v.current=!0,oe&&Fo.has(S.key)&&S.stopPropagation()},onMouseMove(){v.current=!1},onPointerLeave(S){if(zt(S)||S.pointerType==="touch")return;const F=S.currentTarget;_.start(0,()=>{d.set("activeIndex",null),F.focus({preventScroll:!0})})},onScroll(S){V||k.current?.(S.currentTarget)},...j&&{style:V?{height:"100%"}:kt}},m=de("div",o,{ref:[n,l],state:W,stateAttributesMapping:Jo,props:[J,G,Uo(q),{className:!V&&j?gt.className:void 0},i]});return s.jsxs(t.Fragment,{children:[gt.element,s.jsx(Io,{context:L,modal:!1,disabled:!M,restoreFocus:!0,children:m})]})}),es=t.forwardRef(function(o,n){const{className:r,render:C,...i}=o,{store:d,scrollHandlerRef:l}=ge(),{alignItemWithTriggerActive:h}=xt(),R=g(d,f.hasScrollArrows),w=g(d,f.openMethod),y=g(d,f.multiple),$={id:`${g(d,f.id)}-list`,role:"listbox","aria-multiselectable":y||void 0,onScroll(k){l.current?.(k.currentTarget)},...h&&{style:kt},className:R&&w!=="touch"?gt.className:void 0},E=we(k=>{d.set("listElement",k)});return de("div",o,{ref:[n,E],props:[$,i]})}),$t=t.createContext(void 0);function vt(){const e=t.useContext($t);if(!e)throw new Error(ke(57));return e}const ts=t.memo(t.forwardRef(function(o,n){const{render:r,className:C,value:i=null,label:d,disabled:l=!1,nativeButton:h=!1,...R}=o,w=t.useRef(null),y=_o({label:d,textRef:w,indexGuessBehavior:Lo.GuessFromOrder}),{store:v,getItemProps:$,setOpen:E,setValue:k,selectionRef:z,typingRef:T,valuesRef:j,keyboardActiveRef:c,multiple:D,highlightItemOnHover:ee}=ge(),oe=Ve(),L=g(v,f.isActive,y.index),_=g(v,f.isSelected,y.index,i),ae=g(v,f.isSelectedByFocus,y.index),Y=g(v,f.isItemEqualToValue),M=y.index,J=M!==-1,q=t.useRef(null),u=ht(M);ue(()=>{if(!J)return;const m=j.current;return m[M]=i,()=>{delete m[M]}},[J,M,i,j]),ue(()=>{if(!J)return;const m=v.state.value;let S=m;D&&Array.isArray(m)&&m.length>0&&(S=m[m.length-1]),S!==void 0&&pt(S,i,Y)&&v.set("selectedIndex",M)},[J,M,D,Y,v,i]);const a=t.useMemo(()=>({disabled:l,selected:_,highlighted:L}),[l,_,L]),V=$({active:L,selected:_});V.onFocus=void 0,V.id=void 0;const B=t.useRef(null),I=t.useRef("mouse"),p=t.useRef(!1),{getButtonProps:H,buttonRef:A}=Ht({disabled:l,focusableWhenDisabled:!0,native:h});function K(m){const S=v.state.value;if(D){const F=Array.isArray(S)?S:[],U=_?so(F,i,Y):[...F,i];k(U,Ie(ut,m))}else k(i,Ie(ut,m)),E(!1,Ie(ut,m))}const P={role:"option","aria-selected":_,"aria-disabled":l||void 0,tabIndex:L?0:-1,onFocus(){v.set("activeIndex",M)},onMouseEnter(){!c.current&&v.state.selectedIndex===null&&v.set("activeIndex",M)},onMouseMove(){ee&&v.set("activeIndex",M)},onMouseLeave(m){!ee||c.current||zt(m)||oe.start(0,()=>{v.state.activeIndex===M&&v.set("activeIndex",null)})},onTouchStart(){z.current={allowSelectedMouseUp:!1,allowUnselectedMouseUp:!1}},onKeyDown(m){B.current=m.key,v.set("activeIndex",M)},onClick(m){p.current=!1,!(m.type==="keydown"&&B.current===null)&&(l||B.current===" "&&T.current||I.current!=="touch"&&!L||(B.current=null,K(m.nativeEvent)))},onPointerEnter(m){I.current=m.pointerType},onPointerDown(m){I.current=m.pointerType,p.current=!0},onMouseUp(m){if(l)return;if(p.current){p.current=!1;return}const S=!z.current.allowSelectedMouseUp&&_,F=!z.current.allowUnselectedMouseUp&&!_;S||F||I.current!=="touch"&&!L||K(m.nativeEvent)}},W=de("div",o,{ref:[A,n,y.ref,q],state:a,props:[V,P,R,H]}),G=t.useMemo(()=>({selected:_,indexRef:u,textRef:w,selectedByFocus:ae,hasRegistered:J}),[_,u,w,ae,J]);return s.jsx($t.Provider,{value:G,children:W})})),os=t.forwardRef(function(o,n){const r=o.keepMounted??!1,{selected:C}=vt();return r||C?s.jsx(ss,{...o,ref:n}):null}),ss=t.memo(t.forwardRef((e,o)=>{const{render:n,className:r,keepMounted:C,...i}=e,{selected:d}=vt(),l=t.useRef(null),{transitionStatus:h,setMounted:R}=St(d),w=t.useMemo(()=>({selected:d,transitionStatus:h}),[d,h]),y=de("span",e,{ref:[o,l],state:w,props:[{"aria-hidden":!0,children:"✔️"},i],stateAttributesMapping:Lt});return Qe({open:d,ref:l,onComplete(){d||R(!1)}}),y})),ns=t.memo(t.forwardRef(function(o,n){const{indexRef:r,textRef:C,selectedByFocus:i,hasRegistered:d}=vt(),{selectedItemTextRef:l}=ge(),{className:h,render:R,...w}=o,y=t.useCallback($=>{if(!$||!d)return;const E=l.current===null||!l.current.isConnected;(i||E&&r.current===0)&&(l.current=$)},[l,r,i,d]);return de("div",o,{ref:[y,n,C],props:w})})),qt=t.forwardRef(function(o,n){const{render:r,className:C,direction:i,keepMounted:d=!1,...l}=o,{store:h,popupRef:R,listRef:w,handleScrollArrowVisibility:y,scrollArrowsMountedCountRef:v}=ge(),{side:$,scrollDownArrowRef:E,scrollUpArrowRef:k}=xt(),z=i==="up"?f.scrollUpArrowVisible:f.scrollDownArrowVisible,T=g(h,z),j=g(h,f.openMethod),c=T&&j!=="touch",D=Ve(),ee=i==="up"?k:E,{transitionStatus:oe,setMounted:L}=St(c);ue(()=>(v.current+=1,h.state.hasScrollArrows||h.set("hasScrollArrows",!0),()=>{v.current=Math.max(0,v.current-1),v.current===0&&h.state.hasScrollArrows&&h.set("hasScrollArrows",!1)}),[h,v]),Qe({open:c,ref:ee,onComplete(){c||L(!1)}});const _=t.useMemo(()=>({direction:i,visible:c,side:$,transitionStatus:oe}),[i,c,$,oe]),Y=de("div",o,{ref:[n,ee],state:_,props:[{"aria-hidden":!0,children:i==="up"?"▲":"▼",style:{position:"absolute"},onMouseMove(J){if(J.movementX===0&&J.movementY===0||D.isStarted())return;h.set("activeIndex",null);function q(){const u=h.state.listElement??R.current;if(!u)return;h.set("activeIndex",null),y();const a=u.scrollTop===0,V=Math.round(u.scrollTop+u.clientHeight)>=u.scrollHeight;if(w.current.length===0&&(i==="up"?h.set("scrollUpArrowVisible",!a):h.set("scrollDownArrowVisible",!V)),i==="up"&&a||i==="down"&&V){D.clear();return}if((h.state.listElement||R.current)&&w.current&&w.current.length>0){const I=w.current,p=ee.current?.offsetHeight||0;if(i==="up"){let H=0;const A=u.scrollTop+p;for(let P=0;P<I.length;P+=1){const W=I[P];if(W&&W.offsetTop>=A){H=P;break}}const K=Math.max(0,H-1);if(K<H){const P=I[K];P&&(u.scrollTop=Math.max(0,P.offsetTop-p))}else u.scrollTop=0}else{let H=I.length-1;const A=u.scrollTop+u.clientHeight-p;for(let P=0;P<I.length;P+=1){const W=I[P];if(W&&W.offsetTop+W.offsetHeight>A){H=Math.max(0,P-1);break}}const K=Math.min(I.length-1,H+1);if(K>H){const P=I[K];P&&(u.scrollTop=P.offsetTop+P.offsetHeight-u.clientHeight+p)}else u.scrollTop=u.scrollHeight-u.clientHeight}}D.start(40,q)}D.start(40,q)},onMouseLeave(){D.clear()}},l]});return c||d?Y:null}),rs=t.forwardRef(function(o,n){return s.jsx(qt,{...o,ref:n,direction:"down"})}),ls=t.forwardRef(function(o,n){return s.jsx(qt,{...o,ref:n,direction:"up"})}),Wt=t.createContext(void 0);function is(){const e=t.useContext(Wt);if(e===void 0)throw new Error(ke(56));return e}const as=t.forwardRef(function(o,n){const{className:r,render:C,...i}=o,[d,l]=t.useState(),h=t.useMemo(()=>({labelId:d,setLabelId:l}),[d,l]),R=de("div",o,{ref:n,props:[{role:"group","aria-labelledby":d},i]});return s.jsx(Wt.Provider,{value:h,children:R})}),cs=t.forwardRef(function(o,n){const{className:r,render:C,id:i,...d}=o,{setLabelId:l}=is(),h=ko(i);return ue(()=>{l(h)},[h,l]),de("div",o,{ref:n,props:[{id:h},d]})}),us="_Separator_16qob_1",ds={Separator:us},Rt=t.forwardRef(({className:e,style:o="solid",...n},r)=>s.jsx(Jt,{ref:r,className:be(e,ds.Separator),"data-style":o,...n}));Rt.displayName="Separator";Rt.__docgenInfo={description:"",methods:[],displayName:"Separator",props:{style:{required:!1,tsType:{name:"union",raw:"'solid' | 'dashed'",elements:[{name:"literal",value:"'solid'"},{name:"literal",value:"'dashed'"}]},description:"",defaultValue:{value:"'solid'",computed:!1}}}};const ps="_SelectTrigger_1pwz0_1",fs="_StateLayer_1pwz0_50",ms="_Label_1pwz0_66",gs="_Value_1pwz0_88",hs="_LeadingIcon_1pwz0_112",Ss="_Icon_1pwz0_113",xs="_Popup_1pwz0_161",vs="_List_1pwz0_165",Rs="_ScrollArrow_1pwz0_169",ws="_Item_1pwz0_204",Is="_ItemIndicator_1pwz0_219",bs="_ItemText_1pwz0_230",ys="_ItemStateLayer_1pwz0_245",Ts="_SelectSeparator_1pwz0_279",Ms="_SelectSeparatorLine_1pwz0_284",te={SelectTrigger:ps,StateLayer:fs,Label:ms,Value:gs,LeadingIcon:hs,Icon:Ss,Popup:xs,List:vs,ScrollArrow:Rs,Item:ws,ItemIndicator:Is,ItemText:bs,ItemStateLayer:ys,SelectSeparator:Ts,SelectSeparatorLine:Ms},As=(e,o)=>be(e,o),Gt=zo,Yt=Ft,Kt=Ko,At=as,Je=t.forwardRef(({className:e,...o},n)=>s.jsx(cs,{ref:n,className:be(e,ze.GroupLabel),...o}));Je.displayName="SelectGroupLabel";const et=t.forwardRef(({className:e,...o},n)=>s.jsx(Zo,{ref:n,className:be(e,ze.Positioner),...o}));et.displayName="SelectPositioner";const tt=t.forwardRef(({className:e,...o},n)=>s.jsx(Qo,{ref:n,className:be(e,ze.Popup,te.Popup),...o}));tt.displayName="SelectPopup";const ot=t.forwardRef(({className:e,...o},n)=>s.jsx(es,{ref:n,className:be(e,ze.List,te.List),...o}));ot.displayName="SelectList";const wt=t.forwardRef(({className:e,children:o,...n},r)=>s.jsx(ls,{ref:r,className:be(e,te.ScrollArrow),...n,children:o??s.jsx(_e,{name:"caret-up",size:24})}));wt.displayName="SelectScrollUpArrow";const It=t.forwardRef(({className:e,children:o,...n},r)=>s.jsx(rs,{ref:r,className:be(e,te.ScrollArrow),...n,children:o??s.jsx(_e,{name:"caret-down",size:24})}));It.displayName="SelectScrollDownArrow";function Xt({className:e,style:o="solid",separatorClassName:n,...r}){return s.jsx("div",{className:[te.SelectSeparator,e].filter(Boolean).join(" "),...r,children:s.jsx(Rt,{className:[te.SelectSeparatorLine,n].filter(Boolean).join(" "),style:o})})}const st=t.forwardRef(({leadingIcon:e,trailingIcon:o,floatingLabel:n,filled:r=!1,readOnly:C,className:i,children:d,disabled:l,...h},R)=>{const w=t.isValidElement(n)?t.cloneElement(n,{className:[te.Label,n.props.className].filter(Boolean).join(" "),"data-select-label":!0}):n,y=d??s.jsx(Ft,{});return s.jsxs(qo,{ref:R,className:As(i,te.SelectTrigger),"data-filled":r||void 0,"data-readonly":C||void 0,"data-leading-icon":e?!0:void 0,"data-disabled":l||void 0,"aria-readonly":C||void 0,disabled:l,...h,children:[w,e?s.jsx("span",{className:te.LeadingIcon,children:e}):null,s.jsx("span",{className:te.Value,children:y}),s.jsx(Go,{className:te.Icon,children:o??s.jsx(_e,{name:"caret-down",size:24})}),s.jsx("span",{"aria-hidden":"true",className:te.StateLayer})]})});st.displayName="SelectTrigger";const Ps=(e,o)=>be(e,o),Ue=t.forwardRef(({className:e,children:o,indicator:n,...r},C)=>s.jsxs(ts,{ref:C,className:Ps(e,[ze.Item,te.Item].join(" ")),...r,children:[s.jsx(os,{className:te.ItemIndicator,children:n??s.jsx(_e,{name:"check",size:24})}),s.jsx(ns,{className:te.ItemText,children:o}),s.jsx("span",{"aria-hidden":"true",className:te.ItemStateLayer})]}));Ue.displayName="SelectItem";Je.__docgenInfo={description:"",methods:[],displayName:"SelectGroupLabel"};et.__docgenInfo={description:"",methods:[],displayName:"SelectPositioner"};tt.__docgenInfo={description:"",methods:[],displayName:"SelectPopup"};ot.__docgenInfo={description:"",methods:[],displayName:"SelectList"};wt.__docgenInfo={description:"",methods:[],displayName:"SelectScrollUpArrow"};It.__docgenInfo={description:"",methods:[],displayName:"SelectScrollDownArrow"};Xt.__docgenInfo={description:"",methods:[],displayName:"SelectSeparator",props:{style:{required:!1,tsType:{name:"ReactComponentPropsWithoutRef['style']",raw:"React.ComponentPropsWithoutRef<typeof Separator>['style']"},description:"",defaultValue:{value:"'solid'",computed:!1}},separatorClassName:{required:!1,tsType:{name:"string"},description:""}}};st.__docgenInfo={description:"",methods:[],displayName:"SelectTrigger",props:{leadingIcon:{required:!1,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""},trailingIcon:{required:!1,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""},floatingLabel:{required:!1,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""},filled:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},readOnly:{required:!1,tsType:{name:"boolean"},description:""}}};Ue.__docgenInfo={description:"",methods:[],displayName:"SelectItem",props:{indicator:{required:!1,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""}}};const An={title:"Components/Select",decorators:[e=>s.jsx("div",{style:{width:640},children:s.jsx(e,{})})]},Pt=[{label:"Tokyo",value:"tokyo"},{label:"Osaka",value:"osaka"},{label:"Sapporo",value:"sapporo"}],dt=[{label:"Tokyo",value:"tokyo"},{label:"Osaka",value:"osaka"},{label:"Sapporo",value:"sapporo"},{label:"Nagoya",value:"nagoya"},{label:"Fukuoka",value:"fukuoka"},{label:"Kobe",value:"kobe"},{label:"Hiroshima",value:"hiroshima"},{label:"Sendai",value:"sendai"},{label:"Niigata",value:"niigata"},{label:"Kanazawa",value:"kanazawa"},{label:"Naha",value:"naha"}],Vs=()=>{const[e,o]=t.useState(null),n=e!==null;return s.jsxs(Gt,{items:Pt,value:e,onValueChange:o,defaultOpen:!0,highlightItemOnHover:!1,children:[s.jsx(st,{floatingLabel:s.jsx("span",{children:"Label"}),leadingIcon:s.jsx(_e,{name:"dummy",size:24}),filled:n,children:s.jsx(Yt,{})}),s.jsx(Kt,{children:s.jsx(et,{sideOffset:8,children:s.jsx(tt,{children:s.jsx(ot,{children:Pt.map(r=>s.jsx(Ue,{value:r.value,children:r.label},r.label))})})})})]})},Cs=()=>{const[e,o]=t.useState(null),n=e!==null;return s.jsxs(Gt,{items:dt,value:e,onValueChange:o,defaultOpen:!0,highlightItemOnHover:!1,children:[s.jsx(st,{floatingLabel:s.jsx("span",{children:"Label"}),leadingIcon:s.jsx(_e,{name:"dummy",size:24}),filled:n,children:s.jsx(Yt,{})}),s.jsx(Kt,{children:s.jsx(et,{sideOffset:8,alignItemWithTrigger:!1,children:s.jsxs(tt,{style:{"--select-popup-extra-width":"16px"},children:[s.jsx(wt,{}),s.jsxs(ot,{style:{maxHeight:180},children:[s.jsxs(At,{children:[s.jsx(Je,{children:"Kanto"}),dt.slice(0,4).map(r=>s.jsx(Ue,{value:r.value,children:r.label},r.label))]}),s.jsx(Xt,{}),s.jsxs(At,{children:[s.jsx(Je,{children:"Other"}),dt.slice(4).map(r=>s.jsx(Ue,{value:r.value,disabled:r.value==="sapporo",children:r.label},r.label))]})]}),s.jsx(It,{})]})})})]})},Ke={render:()=>s.jsx(Vs,{})},Xe={render:()=>s.jsx(Cs,{})};Ke.parameters={...Ke.parameters,docs:{...Ke.parameters?.docs,source:{originalSource:`{
  render: () => <DefaultStory />
}`,...Ke.parameters?.docs?.source}}};Xe.parameters={...Xe.parameters,docs:{...Xe.parameters?.docs,source:{originalSource:`{
  render: () => <ManyItemsStory />
}`,...Xe.parameters?.docs?.source}}};const Pn=["Default","ManyItems"];export{Ke as Default,Xe as ManyItems,Pn as __namedExportsOrder,An as default};
