import{j as c}from"./jsx-runtime-u17CrQMm.js";import{I as W}from"./Icon-D1kJnNbP.js";import{r as s}from"./iframe-CbECxjq5.js";import{b as A,f as B,d as he,u as $,m as Q}from"./mergeClassName-IXwn37SS.js";import{u as ye,T as xe}from"./useTimeout-BMAPPt2Y.js";import{g as Ce,s as Pe}from"./safePolygon-GHFvNXVz.js";import{c as Z,n as ae,m as se,r as ve,t as Te,g as Se,j as Re,C as be}from"./createBaseUIEventDetails-Ca3whcAT.js";import{r as Ie}from"./index-D8RucqKe.js";import{p as we,b as Ee,c as Me,u as Oe,a as je,d as Ae}from"./useSyncedFloatingRootContext-mahGDNu5.js";import{R as De,P as ke,c as j,t as _e,q as Ne,a as ee}from"./popupStateMapping-Be-QQ-Fi.js";import{u as He}from"./useFocus-BQTDi-7C.js";import{u as Le,a as Ue}from"./useInteractions-DTzIbOZK.js";import{b as Fe}from"./floating-ui.utils.dom-CWuwp5es.js";import{u as re}from"./useStableCallback-D6w4asaT.js";import{b as Ve}from"./event-CNRsvx7q.js";import{g as Be,c as $e}from"./element-C8qsRkBu.js";import{u as ze}from"./useBaseUiId-DYV6Jlu1.js";import{u as Xe,a as Ye}from"./useHoverReferenceInteraction-MRO1SJQX.js";import{F as We}from"./FloatingPortalLite-C-gtVQ9m.js";import{a as Ge,b as qe}from"./useAnchorPositioning-CYWZQJ39.js";import{g as le}from"./getDisabledMountTransitionStyles-B1-NSK41.js";import{u as Ke,t as Je}from"./useOpenChangeComplete-DeoJGa5O.js";import{u as Qe}from"./usePopupAutoResize-Nv-XAsrK.js";import{u as Ze}from"./DirectionContext-DoIPesKM.js";import{I as G}from"./IconButton-7xKH_aBy.js";import"./preload-helper-ClwkVg-s.js";import"./useOnMount-B177qC_F.js";import"./useValueAsRef-TJHsNw6D.js";import"./constants-CNjsXAL1.js";import"./index-D2G6Vmfx.js";import"./useTransitionStatus-CMcipHeM.js";import"./useAnimationFrame-CwwnCJKI.js";import"./getEmptyRootContext-CiLWvRJd.js";import"./useId-kuykVazU.js";import"./detectBrowser-CYw91I8L.js";import"./visuallyHidden-CbwUG2x5.js";import"./floating-ui.utils-CtlI5I81.js";import"./owner-CvMgaIeV.js";import"./getCssDimensions-Bjp7kr5Y.js";import"./Button.module-DvUPNZkR.js";import"./useButton-CFXQrDeP.js";const ue=s.createContext({hasProvider:!1,timeoutMs:0,delayRef:{current:0},initialDelayRef:{current:0},timeout:new xe,currentIdRef:{current:null},currentContextRef:{current:null}});function et(t){const{children:e,delay:o,timeoutMs:r=0}=t,f=s.useRef(o),l=s.useRef(o),i=s.useRef(null),a=s.useRef(null),p=ye();return c.jsx(ue.Provider,{value:s.useMemo(()=>({hasProvider:!0,delayRef:f,initialDelayRef:l,currentIdRef:i,timeoutMs:r,currentContextRef:a,timeout:p}),[r,p]),children:e})}function tt(t,e={open:!1}){const o="rootStore"in t?t.rootStore:t,r=o.useState("floatingId"),{enabled:f=!0,open:l}=e,i=s.useContext(ue),{currentIdRef:a,delayRef:p,timeoutMs:u,initialDelayRef:m,currentContextRef:d,hasProvider:g,timeout:n}=i,[P,S]=s.useState(!1);return A(()=>{function R(){S(!1),d.current?.setIsInstantPhase(!1),a.current=null,d.current=null,p.current=m.current}if(f&&a.current&&!l&&a.current===r){if(S(!1),u){const h=r;return n.start(u,()=>{o.select("open")||a.current&&a.current!==h||R()}),()=>{n.clear()}}R()}},[f,l,r,a,p,u,m,d,n,o]),A(()=>{if(!f||!l)return;const R=d.current,h=a.current;n.clear(),d.current={onOpenChange:o.setOpen,setIsInstantPhase:S},a.current=r,p.current={open:0,close:Ce(m.current,"close")},h!==null&&h!==r?(S(!0),R?.setIsInstantPhase(!0),R?.onOpenChange(!1,Z(ae))):(S(!1),R?.setIsInstantPhase(!1))},[f,l,r,o,a,p,u,m,d,n]),A(()=>()=>{d.current=null},[d]),s.useMemo(()=>({hasProvider:g,delayRef:p,isInstantPhase:P}),[g,p,P])}function ot(t,e){let o=null,r=null,f=!1;return{contextElement:t||void 0,getBoundingClientRect(){const l=t?.getBoundingClientRect()||{width:0,height:0,x:0,y:0},i=e.axis==="x"||e.axis==="both",a=e.axis==="y"||e.axis==="both",p=["mouseenter","mousemove"].includes(e.dataRef.current.openEvent?.type||"")&&e.pointerType!=="touch";let u=l.width,m=l.height,d=l.x,g=l.y;return o==null&&e.x&&i&&(o=l.x-e.x),r==null&&e.y&&a&&(r=l.y-e.y),d-=o||0,g-=r||0,u=0,m=0,!f||p?(u=e.axis==="y"?l.width:0,m=e.axis==="x"?l.height:0,d=i&&e.x!=null?e.x:d,g=a&&e.y!=null?e.y:g):f&&!p&&(m=e.axis==="x"?l.height:m,u=e.axis==="y"?l.width:u),f=!0,{width:u,height:m,x:d,y:g,top:g,right:d+u,bottom:g+m,left:d}}}}function ie(t){return t!=null&&t.clientX!=null}function nt(t,e={}){const o="rootStore"in t?t.rootStore:t,r=o.useState("open"),f=o.useState("floatingElement"),l=o.useState("domReferenceElement"),i=o.context.dataRef,{enabled:a=!0,axis:p="both",x:u=null,y:m=null}=e,d=s.useRef(!1),g=s.useRef(null),[n,P]=s.useState(),[S,R]=s.useState([]),h=re((y,v)=>{d.current||i.current.openEvent&&!ie(i.current.openEvent)||o.set("positionReference",ot(l,{x:y,y:v,axis:p,dataRef:i,pointerType:n}))}),x=re(y=>{u!=null||m!=null||(r?g.current||R([]):h(y.clientX,y.clientY))}),w=Ve(n)?f:r,b=s.useCallback(()=>{if(!w||!a||u!=null||m!=null)return;const y=Fe(f);function v(T){const E=Be(T);$e(f,E)?(y.removeEventListener("mousemove",v),g.current=null):h(T.clientX,T.clientY)}if(!i.current.openEvent||ie(i.current.openEvent)){y.addEventListener("mousemove",v);const T=()=>{y.removeEventListener("mousemove",v),g.current=null};return g.current=T,T}o.set("positionReference",l)},[w,a,u,m,f,i,l,o,h]);s.useEffect(()=>b(),[b,S]),s.useEffect(()=>{a&&!f&&(d.current=!1)},[a,f]),s.useEffect(()=>{!a&&r&&(d.current=!0)},[a,r]),A(()=>{a&&(u!=null||m!=null)&&(d.current=!1,h(u,m))},[a,u,m,h]);const I=s.useMemo(()=>{function y(v){P(v.pointerType)}return{onPointerDown:y,onPointerEnter:y,onMouseMove:x,onMouseEnter:x}},[x]);return s.useMemo(()=>a?{reference:I}:{},[a,I])}const ce=s.createContext(void 0);function U(t){const e=s.useContext(ce);if(e===void 0&&!t)throw new Error(B(72));return e}const st={...we,disabled:j(t=>t.disabled),instantType:j(t=>t.instantType),isInstantPhase:j(t=>t.isInstantPhase),trackCursorAxis:j(t=>t.trackCursorAxis),disableHoverablePopup:j(t=>t.disableHoverablePopup),lastOpenChangeReason:j(t=>t.openChangeReason),closeDelay:j(t=>t.closeDelay)};class te extends De{constructor(e){super({...rt(),...e},{popupRef:s.createRef(),onOpenChange:void 0,onOpenChangeComplete:void 0,triggerElements:new ke},st)}setOpen=(e,o)=>{const r=o.reason,f=r===se,l=e&&r===ve,i=!e&&(r===Te||r===Se);if(o.preventUnmountOnClose=()=>{this.set("preventUnmountingOnClose",!0)},this.context.onOpenChange?.(e,o),o.isCanceled)return;const a=()=>{const p={open:e,openChangeReason:r};l?p.instantType="focus":i?p.instantType="dismiss":r===se&&(p.instantType=void 0);const u=o.trigger?.id??null;(u||e)&&(p.activeTriggerId=u,p.activeTriggerElement=o.trigger??null),this.update(p)};f?Ie.flushSync(a):a()};static useStore(e,o){const r=he(()=>e??new te(o)).current,f=Ee({popupStore:r,onOpenChange:r.setOpen});return r.state.floatingRootContext=f,r}}function rt(){return{...Me(),disabled:!1,instantType:void 0,isInstantPhase:!1,trackCursorAxis:"none",disableHoverablePopup:!1,openChangeReason:null,closeDelay:0}}function it(t){const{disabled:e=!1,defaultOpen:o=!1,open:r,disableHoverablePopup:f=!1,trackCursorAxis:l="none",actionsRef:i,onOpenChange:a,onOpenChangeComplete:p,handle:u,triggerId:m,defaultTriggerId:d=null,children:g}=t,n=te.useStore(u?.store,{open:r??o,activeTriggerId:m!==void 0?m:d});n.useControlledProp("open",r,o),n.useControlledProp("activeTriggerId",m,d),n.useContextCallback("onOpenChange",a),n.useContextCallback("onOpenChangeComplete",p);const P=n.useState("open"),S=n.useState("activeTriggerId"),R=n.useState("payload");n.useSyncedValues({trackCursorAxis:l,disableHoverablePopup:f});const h=!e&&P;A(()=>{P&&e&&n.setOpen(!1,Z(be))},[P,e,n]),n.useSyncedValue("disabled",e),Oe(n);const{forceUnmount:x,transitionStatus:w}=je(h,n),b=n.useState("isInstantPhase"),I=n.useState("instantType"),y=n.useState("lastOpenChangeReason"),v=s.useRef(null);A(()=>{w==="ending"&&y===ae||w!=="ending"&&b?(I!=="delay"&&(v.current=I),n.set("instantType","delay")):v.current!==null&&(n.set("instantType",v.current),v.current=null)},[w,b,y,I,n]),A(()=>{h&&S==null&&n.set("payload",void 0)},[n,S,h]);const T=s.useCallback(()=>{n.setOpen(!1,at(n,Re))},[n]);s.useImperativeHandle(i,()=>({unmount:x,close:T}),[x,T]);const E=n.useState("floatingRootContext"),M=He(E,{enabled:!e}),C=Le(E,{enabled:!e,referencePress:!0}),N=nt(E,{enabled:!e&&l!=="none",axis:l==="none"?void 0:l}),{getReferenceProps:O,getFloatingProps:D,getTriggerProps:k}=Ue([M,C,N]),_=s.useMemo(()=>O(),[O]),z=s.useMemo(()=>k(),[k]),ne=s.useMemo(()=>D(),[D]);return n.useSyncedValues({floatingRootContext:E,activeTriggerProps:_,inactiveTriggerProps:z,popupProps:ne}),c.jsx(ce.Provider,{value:n,children:typeof g=="function"?g({payload:R}):g})}function at(t,e){const o=Z(e);return o.preventUnmountOnClose=()=>{t.set("preventUnmountingOnClose",!0)},o}const pe=s.createContext(void 0);function lt(){return s.useContext(pe)}const ut=600,ct=s.forwardRef(function(e,o){const{className:r,render:f,handle:l,payload:i,disabled:a,delay:p,closeDelay:u,id:m,...d}=e,g=U(!0),n=l?.store??g;if(!n)throw new Error(B(82));const P=ze(m),S=n.useState("isTriggerActive",P),R=n.useState("floatingRootContext"),h=n.useState("isOpenedByTrigger",P),x=s.useRef(null),w=p??ut,b=u??0,{registerTrigger:I,isMountedByThisTrigger:y}=Ae(P,x,n,{payload:i,closeDelay:b}),v=lt(),{delayRef:T,isInstantPhase:E,hasProvider:M}=tt(R,{open:h});n.useSyncedValue("isInstantPhase",E);const C=n.useState("disabled"),N=a??C,O=n.useState("trackCursorAxis"),D=n.useState("disableHoverablePopup"),k=Xe(R,{enabled:!N,mouseOnly:!0,move:!1,handleClose:!D&&O!=="both"?Pe():null,restMs(){const X=v?.delay,F=typeof T.current=="object"?T.current.open:void 0;let Y=w;return M&&(F!==0?Y=p??X??w:Y=0),Y},delay(){const X=typeof T.current=="object"?T.current.close:void 0;let F=b;return u==null&&M&&(F=X),{close:F}},triggerElementRef:x,isActiveTrigger:S}),_=s.useMemo(()=>({open:h}),[h]),z=n.useState("triggerProps",y);return $("button",e,{state:_,ref:[o,I,x],props:[k,z,{id:P},d],stateAttributesMapping:_e})}),de=s.createContext(void 0);function pt(){const t=s.useContext(de);if(t===void 0)throw new Error(B(70));return t}const dt=s.forwardRef(function(e,o){const{keepMounted:r=!1,...f}=e;return U().useState("mounted")||r?c.jsx(de.Provider,{value:r,children:c.jsx(We,{ref:o,...f})}):null}),fe=s.createContext(void 0);function me(){const t=s.useContext(fe);if(t===void 0)throw new Error(B(71));return t}const ft=s.forwardRef(function(e,o){const{render:r,className:f,anchor:l,positionMethod:i="absolute",side:a="top",align:p="center",sideOffset:u=0,alignOffset:m=0,collisionBoundary:d="clipping-ancestors",collisionPadding:g=5,arrowPadding:n=5,sticky:P=!1,disableAnchorTracking:S=!1,collisionAvoidance:R=Ne,...h}=e,x=U(),w=pt(),b=x.useState("open"),I=x.useState("mounted"),y=x.useState("trackCursorAxis"),v=x.useState("disableHoverablePopup"),T=x.useState("floatingRootContext"),E=x.useState("instantType"),M=x.useState("transitionStatus"),C=Ge({anchor:l,positionMethod:i,floatingRootContext:T,mounted:I,side:a,sideOffset:u,align:p,alignOffset:m,collisionBoundary:d,collisionPadding:g,sticky:P,arrowPadding:n,disableAnchorTracking:S,keepMounted:w,collisionAvoidance:R,adaptiveOrigin:qe}),N=s.useMemo(()=>{const _={};return(!b||y==="both"||v)&&(_.pointerEvents="none"),{role:"presentation",hidden:!I,style:{...C.positionerStyles,..._}}},[b,y,v,I,C.positionerStyles]),O=s.useMemo(()=>({open:b,side:C.side,align:C.align,anchorHidden:C.anchorHidden,instant:y!=="none"?"tracking-cursor":E}),[b,C.side,C.align,C.anchorHidden,y,E]),D=s.useMemo(()=>({...O,arrowRef:C.arrowRef,arrowStyles:C.arrowStyles,arrowUncentered:C.arrowUncentered}),[O,C.arrowRef,C.arrowStyles,C.arrowUncentered]),k=$("div",e,{state:O,props:[N,le(M),h],ref:[o,x.useStateSetter("positionerElement")],stateAttributesMapping:ee});return c.jsx(fe.Provider,{value:D,children:k})}),mt={...ee,...Je},gt=s.forwardRef(function(e,o){const{className:r,render:f,...l}=e,i=U(),{side:a,align:p}=me(),u=i.useState("open"),m=i.useState("mounted"),d=i.useState("instantType"),g=i.useState("transitionStatus"),n=i.useState("popupProps"),P=i.useState("payload"),S=i.useState("popupElement"),R=i.useState("positionerElement"),h=i.useState("floatingRootContext"),x=Ze();Ke({open:u,ref:i.context.popupRef,onComplete(){u&&i.context.onOpenChangeComplete?.(!0)}});function w(){h.context.events.emit("measure-layout")}function b(M,C){h.context.events.emit("measure-layout-complete",{previousDimensions:M,nextDimensions:C})}const I=s.useCallback(()=>i.context.triggerElements.size>1,[i]);Qe({popupElement:S,positionerElement:R,mounted:m,content:P,enabled:I,onMeasureLayout:w,onMeasureLayoutComplete:b,side:a,direction:x});const y=i.useState("disabled"),v=i.useState("closeDelay");Ye(h,{enabled:!y,closeDelay:v});const T=s.useMemo(()=>({open:u,side:a,align:p,instant:d,transitionStatus:g}),[u,a,p,d,g]);return $("div",e,{state:T,ref:[o,i.context.popupRef,i.useStateSetter("popupElement")],props:[n,le(g),l],stateAttributesMapping:mt})}),ht=s.forwardRef(function(e,o){const{className:r,render:f,...l}=e,a=U().useState("instantType"),{open:p,arrowRef:u,side:m,align:d,arrowUncentered:g,arrowStyles:n}=me(),P=s.useMemo(()=>({open:p,side:m,align:d,uncentered:g,instant:a}),[p,m,d,g,a]);return $("div",e,{state:P,ref:[o,u],props:[{style:n,"aria-hidden":!0},l],stateAttributesMapping:ee})}),yt=function(e){const{delay:o,closeDelay:r,timeout:f=400}=e,l=s.useMemo(()=>({delay:o,closeDelay:r}),[o,r]),i=s.useMemo(()=>({open:o,close:r}),[o,r]);return c.jsx(pe.Provider,{value:l,children:c.jsx(et,{delay:i,timeoutMs:f,children:e.children})})},xt="_Positioner_hlmab_1",Ct="_Popup_hlmab_9",Pt="_Arrow_hlmab_39",oe={Positioner:xt,Popup:Ct,Arrow:Pt},vt=yt,q=it,K=ct,J=dt,H=s.forwardRef(({className:t,...e},o)=>c.jsx(ft,{ref:o,className:Q(t,oe.Positioner),...e}));H.displayName="TooltipPositioner";const L=s.forwardRef(({className:t,...e},o)=>c.jsx(gt,{ref:o,className:Q(t,oe.Popup),...e}));L.displayName="TooltipPopup";const ge=s.forwardRef(({className:t,...e},o)=>c.jsx(ht,{ref:o,className:Q(t,oe.Arrow),...e}));ge.displayName="TooltipArrow";H.__docgenInfo={description:"",methods:[],displayName:"TooltipPositioner"};L.__docgenInfo={description:"",methods:[],displayName:"TooltipPopup"};ge.__docgenInfo={description:"",methods:[],displayName:"TooltipArrow"};const co={title:"Components/Tooltip",parameters:{layout:"fullscreen"}},Tt=()=>c.jsx("div",{style:{padding:32},children:c.jsx(vt,{children:c.jsxs("div",{style:{display:"flex",gap:8,padding:8,borderRadius:8,border:"1px solid var(--outline-variant)",background:"var(--surface-container-low)",width:"fit-content"},children:[c.jsxs(q,{children:[c.jsx(K,{render:t=>c.jsx(G,{...t,"aria-label":"編集",variant:"ghost",children:c.jsx(W,{name:"edit",size:20})})}),c.jsx(J,{children:c.jsx(H,{sideOffset:10,children:c.jsx(L,{children:"編集"})})})]}),c.jsxs(q,{children:[c.jsx(K,{render:t=>c.jsx(G,{...t,"aria-label":"削除",variant:"ghost",children:c.jsx(W,{name:"trash",size:20})})}),c.jsx(J,{children:c.jsx(H,{sideOffset:10,children:c.jsx(L,{children:"削除"})})})]}),c.jsxs(q,{children:[c.jsx(K,{render:t=>c.jsx(G,{...t,"aria-label":"設定",variant:"ghost",children:c.jsx(W,{name:"settings",size:20})})}),c.jsx(J,{children:c.jsx(H,{sideOffset:10,children:c.jsx(L,{children:"設定"})})})]})]})})}),V={render:()=>c.jsx(Tt,{})};V.parameters={...V.parameters,docs:{...V.parameters?.docs,source:{originalSource:`{
  render: () => <DefaultStory />
}`,...V.parameters?.docs?.source}}};const po=["Default"];export{V as Default,po as __namedExportsOrder,co as default};
