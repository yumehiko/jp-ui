import{j as c}from"./jsx-runtime-u17CrQMm.js";import{r as s}from"./iframe-DCTwtVEg.js";import{c as Bt,I as Ge}from"./createReactComponent-BVoNDKa1.js";import{d as Kt,f as Et,a as Yt,b as Je,u as ge,m as be}from"./mergeClassName-CGuaxy8D.js";import{u as zt}from"./useControlled-C-9u02Ss.js";import{u as me}from"./useStableCallback-BlvU505D.js";import{T as Xt,u as tt}from"./useTimeout-D67vsree.js";import{u as Zt}from"./useOnMount-CchHJru6.js";import{u as dt}from"./useValueAsRef-BBKeM-2h.js";import{u as qt}from"./useForcedRerendering-DiDAyyya.js";import{v as Jt}from"./visuallyHidden-CbwUG2x5.js";import{o as We}from"./owner-CvMgaIeV.js";import{b as Qt,i as en,c as xt}from"./detectBrowser-CYw91I8L.js";import{u as Nt,b as tn,a as nn,c as rn,f as sn}from"./LabelableContext-Bcab7PGA.js";import{u as on}from"./useLabelableId-CPEzFwi8.js";import{g as $e,f as Pe,a as St}from"./formatNumber-E4R0_Sjy.js";import{c as an}from"./clamp-DyuOe9kr.js";import{c as ce,d as Ce,n as un,v as cn,w as De,i as Qe,e as mt,x as ft,y as pt}from"./createBaseUIEventDetails-BDhVKG5E.js";import{b as He}from"./floating-ui.utils.dom-CWuwp5es.js";import{r as nt}from"./index-zOVaSaDz.js";import{u as yt}from"./useButton-BBNhskDs.js";import{u as ln}from"./useValueChanged-DWOD2Xr9.js";import{s as dn}from"./event-CNRsvx7q.js";import{I as It}from"./IconPlus-BiOY6V9r.js";import"./preload-helper-ClwkVg-s.js";import"./useRender-BavQ6iTs.js";import"./useBaseUiId-DBEJHERS.js";import"./useId-DhseFPV0.js";import"./index-DT-vH3A5.js";const mn=[["path",{d:"M5 12l14 0",key:"svg-0"}]],Ct=Bt("outline","minus","Minus",mn),ht=0;class ot extends Xt{static create(){return new ot}start(r,t){this.clear(),this.currentId=setInterval(()=>{t()},r)}clear=()=>{this.currentId!==ht&&(clearInterval(this.currentId),this.currentId=ht)}}function fn(){const e=Kt(ot.create).current;return Zt(e.disposeEffect),e}const At=s.createContext(void 0);function Ae(){const e=s.useContext(At);if(e===void 0)throw new Error(Et(43));return e}const Re={inputValue:()=>null,value:()=>null},pn=["零","〇","一","二","三","四","五","六","七","八","九"],hn={零:"0","〇":"0",一:"1",二:"2",三:"3",四:"4",五:"5",六:"6",七:"7",八:"8",九:"9"},_t=["٠","١","٢","٣","٤","٥","٦","٧","٨","٩"],vt=["۰","۱","۲","۳","۴","۵","۶","۷","۸","۹"],it=["０","１","２","３","４","５","６","７","８","９"],Dt=["%","٪","％","﹪"],Tt=["‰","؉"],Pt=["−","－","‒","–","—","﹣"],wt=["＋","﹢"],gn="．",bn="，",Rn=new RegExp(`[${_t.join("")}]`,"g"),En=new RegExp(`[${vt.join("")}]`,"g"),xn=new RegExp(`[${it.join("")}]`,"g"),Nn=new RegExp(`[${pn.join("")}]`,"g"),Sn=new RegExp(`[${Dt.join("")}]`),yn=new RegExp(`[${Tt.join("")}]`),rt=/[٠١٢٣٤٥٦٧٨٩]/,Ft=/[۰۱۲۳۴۵۶۷۸۹]/,st=/[零〇一二三四五六七八九]/,gt=new RegExp(`[${it.join("")}]`),In=[".",",",gn,bn,"٫","٬"],bt=new RegExp("\\p{Zs}","u"),Cn=["+",...wt],An=["-",...Pt],ke=e=>e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),_n=e=>e.replace(/[-\\\]^]/g,r=>`\\${r}`),Vt=e=>`[${e.map(_n).join("")}]`,Lt=Vt(["-"].concat(Pt)),Mt=Vt(["+"].concat(wt)),kt=new RegExp(Lt,"gu"),jt=new RegExp(Mt,"gu"),Te=new RegExp(Lt),je=new RegExp(Mt);function at(e,r){const t=$e(e,r).formatToParts(11111.1),o={};return t.forEach(u=>{o[u.type]=u.value}),$e(e).formatToParts(.1).forEach(u=>{u.type==="decimal"&&(o[u.type]=u.value)}),o}function Ie(e,r,t){if(e==null)return null;let o=String(e).replace(new RegExp("\\p{Cf}","gu"),"").trim();o=o.replace(kt,"-").replace(jt,"+");let u=!1;const h=o.match(/([+-])\s*$/);h&&(h[1]==="-"&&(u=!0),o=o.replace(/([+-])\s*$/,""));const x=o.match(/^\s*([+-])/);x&&(x[1]==="-"&&(u=!0),o=o.replace(/^\s*[+-]/,""));let f=r;f===void 0&&(rt.test(o)||Ft.test(o)?f="ar":st.test(o)&&(f="zh"));const{group:m,decimal:N,currency:R}=at(f,t),E=$e(f,t).formatToParts(1).filter(l=>l.type==="unit").map(l=>ke(l.value)),U=E.length?new RegExp(E.join("|"),"g"):null;let G=null;m&&(new RegExp("\\p{Zs}","u").test(m)?G=new RegExp("\\p{Zs}","gu"):m==="'"||m==="’"?G=/['’]/g:G=new RegExp(ke(m),"g"));let L=[{regex:m?G:null,replacement:""},{regex:N?new RegExp(ke(N),"g"):null,replacement:"."},{regex:/．/g,replacement:"."},{regex:/，/g,replacement:""},{regex:/٫/g,replacement:"."},{regex:/٬/g,replacement:""},{regex:R?new RegExp(ke(R),"g"):null,replacement:""},{regex:U,replacement:""},{regex:Rn,replacement:l=>String(_t.indexOf(l))},{regex:En,replacement:l=>String(vt.indexOf(l))},{regex:xn,replacement:l=>String(it.indexOf(l))},{regex:Nn,replacement:l=>hn[l]}].reduce((l,{regex:$,replacement:I})=>$?l.replace($,I):l,o);const j=L.lastIndexOf(".");if(j!==-1&&(L=`${L.slice(0,j).replace(/\./g,"")}.${L.slice(j+1).replace(/\./g,"")}`),/^[-+]?Infinity$/i.test(o)||/[∞]/.test(o))return null;const q=(u?"-":"")+L;let F=parseFloat(q);const b=t?.style,p=b==="unit"&&t?.unit==="percent",W=Sn.test(e)||b==="percent";return yn.test(e)?F/=1e3:!p&&W&&(F/=100),Number.isNaN(F)?null:F}const vn=60,Dn=400,Tn=50,Pn=3,wn=8,we=1,Fn=1e-10;function Vn(e){const r=$e("en-US").resolvedOptions(),t=e?.minimumFractionDigits??r.minimumFractionDigits??0;return{maximumFractionDigits:Math.max(e?.maximumFractionDigits??r.maximumFractionDigits??20,t),minimumFractionDigits:t}}function Ln(e,r){if(!Number.isFinite(e))return e;const t=Math.min(Math.max(r,0),20);return Number(e.toFixed(t))}function et(e,r){const{maximumFractionDigits:t}=Vn(r);return Ln(e,t)}function Mn(e,r,t,o="directional"){if(t===0)return e;const u=Math.abs(t),h=Math.sign(t),x=u*Fn*h,f=o==="nearest"?t:u,m=(e-r+x)/f;let N;return o==="nearest"?N=Math.round(m):h>0?N=Math.floor(m):N=Math.ceil(m),r+N*(o==="nearest"?t:u)}function kn(e,{step:r,minWithDefault:t,maxWithDefault:o,minWithZeroDefault:u,format:h,snapOnStep:x,small:f}){if(e===null)return e;const m=an(e,t,o);if(r!=null&&x){if(r===0)return et(m,h);let N=u;!f&&t!==Number.MIN_SAFE_INTEGER&&(N=t);const R=Mn(m,N,r,f?"nearest":"directional");return et(R,h)}return et(m,h)}const jn=s.forwardRef(function(r,t){const{id:o,min:u,max:h,smallStep:x=.1,step:f=1,largeStep:m=10,required:N=!1,disabled:R=!1,readOnly:E=!1,name:U,defaultValue:G,value:g,onValueChange:L,onValueCommitted:j,allowWheelScrub:q=!1,snapOnStep:F=!1,format:b,locale:p,render:W,className:Y,inputRef:l,...$}=r,{setDirty:I,validityData:H,disabled:z,setFilled:X,invalid:D,name:ee,state:O,validation:te,shouldValidateOnChange:i}=Nt(),_=z||R,Z=ee??U,[M,y]=s.useState(!1),C=u??Number.MIN_SAFE_INTEGER,k=h??Number.MAX_SAFE_INTEGER,J=u??0,v=b?.style,n=s.useRef(null),a=Yt(l,te.inputRef),T=on({id:o}),[P,Q]=zt({controlled:g,default:G,name:"NumberField",state:"value"}),d=P??null,oe=dt(d);Je(()=>{X(d!==null)},[X,d]);const ne=qt(),ie=dt(b),se=s.useRef(!1),ae=me((V,S)=>{se.current=!1,j?.(V,S)}),de=tt(),Ee=fn(),xe=tt(),Fe=s.useRef(!1),Ve=s.useRef(0),pe=s.useRef(!0),Ne=s.useRef(null),he=s.useRef(()=>{}),[w,le]=s.useState(()=>g!==void 0?Rt(d,p,b):Pe(d,p,b)),[Le,Wt]=s.useState("numeric"),ct=me(()=>{const{decimal:V,group:S,currency:B,literal:K}=at(p,b),A=new Set;In.forEach(re=>A.add(re)),V&&A.add(V),S&&(A.add(S),bt.test(S)&&A.add(" "));const ue=v==="percent"||v==="unit"&&b?.unit==="percent",ve=v==="percent"||v==="unit"&&b?.unit==="permille";return ue&&Dt.forEach(re=>A.add(re)),ve&&Tt.forEach(re=>A.add(re)),v==="currency"&&B&&A.add(B),K&&(Array.from(K).forEach(re=>A.add(re)),bt.test(K)&&A.add(" ")),Cn.forEach(re=>A.add(re)),C<0&&An.forEach(re=>A.add(re)),A}),Se=me(V=>V?.altKey?x:V?.shiftKey?m:f),Me=me((V,S)=>{const B=S.event,K=S.direction,A=kn(V,{step:K?Se(B)*K:void 0,format:ie.current,minWithDefault:C,maxWithDefault:k,minWithZeroDefault:J,snapOnStep:F,small:B?.altKey??!1});if(A!==d||V!==d||pe.current===!1){if(Ne.current=A,L?.(A,S),S.isCanceled)return;Q(A),I(A!==H.initialValue),se.current=!0}pe.current&&le(Pe(A,p,b)),ne()}),_e=me((V,{direction:S,currentValue:B,event:K,reason:A})=>{const ue=B??oe.current,ve=typeof ue=="number"?ue+V*S:Math.max(0,u??0);Me(ve,ce(A,K,void 0,{direction:S}))}),ye=me(()=>{xe.clear(),de.clear(),Ee.clear(),he.current(),Ve.current=0}),lt=me((V,S)=>{if(ye(),!n.current)return;const B=He(n.current);function K(ue){ue.preventDefault()}B.addEventListener("contextmenu",K),he.current=()=>{B.removeEventListener("contextmenu",K)},B.addEventListener("pointerup",ue=>{Fe.current=!1,ye();const ve=Ne.current??oe.current;ae(ve,Ce(V?"increment":"decrement",ue))},{once:!0});function A(){const ue=Se(S)??we;_e(ue,{direction:V?1:-1,event:S,reason:V?"increment-press":"decrement-press"})}A(),de.start(Dn,()=>{Ee.start(vn,A)})});Je(function(){if(!pe.current)return;const S=g!==void 0?Rt(d,p,b):Pe(d,p,b);S!==w&&le(S)}),Je(function(){if(!Qt)return;let S="text";C>=0&&(S="decimal"),Wt(S)},[C,v]),s.useEffect(()=>()=>ye(),[ye]),s.useEffect(function(){const S=n.current;if(_||E||!q||!S)return;function B(K){if(K.ctrlKey||We(n.current).activeElement!==n.current)return;K.preventDefault();const A=Se(K)??we;_e(A,{direction:K.deltaY>0?-1:1,event:K,reason:"wheel"})}return S.addEventListener("wheel",B),()=>{S.removeEventListener("wheel",B)}},[q,_e,_,E,m,f,Se]);const qe=s.useMemo(()=>({...O,disabled:_,readOnly:E,required:N,value:d,inputValue:w,scrubbing:M}),[O,_,E,N,d,w,M]),$t=s.useMemo(()=>({inputRef:n,inputValue:w,value:d,startAutoChange:lt,stopAutoChange:ye,minWithDefault:C,maxWithDefault:k,disabled:_,readOnly:E,id:T,setValue:Me,incrementValue:_e,getStepAmount:Se,allowInputSyncRef:pe,formatOptionsRef:ie,valueRef:oe,lastChangedValueRef:Ne,hasPendingCommitRef:se,isPressedRef:Fe,intentionalTouchCheckTimeout:xe,movesAfterTouchRef:Ve,name:Z,required:N,invalid:D,inputMode:Le,getAllowedNonNumericKeys:ct,min:u,max:h,setInputValue:le,locale:p,isScrubbing:M,setIsScrubbing:y,state:qe,onValueCommitted:ae}),[n,w,d,lt,ye,C,k,_,E,T,Me,_e,Se,ie,oe,xe,Z,N,D,Le,ct,u,h,le,p,M,qe,ae]),Ht=ge("div",r,{ref:t,state:qe,props:$,stateAttributesMapping:Re});return c.jsxs(At.Provider,{value:$t,children:[Ht,c.jsx("input",{...te.getInputValidationProps({onChange(V){if(V.nativeEvent.defaultPrevented)return;const S=V.currentTarget.valueAsNumber,B=Number.isNaN(S)?null:S,K=ce(un,V.nativeEvent);I(B!==H.initialValue),Me(B,K),i()&&te.commit(B)}}),ref:a,type:"number",name:Z,value:d??"",min:u,max:h,step:f,disabled:_,required:N,"aria-hidden":!0,tabIndex:-1,style:Jt})]})});function Rt(e,r,t){return t?.maximumFractionDigits!=null||t?.minimumFractionDigits!=null?Pe(e,r,t):St(e,r,t)}const On=s.forwardRef(function(r,t){const{render:o,className:u,...h}=r,{state:x}=Ae();return ge("div",r,{ref:t,state:x,props:[{role:"group"},h],stateAttributesMapping:Re})});function Ot(e){const{allowInputSyncRef:r,disabled:t,formatOptionsRef:o,getStepAmount:u,id:h,incrementValue:x,inputRef:f,inputValue:m,intentionalTouchCheckTimeout:N,isIncrement:R,isPressedRef:E,locale:U,maxWithDefault:G,minWithDefault:g,movesAfterTouchRef:L,readOnly:j,setValue:q,startAutoChange:F,stopAutoChange:b,value:p,valueRef:W,lastChangedValueRef:Y,onValueCommitted:l}=e,$=s.useRef({x:0,y:0}),I=s.useRef(!1),H=s.useRef(!1),z=s.useRef(""),X=p!=null&&p<=g,D=p!=null&&p>=G,ee=R?"increment-press":"decrement-press";function O(i){r.current=!0;const _=Ie(m,U,o.current);_!==null&&(W.current=_,q(_,ce(ee,i,void 0,{direction:R?1:-1})))}return{disabled:t||(R?D:X),"aria-readonly":j||void 0,"aria-label":R?"Increase":"Decrease","aria-controls":h,tabIndex:-1,style:{WebkitUserSelect:"none",userSelect:"none"},onTouchStart(){I.current=!0},onTouchEnd(){I.current=!1},onClick(i){const _=t||j||(R?D:X);if(i.defaultPrevented||_||(z.current==="touch"?H.current:i.detail!==0))return;O(i.nativeEvent);const Z=u(i)??we,M=W.current;x(Z,{direction:R?1:-1,event:i.nativeEvent,reason:ee});const y=Y.current??W.current;y!==M&&l(y,Ce(ee,i.nativeEvent))},onPointerDown(i){const _=!i.button||i.button===0,Z=t||(R?D:X);i.defaultPrevented||j||!_||Z||(z.current=i.pointerType,H.current=!1,E.current=!0,$.current={x:i.clientX,y:i.clientY},O(i.nativeEvent),i.pointerType!=="touch"?(i.preventDefault(),f.current?.focus(),F(R,i)):N.start(Tn,()=>{const M=L.current;L.current=0,E.current&&M!=null&&M<Pn?(F(R,i),H.current=!0):(H.current=!1,b())}))},onPointerUp(i){i.pointerType==="touch"&&(E.current=!1)},onPointerMove(i){if(t||j||(R?D:X)||i.pointerType!=="touch"||!E.current)return;L.current!=null&&(L.current+=1);const{x:Z,y:M}=$.current,y=Z-i.clientX,C=M-i.clientY;y**2+C**2>wn**2&&b()},onMouseEnter(i){const _=t||j||(R?D:X);i.defaultPrevented||_||!E.current||I.current||z.current==="touch"||F(R,i)},onMouseLeave(){I.current||b()},onMouseUp(){I.current||b()}}}const Un=s.forwardRef(function(r,t){const{render:o,className:u,disabled:h=!1,nativeButton:x=!0,...f}=r,{allowInputSyncRef:m,disabled:N,formatOptionsRef:R,getStepAmount:E,id:U,incrementValue:G,inputRef:g,inputValue:L,intentionalTouchCheckTimeout:j,isPressedRef:q,locale:F,maxWithDefault:b,minWithDefault:p,movesAfterTouchRef:W,readOnly:Y,setValue:l,startAutoChange:$,state:I,stopAutoChange:H,value:z,valueRef:X,lastChangedValueRef:D,onValueCommitted:ee}=Ae(),O=h||N,te=Ot({isIncrement:!0,inputRef:g,startAutoChange:$,stopAutoChange:H,minWithDefault:p,maxWithDefault:b,value:z,inputValue:L,disabled:O,readOnly:Y,id:U,setValue:l,getStepAmount:E,incrementValue:G,allowInputSyncRef:m,formatOptionsRef:R,valueRef:X,isPressedRef:q,intentionalTouchCheckTimeout:j,movesAfterTouchRef:W,locale:F,lastChangedValueRef:D,onValueCommitted:ee}),{getButtonProps:i,buttonRef:_}=yt({disabled:O,native:x}),Z=s.useMemo(()=>({...I,disabled:O}),[I,O]);return ge("button",r,{ref:[t,_],state:Z,props:[te,f,i],stateAttributesMapping:Re})}),Gn=s.forwardRef(function(r,t){const{render:o,className:u,disabled:h=!1,nativeButton:x=!0,...f}=r,{allowInputSyncRef:m,disabled:N,formatOptionsRef:R,getStepAmount:E,id:U,incrementValue:G,inputRef:g,inputValue:L,intentionalTouchCheckTimeout:j,isPressedRef:q,maxWithDefault:F,minWithDefault:b,movesAfterTouchRef:p,readOnly:W,setValue:Y,startAutoChange:l,state:$,stopAutoChange:I,value:H,valueRef:z,locale:X,lastChangedValueRef:D,onValueCommitted:ee}=Ae(),O=h||N,te=Ot({isIncrement:!1,inputRef:g,startAutoChange:l,stopAutoChange:I,minWithDefault:b,maxWithDefault:F,value:H,inputValue:L,disabled:O,readOnly:W,id:U,setValue:Y,getStepAmount:E,incrementValue:G,allowInputSyncRef:m,formatOptionsRef:R,valueRef:z,isPressedRef:q,intentionalTouchCheckTimeout:j,movesAfterTouchRef:p,locale:X,lastChangedValueRef:D,onValueCommitted:ee}),{getButtonProps:i,buttonRef:_}=yt({disabled:O,native:x}),Z=s.useMemo(()=>({...$,disabled:O}),[$,O]);return ge("button",r,{ref:[t,_],state:Z,props:[te,f,i],stateAttributesMapping:Re})}),Wn={...sn,...Re},$n=new Set(["Backspace","Delete","ArrowLeft","ArrowRight","Tab","Enter","Escape"]),Hn=s.forwardRef(function(r,t){const{render:o,className:u,...h}=r,{allowInputSyncRef:x,disabled:f,formatOptionsRef:m,getAllowedNonNumericKeys:N,getStepAmount:R,id:E,incrementValue:U,inputMode:G,inputValue:g,max:L,min:j,name:q,readOnly:F,required:b,setValue:p,state:W,setInputValue:Y,locale:l,inputRef:$,value:I,onValueCommitted:H,lastChangedValueRef:z,hasPendingCommitRef:X,valueRef:D}=Ae(),{clearErrors:ee}=tn(),{validationMode:O,setTouched:te,setFocused:i,invalid:_,shouldValidateOnChange:Z,validation:M}=Nt(),{labelId:y}=nn(),C=s.useRef(!1),k=s.useRef(!1);return rn({id:E,commit:M.commit,value:I,controlRef:$,name:q,getValue:()=>I??null}),ln(I,n=>{const a=Z();if(ee(q),a&&M.commit(I),!(n===I||a)){if(k.current){k.current=!1;return}M.commit(I,!0)}}),ge("input",r,{ref:[t,$],state:W,props:[{id:E,required:b,disabled:f,readOnly:F,inputMode:G,value:g,type:"text",autoComplete:"off",autoCorrect:"off",spellCheck:"false","aria-roledescription":"Number field","aria-invalid":_||void 0,"aria-labelledby":y,suppressHydrationWarning:!0,onFocus(n){if(n.defaultPrevented||F||f||C.current)return;C.current=!0,i(!0);const a=n.currentTarget,T=a.value.length;a.setSelectionRange(T,T)},onBlur(n){if(n.defaultPrevented||F||f)return;te(!0),i(!1);const a=!x.current,T=X.current;if(x.current=!0,g.trim()===""){p(null,ce(Qe,n.nativeEvent)),O==="onBlur"&&M.commit(null),H(null,Ce(Qe,n.nativeEvent));return}const P=m.current,Q=Ie(g,l,P);if(Q===null)return;const d=P?.maximumFractionDigits!=null||P?.minimumFractionDigits!=null,oe=P?.maximumFractionDigits,ne=d&&typeof oe=="number"?Number(Q.toFixed(oe)):Q,ie=Ce(ft,n.nativeEvent),se=I!==ne,ae=a||se||T;O==="onBlur"&&M.commit(ne),se&&(k.current=!0,p(ne,ce(ft,n.nativeEvent))),ae&&H(ne,ie);const de=Pe(ne,l,P),Ee=St(Q,l,P);!(!d&&Q===I&&g===Ee)&&g!==de&&Y(de)},onChange(n){if(n.nativeEvent.defaultPrevented)return;x.current=!1;const a=n.target.value;if(a.trim()===""){Y(a),p(null,ce(Qe,n.nativeEvent));return}const T=N();if(!Array.from(a).every(d=>{const oe=d>="0"&&d<="9",ne=rt.test(d),ie=st.test(d),se=Ft.test(d),ae=gt.test(d),de=Te.test(d);return oe||ne||ie||se||ae||de||T.has(d)}))return;if(n.isTrusted){Y(a);const d=Ie(a,l,m.current);d!==null&&p(d,ce(mt,n.nativeEvent));return}const Q=Ie(a,l,m.current);Q!==null&&(Y(a),p(Q,ce(mt,n.nativeEvent)))},onKeyDown(n){if(n.defaultPrevented||F||f)return;const a=n.nativeEvent;x.current=!0;const T=N();let P=T.has(n.key);const{decimal:Q,currency:d,percentSign:oe}=at(l,m.current),ne=n.currentTarget.selectionStart,ie=n.currentTarget.selectionEnd,se=ne===0&&ie===g.length,ae=w=>ne!=null&&ie!=null&&w>=ne&&w<ie;if(Te.test(n.key)&&Array.from(T).some(w=>Te.test(w||""))){const w=g.search(kt),le=w!=null&&w!==-1&&ae(w);P=!(Te.test(g)||je.test(g))||se||le}if(je.test(n.key)&&Array.from(T).some(w=>je.test(w||""))){const w=g.search(jt),le=w!=null&&w!==-1&&ae(w);P=!(Te.test(g)||je.test(g))||se||le}[Q,d,oe].forEach(w=>{if(n.key===w){const le=g.indexOf(w),Le=ae(le);P=!g.includes(w)||se||Le}});const de=n.key>="0"&&n.key<="9",Ee=rt.test(n.key),xe=st.test(n.key),Fe=gt.test(n.key),Ve=$n.has(n.key);if(n.which===229||n.altKey||n.ctrlKey||n.metaKey||P||de||Ee||Fe||xe||Ve)return;const pe=Ie(g,l,m.current),Ne=R(n)??we;dn(n);const he=Ce(De,a);n.key==="ArrowUp"?(U(Ne,{direction:1,currentValue:pe,event:a,reason:De}),H(z.current??D.current,he)):n.key==="ArrowDown"?(U(Ne,{direction:-1,currentValue:pe,event:a,reason:De}),H(z.current??D.current,he)):n.key==="Home"&&j!=null?(p(j,ce(De,a)),H(z.current??D.current,he)):n.key==="End"&&L!=null&&(p(L,ce(De,a)),H(z.current??D.current,he))},onPaste(n){if(n.defaultPrevented||F||f)return;n.preventDefault();const T=(n.clipboardData||window.Clipboard).getData("text/plain"),P=Ie(T,l,m.current);P!==null&&(x.current=!1,p(P,ce(cn,n.nativeEvent)),Y(T))}},M.getValidationProps(),h],stateAttributesMapping:Wn})}),Ut=s.createContext(void 0);function Bn(){const e=s.useContext(Ut);if(e===void 0)throw new Error(Et(44));return e}function Kn(e,r){const t=He(r),o=r.getBoundingClientRect();if(o&&e!=null)return{x:o.left-e/2,y:o.top-e/2,width:o.right+e/2,height:o.bottom+e/2};const u=t.visualViewport;return u?{x:u.offsetLeft,y:u.offsetTop,width:u.offsetLeft+u.width,height:u.offsetTop+u.height}:{x:0,y:0,width:t.document.documentElement.clientWidth,height:t.document.documentElement.clientHeight}}function Yn(e,r){const t=He(e).visualViewport;if(!t)return()=>{};function o(){t&&(r.current=t.scale)}return o(),t.addEventListener("resize",o),()=>{t.removeEventListener("resize",o)}}const zn=s.forwardRef(function(r,t){const{render:o,className:u,direction:h="horizontal",pixelSensitivity:x=2,teleportDistance:f,...m}=r,{state:N,setIsScrubbing:R,disabled:E,readOnly:U,inputRef:G,incrementValue:g,getStepAmount:L,onValueCommitted:j,lastChangedValueRef:q,valueRef:F}=Ae(),b=s.useRef(null),p=s.useRef(!1),W=s.useRef(null),Y=s.useRef({x:0,y:0}),l=s.useRef(1),$=tt(),[I,H]=s.useState(!1),[z,X]=s.useState(!1),[D,ee]=s.useState(!1);s.useEffect(()=>{if(!(!D||!W.current))return Yn(W.current,l)},[D]);function O(y,C){W.current&&(W.current.style.transform=`translate3d(${y}px,${C}px,0) scale(${1/l.current})`)}const te=me(({movementX:y,movementY:C})=>{const k=W.current,J=b.current;if(!k||!J)return;const v=Kn(f,J),n=Y.current,a={x:Math.round(n.x+y),y:Math.round(n.y+C)},T=k.offsetWidth,P=k.offsetHeight;a.x+T/2<v.x?a.x=v.width-T/2:a.x+T/2>v.width&&(a.x=v.x-T/2),a.y+P/2<v.y?a.y=v.height-P/2:a.y+P/2>v.height&&(a.y=v.y-P/2),Y.current=a,O(a.x,a.y)}),i=me((y,{clientX:C,clientY:k})=>{nt.flushSync(()=>{ee(y),R(y)});const J=W.current;if(!J||!y)return;const v={x:C-J.offsetWidth/2,y:k-J.offsetHeight/2};Y.current=v,O(v.x,v.y)});s.useEffect(function(){if(!G.current||E||U||!D)return;let C=0;function k(n){function a(){try{We(b.current).exitPointerLock()}catch{}finally{p.current=!1,i(!1,n),j(q.current??F.current,Ce(pt,n))}}en?$.start(20,a):a()}function J(n){if(!p.current)return;n.preventDefault(),te(n);const{movementX:a,movementY:T}=n;if(C+=h==="vertical"?T:a,Math.abs(C)>=x){C=0;const P=h==="vertical"?-T:a,Q=L(n)??we,d=P*Q;d!==0&&g(Math.abs(d),{direction:d>=0?1:-1,event:n,reason:pt})}}const v=He(G.current);return v.addEventListener("pointerup",k,!0),v.addEventListener("pointermove",J,!0),()=>{$.clear(),v.removeEventListener("pointerup",k,!0),v.removeEventListener("pointermove",J,!0)}},[E,U,g,D,L,G,i,te,h,x,q,j,F,$]),s.useEffect(function(){const C=b.current;if(!C||E||U)return;function k(J){J.touches.length===1&&J.preventDefault()}return C.addEventListener("touchstart",k),()=>{C.removeEventListener("touchstart",k)}},[E,U]);const Z=ge("span",r,{ref:[t,b],state:N,props:[{role:"presentation",style:{touchAction:"none",WebkitUserSelect:"none",userSelect:"none"},async onPointerDown(y){const C=!y.button||y.button===0;if(y.defaultPrevented||U||!C||E)return;const k=y.pointerType==="touch";if(H(k),y.pointerType==="mouse"&&(y.preventDefault(),G.current?.focus()),p.current=!0,i(!0,y.nativeEvent),!k&&!xt)try{await We(b.current).body.requestPointerLock(),X(!1)}catch{X(!0)}finally{p.current&&nt.flushSync(()=>{i(!0,y.nativeEvent)})}}},m],stateAttributesMapping:Re}),M=s.useMemo(()=>({isScrubbing:D,isTouchInput:I,isPointerLockDenied:z,scrubAreaCursorRef:W,scrubAreaRef:b,direction:h,pixelSensitivity:x,teleportDistance:f}),[D,I,z,h,x,f]);return c.jsx(Ut.Provider,{value:M,children:Z})}),Xn=s.forwardRef(function(r,t){const{render:o,className:u,...h}=r,{state:x}=Ae(),{isScrubbing:f,isTouchInput:m,isPointerLockDenied:N,scrubAreaCursorRef:R}=Bn(),[E,U]=s.useState(null),g=ge("span",r,{enabled:f&&!xt&&!m&&!N,ref:[t,R,U],state:x,props:[{role:"presentation",style:{position:"fixed",top:0,left:0,pointerEvents:"none"}},h],stateAttributesMapping:Re});return g&&nt.createPortal(g,We(E).body)}),Zn="_Root_1shgk_1",qn="_ScrubArea_1shgk_9",Jn="_ScrubAreaCursor_1shgk_22",Qn="_Label_1shgk_30",er="_Group_1shgk_39",tr="_Input_1shgk_44",nr="_Decrement_1shgk_72",rr="_Increment_1shgk_73",fe={Root:Zn,ScrubArea:qn,ScrubAreaCursor:Jn,Label:Qn,Group:er,Input:tr,Decrement:nr,Increment:rr},Be=s.forwardRef(({className:e,...r},t)=>c.jsx(jn,{ref:t,className:be(e,fe.Root),...r}));Be.displayName="NumberFieldRoot";const Ke=s.forwardRef(({className:e,...r},t)=>c.jsx(zn,{ref:t,className:be(e,fe.ScrubArea),...r}));Ke.displayName="NumberFieldScrubArea";const ut=s.forwardRef(({className:e,...r},t)=>c.jsx(Xn,{ref:t,className:be(e,fe.ScrubAreaCursor),...r}));ut.displayName="NumberFieldScrubAreaCursor";const Ye=s.forwardRef(({className:e,...r},t)=>c.jsx(On,{ref:t,className:be(e,fe.Group),...r}));Ye.displayName="NumberFieldGroup";const ze=s.forwardRef(({className:e,...r},t)=>c.jsx(Hn,{ref:t,className:be(e,fe.Input),...r}));ze.displayName="NumberFieldInput";const Xe=s.forwardRef(({className:e,...r},t)=>c.jsx(Gn,{ref:t,className:be(e,fe.Decrement),...r}));Xe.displayName="NumberFieldDecrement";const Ze=s.forwardRef(({className:e,...r},t)=>c.jsx(Un,{ref:t,className:be(e,fe.Increment),...r}));Ze.displayName="NumberFieldIncrement";Be.__docgenInfo={description:"",methods:[],displayName:"NumberFieldRoot"};Ke.__docgenInfo={description:"",methods:[],displayName:"NumberFieldScrubArea"};ut.__docgenInfo={description:"",methods:[],displayName:"NumberFieldScrubAreaCursor"};Ye.__docgenInfo={description:"",methods:[],displayName:"NumberFieldGroup"};ze.__docgenInfo={description:"",methods:[],displayName:"NumberFieldInput"};Xe.__docgenInfo={description:"",methods:[],displayName:"NumberFieldDecrement"};Ze.__docgenInfo={description:"",methods:[],displayName:"NumberFieldIncrement"};const Mr={title:"Components/Number Field",decorators:[e=>c.jsx("div",{style:{width:"100%",maxWidth:320,margin:"0 auto"},children:c.jsx(e,{})})]},Gt=`typesetting-label typesetting-tsumegumi ${fe.Label}`,sr=()=>{const e=s.useId();return c.jsxs(Be,{id:e,defaultValue:12,min:0,max:120,children:[c.jsxs(Ke,{children:[c.jsx("label",{htmlFor:e,className:Gt,children:"数量"}),c.jsx(ut,{children:c.jsx(ir,{})})]}),c.jsxs(Ye,{children:[c.jsx(Xe,{"aria-label":"減らす",children:c.jsx(Ge,{icon:Ct,size:16})}),c.jsx(ze,{}),c.jsx(Ze,{"aria-label":"増やす",children:c.jsx(Ge,{icon:It,size:16})})]})]})},Oe={render:()=>c.jsx(sr,{})},or=()=>{const e=s.useId();return c.jsxs(Be,{id:e,defaultValue:4,disabled:!0,children:[c.jsx(Ke,{children:c.jsx("label",{htmlFor:e,className:Gt,children:"個数"})}),c.jsxs(Ye,{children:[c.jsx(Xe,{"aria-label":"減らす",children:c.jsx(Ge,{icon:Ct,size:16})}),c.jsx(ze,{}),c.jsx(Ze,{"aria-label":"増やす",children:c.jsx(Ge,{icon:It,size:16})})]})]})},Ue={render:()=>c.jsx(or,{})};function ir(e){return c.jsx("svg",{width:"26",height:"14",viewBox:"0 0 24 14",fill:"black",stroke:"white",xmlns:"http://www.w3.org/2000/svg",...e,children:c.jsx("path",{d:"M19.5 5.5L6.49737 5.51844V2L1 6.9999L6.5 12L6.49737 8.5L19.5 8.5V12L25 6.9999L19.5 2V5.5Z"})})}Oe.parameters={...Oe.parameters,docs:{...Oe.parameters?.docs,source:{originalSource:`{
  render: () => <DefaultStory />
}`,...Oe.parameters?.docs?.source}}};Ue.parameters={...Ue.parameters,docs:{...Ue.parameters?.docs,source:{originalSource:`{
  render: () => <DisabledStory />
}`,...Ue.parameters?.docs?.source}}};const kr=["Default","Disabled"];export{Oe as Default,Ue as Disabled,kr as __namedExportsOrder,Mr as default};
